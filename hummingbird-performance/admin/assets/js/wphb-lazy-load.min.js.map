{"version":3,"file":"js/wphb-lazy-load.min.js","mappings":"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","sources":["webpack://wp-hummingbird/./_src/js/lazy-load.js"],"sourcesContent":["/* global wphbGlobal */\n/* global ajaxurl */\n\n( function() {\n\t'use strict';\n\n\tconst WPHBLazyComment = {\n\t\tcommentsFormLoading: false,\n\t\tcommentsLoading: false,\n\t\tcommentsLoadComplete: false,\n\t\tcommentsLoaded: 0,\n\t\tloadOnScroll: false,\n\t\tloadCommentFormOnScroll: false,\n\t\tcommentLoadingMethod: 'click', //or scroll\n\t\tpageCommentsOption: 0,\n\t\ttotalCommentsPages: 1,\n\t\tcommentsPageOrder: 'newest', //or oldest\n\t\tcpageNum: 1,\n\t\tpostId: 0,\n\t\tcommentNonce: '',\n\t\tcommentsContainer: null,\n\t\tcommentList: null,\n\t\tloadCommentsButton: null,\n\t\tloadCommentsButtonWrap: null,\n\t\tcommentsEndIndicator: null,\n\t\tcommentsLoadSpinnerWrap: null,\n\t\tajaxurl: null,\n\t\tpreloadComment: false,\n\n\t\tinit() {\n\t\t\tif ( wphbGlobal ) {\n\t\t\t\tthis.ajaxurl = wphbGlobal.ajaxurl;\n\t\t\t} else {\n\t\t\t\tthis.ajaxurl = ajaxurl;\n\t\t\t}\n\n\t\t\t// Run comment lazy loader if we are in site front-end and in a single page.\n\t\t\tif ( document.getElementById( 'wphb-comments-wrap' ) ) {\n\t\t\t\tthis.initCommentLazyLoader();\n\t\t\t}\n\t\t},\n\n\t\tinitCommentLazyLoader() {\n\t\t\tthis.commentLoadingMethod = document.getElementById(\n\t\t\t\t'wphb-load-comments-method'\n\t\t\t).value;\n\n\t\t\tthis.pageCommentsOption = parseInt(\n\t\t\t\tdocument.getElementById( 'wphb-page-comments-option' ).value\n\t\t\t);\n\n\t\t\tthis.totalCommentsPages = parseInt(\n\t\t\t\tdocument.getElementById( 'wphb-total-comments-pages' ).value\n\t\t\t);\n\n\t\t\tthis.commentsPageOrder = document.getElementById(\n\t\t\t\t'wphb-comments-page-order'\n\t\t\t).value;\n\n\t\t\tthis.cpageNum = parseInt(\n\t\t\t\tdocument.getElementById( 'wphb-cpage-num' ).value\n\t\t\t);\n\n\t\t\tthis.preloadComment = Boolean( wphbGlobal.preloadComment );\n\n\t\t\tif ( true === this.preloadComment ) {\n\t\t\t\tthis.cpageNum = this.commentsPageOrder === 'newest' ? this.cpageNum - 1 : this.cpageNum + 1;\n\t\t\t}\n\t\t\tthis.postId = parseInt(\n\t\t\t\tdocument.getElementById( 'wphb-post-id' ).value\n\t\t\t);\n\n\t\t\tthis.commentNonce = document.getElementById(\n\t\t\t\t'comment-template-nonce'\n\t\t\t).value;\n\n\t\t\tthis.commentsContainer = document.getElementById(\n\t\t\t\t'wphb-comments-container'\n\t\t\t);\n\n\t\t\tthis.commentsEndIndicator = document.getElementById(\n\t\t\t\t'wphb-comments-end-indicator'\n\t\t\t);\n\n\t\t\tthis.commentsLoadSpinnerWrap = document.getElementById(\n\t\t\t\t'wphb-load-comments-spinner-wrap'\n\t\t\t);\n\n\t\t\tif ( this.commentLoadingMethod === 'click' ) {\n\t\t\t\tthis.loadCommentsButton = document.getElementById(\n\t\t\t\t\t'wphb-load-comments'\n\t\t\t\t);\n\t\t\t\tthis.loadCommentsButtonWrap = document.getElementById(\n\t\t\t\t\t'wphb-load-comments-button-wrap'\n\t\t\t\t);\n\t\t\t}\n\t\t\tif ( true === this.preloadComment ) {\n\t\t\t\tif ( this.cpageNum < 1 || this.cpageNum > WPHBLazyComment.totalCommentsPages ) {\n\t\t\t\t\tWPHBLazyComment.finishCommentLoad();\n\t\t\t\t} else {\n\t\t\t\t\tWPHBLazyComment.enableCommentLoad();\n\t\t\t\t}\n\n\t\t\t\tWPHBLazyComment.putCommentContent( wphbGlobal.commentForm, false );\n\t\t\t}\n\t\t\t\n\t\t\t// If we've the load on click enabled\n\t\t\tif ( this.commentLoadingMethod === 'click' ) {\n\t\t\t\tthis.loadCommentsButton.addEventListener( 'click', () =>\n\t\t\t\t\tWPHBLazyComment.loadComments()\n\t\t\t\t);\n\t\t\t\tif ( true !== this.preloadComment ) {\n\t\t\t\t\t// At the very beginning load the comment form and basic wrappers\n\t\t\t\t\tthis.loadCommentFormOnScroll = true;\n\t\t\t\t\twindow.addEventListener( 'scroll', WPHBLazyComment.handleScrollingForLoadForm );\n\t\t\t\t\t// For some small posts comment area might be in view port on page load.\n\t\t\t\t\t// So try to run loadComments on page load.\n\t\t\t\t\tWPHBLazyComment.handleScrollingForLoadForm();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//If we've the load on scroll enabled\n\t\t\tif ( this.commentLoadingMethod === 'scroll' ) {\n\t\t\t\tthis.loadOnScroll = true;\n\t\t\t\twindow.addEventListener( 'scroll', () =>\n\t\t\t\t\tWPHBLazyComment.handleScrolling()\n\t\t\t\t);\n\t\t\t\t// For some small posts comment area might be in view port on page load.\n\t\t\t\t// So try to run loadCommentsForm on page load.\n\t\t\t\tWPHBLazyComment.handleScrolling();\n\t\t\t}\n\t\t},\n\n\t\tenableCommentLoad() {\n\t\t\tif ( this.loadCommentsButton ) {\n\t\t\t\tthis.loadCommentsButton.removeAttribute( 'disabled' );\n\t\t\t}\n\n\t\t\tthis.loadOnScroll = true;\n\t\t},\n\n\t\tdisableCommentLoad() {\n\t\t\tif ( this.loadCommentsButton ) {\n\t\t\t\tthis.loadCommentsButton.setAttribute( 'disabled', 'disabled' );\n\t\t\t}\n\n\t\t\tthis.loadOnScroll = false;\n\t\t\tthis.loadCommentFormOnScroll = false;\n\t\t},\n\n\t\tmoveLoadButton() {\n\t\t\tif ( this.loadCommentsButton ) {\n\t\t\t\tthis.insertAfter(\n\t\t\t\t\tthis.loadCommentsButtonWrap,\n\t\t\t\t\tthis.commentList\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\tmoveCommentsEndIndicator() {\n\t\t\tthis.insertAfter( this.commentsEndIndicator, this.commentList );\n\t\t},\n\n\t\tmoveCommentForm() {\n\t\t\tconst form = document.getElementById( 'respond' );\n\t\t\tif ( form ) {\n\t\t\t\tthis.insertBefore( form, this.commentList );\n\t\t\t}\n\t\t},\n\n\t\thideLoadButton() {\n\t\t\tif ( this.loadCommentsButton ) {\n\t\t\t\tthis.loadCommentsButton.style.display = 'none';\n\t\t\t}\n\t\t},\n\n\t\tshowCommentLoadSpinner() {\n\t\t\tthis.commentsLoadSpinnerWrap.style.display = 'block';\n\t\t},\n\n\t\thideCommentLoadSpinner() {\n\t\t\tthis.commentsLoadSpinnerWrap.style.display = 'none';\n\t\t},\n\n\t\tmoveCommentLoadSpinner() {\n\t\t\tthis.insertAfter( this.commentsLoadSpinnerWrap, this.commentList );\n\t\t},\n\n\t\tfinishCommentLoad() {\n\t\t\tthis.commentsLoading = false;\n\t\t\tthis.disableCommentLoad();\n\t\t\tthis.hideLoadButton();\n\t\t},\n\n\t\thandleScrolling() {\n\t\t\t// Check if in viewport and loadOnScroll is enabled\n\t\t\tif (\n\t\t\t\t! this.loadOnScroll ||\n\t\t\t\t! this.isInViewport( this.commentsEndIndicator )\n\t\t\t) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tthis.loadComments();\n\t\t},\n\n\t\thandleScrollingForLoadForm() {\n\t\t\t// Check if in viewport and loadCommentFormOnScroll is enabled\n\t\t\tif (\n\t\t\t\t! WPHBLazyComment.loadCommentFormOnScroll ||\n\t\t\t\t! WPHBLazyComment.isInViewport( WPHBLazyComment.commentsEndIndicator )\n\t\t\t) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\twindow.removeEventListener( 'scroll', WPHBLazyComment.handleScrollingForLoadForm );\n\n\t\t\tWPHBLazyComment.loadCommentsForm();\n\t\t},\n\n\t\tloadCommentsForm() {\n\t\t\tthis.commentsFormLoading = true;\n\t\t\tthis.loadComments();\n\t\t},\n\n\t\tloadComments() {\n\t\t\tif ( this.commentsLoadComplete || this.commentsLoading ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.getCommentsTemplate();\n\t\t},\n\n\t\tgetCommentsTemplate() {\n\t\t\tthis.disableCommentLoad();\n\t\t\tthis.showCommentLoadSpinner();\n\t\t\tconst cxhr = new XMLHttpRequest();\n\n\t\t\tthis.commentsLoading = true;\n\t\t\tcxhr.open(\n\t\t\t\t'GET',\n\t\t\t\tWPHBLazyComment.ajaxurl +\n\t\t\t\t\t'?action=get_comments_template&id=' +\n\t\t\t\t\tWPHBLazyComment.postId +\n\t\t\t\t\t'&cpage_num=' +\n\t\t\t\t\tWPHBLazyComment.cpageNum +\n\t\t\t\t\t'&_nonce=' +\n\t\t\t\t\tWPHBLazyComment.commentNonce\n\t\t\t);\n\n\t\t\tcxhr.onload = function() {\n\t\t\t\t// Append the comment template\n\t\t\t\tif ( 200 === cxhr.status ) {\n\t\t\t\t\tconst response = JSON.parse( cxhr.responseText );\n\t\t\t\t\tif ( 'undefined' !== typeof response.data ) {\n\t\t\t\t\t\t// Append the comment template/ Error message returned in Ajax response\n\t\t\t\t\t\tif ( WPHBLazyComment.commentsFormLoading === true ) {\n\t\t\t\t\t\t\tWPHBLazyComment.enableCommentLoad();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tWPHBLazyComment.commentsLoaded++;\n\t\t\t\t\t\t\tWPHBLazyComment.cpageNum =\n\t\t\t\t\t\t\tWPHBLazyComment.commentsPageOrder === 'newest'\n\t\t\t\t\t\t\t\t? WPHBLazyComment.cpageNum - 1\n\t\t\t\t\t\t\t\t: WPHBLazyComment.cpageNum + 1;\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tWPHBLazyComment.cpageNum < 1 ||\n\t\t\t\t\t\t\t\tWPHBLazyComment.cpageNum >\n\t\t\t\t\t\t\t\t\tWPHBLazyComment.totalCommentsPages\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tWPHBLazyComment.finishCommentLoad();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tWPHBLazyComment.enableCommentLoad();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tWPHBLazyComment.putCommentContent(\n\t\t\t\t\t\t\tresponse.data.content\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif ( WPHBLazyComment.commentsFormLoading === true ) {\n\t\t\t\t\t\t\tWPHBLazyComment.commentsFormLoading = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tWPHBLazyComment.enableCommentLoad();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Show the error, if failed; Enable the button, scroll loading\n\t\t\t\t\tWPHBLazyComment.enableCommentLoad();\n\t\t\t\t}\n\t\t\t\tWPHBLazyComment.commentsLoading = false;\n\t\t\t\tWPHBLazyComment.hideCommentLoadSpinner();\n\t\t\t};\n\n\t\t\tcxhr.send();\n\t\t},\n\n\t\tputCommentContent( content, preload = true ) {\n\t\t\tconst html = this.stringToHTML( content );\n\t\t\tlet comment = html.querySelector( '.comment' );\n\n\t\t\tif ( null === comment ) {\n\t\t\t\tcomment = html.querySelector( '.review' );\n\t\t\t}\n\n\t\t\tif ( ! comment ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst commentList = comment.parentNode;\n\n\t\t\tif ( WPHBLazyComment.commentsFormLoading === true ) {\n\t\t\t\tcommentList.innerHTML = '';\n\t\t\t}\n\n\t\t\tif ( true === preload && ( this.commentsLoaded > 1 || ( this.commentLoadingMethod === 'click' && WPHBLazyComment.commentsFormLoading === false ) ) ) {\n\t\t\t\tthis.commentList.innerHTML += commentList.innerHTML;\n\t\t\t} else {\n\t\t\t\tthis.commentsContainer.appendChild( html );\n\t\t\t\tthis.commentList = commentList;\n\t\t\t\tthis.moveCommentsEndIndicator();\n\t\t\t\tthis.moveCommentLoadSpinner();\n\t\t\t\tthis.moveLoadButton();\n\t\t\t\tif ( this.commentLoadingMethod === 'scroll' ) {\n\t\t\t\t\tthis.moveCommentForm();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( true !== preload ) {\n\t\t\t\tWPHBLazyComment.commentsLoaded++;\n\t\t\t}\n\t\t},\n\n\t\tstringToHTML( str ) {\n\t\t\tstr = '<div>' + str + '</div>';\n\t\t\tconst support = ( function() {\n\t\t\t\tif ( ! window.DOMParser ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst parser = new DOMParser();\n\t\t\t\ttry {\n\t\t\t\t\tparser.parseFromString( 'x', 'text/html' );\n\t\t\t\t} catch ( err ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t} )();\n\n\t\t\t//If DOMParser is supported, use it\n\t\t\tif ( support ) {\n\t\t\t\tconst parser = new DOMParser();\n\t\t\t\tconst doc = parser.parseFromString( str, 'text/html' );\n\t\t\t\treturn doc.body.firstChild;\n\t\t\t}\n\n\t\t\t// Otherwise, fallback to old-school method\n\t\t\tconst dom = document.createElement( 'div' );\n\t\t\tdom.innerHTML = str;\n\t\t\treturn dom.firstChild;\n\t\t},\n\n\t\tinsertAfter( newNode, referenceNode ) {\n\t\t\treferenceNode.parentNode.insertBefore(\n\t\t\t\tnewNode,\n\t\t\t\treferenceNode.nextSibling\n\t\t\t);\n\t\t},\n\n\t\tinsertBefore( newNode, referenceNode ) {\n\t\t\treferenceNode.parentNode.insertBefore( newNode, referenceNode );\n\t\t},\n\n\t\tisInViewport( element ) {\n\t\t\tconst bounding = element.getBoundingClientRect();\n\t\t\treturn (\n\t\t\t\tbounding.top >= 0 &&\n\t\t\t\tbounding.left >= 0 &&\n\t\t\t\tbounding.bottom <=\n\t\t\t\t\t( window.innerHeight ||\n\t\t\t\t\t\tdocument.documentElement.clientHeight ) &&\n\t\t\t\tbounding.right <=\n\t\t\t\t\t( window.innerWidth ||\n\t\t\t\t\t\tdocument.documentElement.clientWidth )\n\t\t\t);\n\t\t},\n\t};\n\n\tif ( wphbGlobal.preloadComment ) {\n\t\tWPHBLazyComment.init();\n\t} else {\n\t\tdocument.addEventListener( 'DOMContentLoaded', function() {\n\t\t\tWPHBLazyComment.init();\n\t\t} );\n\t}\n}() );\n"],"names":["WPHBLazyComment","commentsFormLoading","commentsLoading","commentsLoadComplete","commentsLoaded","loadOnScroll","loadCommentFormOnScroll","commentLoadingMethod","pageCommentsOption","totalCommentsPages","commentsPageOrder","cpageNum","postId","commentNonce","commentsContainer","commentList","loadCommentsButton","loadCommentsButtonWrap","commentsEndIndicator","commentsLoadSpinnerWrap","ajaxurl","preloadComment","init","wphbGlobal","document","getElementById","initCommentLazyLoader","value","parseInt","Boolean","finishCommentLoad","enableCommentLoad","putCommentContent","commentForm","addEventListener","loadComments","window","handleScrollingForLoadForm","handleScrolling","removeAttribute","disableCommentLoad","setAttribute","moveLoadButton","insertAfter","moveCommentsEndIndicator","moveCommentForm","form","insertBefore","hideLoadButton","style","display","showCommentLoadSpinner","hideCommentLoadSpinner","moveCommentLoadSpinner","isInViewport","removeEventListener","loadCommentsForm","getCommentsTemplate","cxhr","XMLHttpRequest","open","onload","status","response","JSON","parse","responseText","data","content","send","preload","arguments","length","undefined","html","stringToHTML","comment","querySelector","parentNode","innerHTML","appendChild","str","support","DOMParser","parser","parseFromString","err","doc","body","firstChild","dom","createElement","newNode","referenceNode","nextSibling","element","bounding","getBoundingClientRect","top","left","bottom","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth"],"sourceRoot":""}