(window.webpackWcBlocksJsonp=window.webpackWcBlocksJsonp||[]).push([[15],{111:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return l}));var n=r(42);const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const l=e.filter(e=>e.attribute===r.taxonomy),c=l.length?l[0]:null;if(!(c&&c.slug&&Array.isArray(c.slug)&&c.slug.includes(a)))return;const o=c.slug.filter(e=>e!==a),i=e.filter(e=>e.attribute!==r.taxonomy);o.length>0&&(c.slug=o.sort(),i.push(c)),t(Object(n.a)(i).asc("attribute"))},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"in";if(!r||!r.taxonomy)return[];const c=e.filter(e=>e.attribute!==r.taxonomy);return 0===a.length?t(c):(c.push({attribute:r.taxonomy,operator:l,slug:a.map(e=>{let{slug:t}=e;return t}).sort()}),t(Object(n.a)(c).asc("attribute"))),c}},116:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c}));var n=r(2);r(139),r(5);const a=Object(n.getSetting)("attributes",[]).reduce((e,t)=>{const r=(n=t)&&n.attribute_name?{id:parseInt(n.attribute_id,10),name:n.attribute_name,taxonomy:"pa_"+n.attribute_name,label:n.attribute_label}:null;var n;return r&&r.id&&e.push(r),e},[]),l=e=>{if(e)return a.find(t=>t.id===e)},c=e=>{if(e)return a.find(t=>t.taxonomy===e)}},124:function(e){e.exports=JSON.parse('{"name":"woocommerce/attribute-filter","version":"1.0.0","title":"Filter by Attribute Controls","description":"Enable customers to filter the product grid by selecting one or more attributes, such as color.","category":"woocommerce","keywords":["WooCommerce"],"supports":{"html":false,"color":{"text":true,"background":false},"inserter":false,"lock":false},"attributes":{"className":{"type":"string","default":""},"attributeId":{"type":"number","default":0},"showCounts":{"type":"boolean","default":true},"queryType":{"type":"string","default":"or"},"headingLevel":{"type":"number","default":3},"displayStyle":{"type":"string","default":"list"},"showFilterButton":{"type":"boolean","default":false},"selectType":{"type":"string","default":"multiple"},"isPreview":{"type":"boolean","default":false}},"textdomain":"woo-gutenberg-products-block","apiVersion":2,"$schema":"https://schemas.wp.org/trunk/block.json"}')},131:function(e,t){},139:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return o}));var n=r(20);const a=e=>Object(n.b)(e,"count")&&Object(n.b)(e,"description")&&Object(n.b)(e,"id")&&Object(n.b)(e,"name")&&Object(n.b)(e,"parent")&&Object(n.b)(e,"slug")&&"number"==typeof e.count&&"string"==typeof e.description&&"number"==typeof e.id&&"string"==typeof e.name&&"number"==typeof e.parent&&"string"==typeof e.slug,l=e=>Array.isArray(e)&&e.every(a),c=e=>Object(n.b)(e,"attribute")&&Object(n.b)(e,"operator")&&Object(n.b)(e,"slug")&&"string"==typeof e.attribute&&"string"==typeof e.operator&&Array.isArray(e.slug)&&e.slug.every(e=>"string"==typeof e),o=e=>Array.isArray(e)&&e.every(c)},156:function(e,t,r){"use strict";var n=r(0),a=r(1),l=r(148),c=r(27),o=r(56),i=r(31),s=r(54),u=r(135),b=r(55),d=r(63),f=r(64),g=r(14),m=r.n(g),p=r(22),j=r(2),y=r(15),O=r(74),h=r(26),v=r(20),w=r(139),_=r(80),k=r(150),E=r(71),C=r(82),x=r(62),A=r(4),L=r.n(A),S=r(116),N=r(111);const F=[{value:"preview-1",formattedValue:"preview-1",name:"Blue",label:Object(n.createElement)(b.a,{name:"Blue",count:3}),textLabel:"Blue (3)"},{value:"preview-2",formattedValue:"preview-2",name:"Green",label:Object(n.createElement)(b.a,{name:"Green",count:3}),textLabel:"Green (3)"},{value:"preview-3",formattedValue:"preview-3",name:"Red",label:Object(n.createElement)(b.a,{name:"Red",count:2}),textLabel:"Red (2)"}],T={count:0,has_archives:!0,id:0,label:"Preview",name:"preview",order:"menu_order",parent:0,taxonomy:"preview",type:""};r(222);var I=r(52),q=r(81),B=e=>{let{isLoading:t=!1,options:r,checked:a,onChange:l}=e;return t?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{className:"is-loading"}),Object(n.createElement)("span",{className:"is-loading"})):Object(n.createElement)(q.a,{className:"wc-block-attribute-filter-list",options:r,checked:a,onChange:l,isLoading:t,isDisabled:t})},P=r(44);t.a=e=>{let{attributes:t,isEditor:r=!1,getNotice:g=(()=>null)}=e;const A=Object(j.getSettingWithCoercion)("has_filterable_products",!1,O.a),q=Object(j.getSettingWithCoercion)("is_rendering_php_template",!1,O.a),R=Object(j.getSettingWithCoercion)("page_url",window.location.href,h.a),V=r?[]:Object(j.getSettingWithCoercion)("product_ids",[],Array.isArray),[W,$]=Object(n.useState)(!1),Q=t.isPreview&&!t.attributeId?T:Object(S.a)(t.attributeId),D=Object(n.useMemo)(()=>Object(I.e)(Q),[Q]),[M,U]=Object(n.useState)(D),[G,J]=Object(n.useState)(Object(I.d)()),[z,Z]=Object(n.useState)(t.isPreview&&!t.attributeId?F:[]),H=Object(l.a)(t),[K]=Object(i.a)(),[X,Y]=Object(i.b)("attributes",[]),{results:ee,isLoading:te}=Object(s.a)({namespace:"/wc/store/v1",resourceName:"products/attributes/terms",resourceValues:[(null==Q?void 0:Q.id)||0],shouldSelect:t.attributeId>0}),{results:re,isLoading:ne}=Object(u.a)({queryAttribute:{taxonomy:(null==Q?void 0:Q.taxonomy)||"",queryType:t.queryType},queryState:{...K},productIds:V,isEditor:r}),ae=Object(n.useCallback)(e=>Object(v.b)(re,"attribute_counts")&&Array.isArray(re.attribute_counts)?re.attribute_counts.find(t=>{let{term:r}=t;return r===e}):null,[re]);Object(n.useEffect)(()=>{if(te||ne)return;if(!Array.isArray(ee))return;const e=ee.map(e=>{const r=ae(e.id);if(!(r||M.includes(e.slug)||(a=e.slug,null!=K&&K.attributes&&K.attributes.some(e=>{let{attribute:t,slug:r=[]}=e;return t===(null==Q?void 0:Q.taxonomy)&&r.includes(a)}))))return null;var a;const l=r?r.count:0;return{formattedValue:Object(I.c)(e.slug),value:e.slug,name:Object(p.decodeEntities)(e.name),label:Object(n.createElement)(b.a,{name:Object(p.decodeEntities)(e.name),count:t.showCounts?l:null}),textLabel:t.showCounts?`${Object(p.decodeEntities)(e.name)} (${l})`:Object(p.decodeEntities)(e.name)}}).filter(e=>!!e);Z(e),J(Object(I.d)())},[null==Q?void 0:Q.taxonomy,ee,te,t.showCounts,ne,ae,M,K.attributes]);const le=Object(n.useCallback)(e=>Array.isArray(ee)?ee.reduce((t,r)=>(e.includes(r.slug)&&t.push(r),t),[]):[],[ee]),ce=Object(n.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=e.map(e=>({...e,slug:e.slug.map(e=>decodeURIComponent(e))})),t){if(null==Q||!Q.taxonomy)return;const t=Object.keys(Object(y.getQueryArgs)(window.location.href)),r=Object(I.h)(Q.taxonomy),n=t.reduce((e,t)=>t.includes(E.b+r)||t.includes(E.a+r)?Object(y.removeQueryArgs)(e,t):e,window.location.href),a=Object(I.b)(n,e);Object(E.c)(a)}else{const t=Object(I.b)(R,e),r=Object(y.getQueryArgs)(window.location.href),n=Object(y.getQueryArgs)(t);Object(I.f)(r,n)||Object(E.c)(t)}}),[R,null==Q?void 0:Q.taxonomy]),oe=e=>{const r=Object(N.b)(X,Y,Q,le(e),"or"===t.queryType?"in":"and");ce(r,0===e.length)},ie=Object(n.useCallback)((function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r||(U(e),!n&&t.showFilterButton||Object(N.b)(X,Y,Q,le(e),"or"===t.queryType?"in":"and"))}),[r,U,X,Y,Q,le,t.queryType,t.showFilterButton]),se=Object(n.useMemo)(()=>Object(w.a)(X)?X.filter(e=>{let{attribute:t}=e;return t===(null==Q?void 0:Q.taxonomy)}).flatMap(e=>{let{slug:t}=e;return t}):[],[X,null==Q?void 0:Q.taxonomy]),ue=Object(c.a)(se),be=Object(o.a)(ue);Object(n.useEffect)(()=>{!be||m()(be,ue)||m()(M,ue)||ie(ue)},[M,ue,be,ie]);const de="single"!==t.selectType,fe=Object(n.useCallback)(e=>{const t=M.includes(e);let r;de?(r=M.filter(t=>t!==e),t||(r.push(e),r.sort())):r=t?[]:[e],ie(r)},[M,de,ie]);Object(n.useEffect)(()=>{Q&&!t.showFilterButton&&(Object(I.a)({currentCheckedFilters:M,hasSetFilterDefaultsFromUrl:W})?ce(X,!0):ce(X,!1))},[W,ce,X,Q,M,t.showFilterButton]),Object(n.useEffect)(()=>{if(!W&&!te)return D.length>0?($(!0),void ie(D,!0)):void(q||$(!0))},[Q,W,te,ie,D,q]);const ge=Object(P.b)();if(!A)return ge(!1),null;if(!Q)return r?g("noAttributes"):(ge(!1),null);if(0===z.length&&!te&&r)return g("noProducts");const me="h"+t.headingLevel,pe=!t.isPreview&&te,je=!t.isPreview&&ne,ye=(pe||je)&&0===z.length;if(!ye&&0===z.length)return ge(!1),null;const Oe=de?!ye&&M.length<z.length:!ye&&0===M.length,he=Object(n.createElement)(me,{className:"wc-block-attribute-filter__title"},t.heading),ve=ye?Object(n.createElement)(x.a,null,he):he;return ge(!0),Object(n.createElement)(n.Fragment,null,!r&&t.heading&&ve,Object(n.createElement)("div",{className:L()("wc-block-attribute-filter","style-"+t.displayStyle)},"dropdown"===t.displayStyle?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(C.a,{key:G,className:L()(H.className,{"single-selection":!de,"is-loading":ye}),style:{...H.style,borderStyle:"none"},suggestions:z.filter(e=>!M.includes(e.value)).map(e=>e.formattedValue),disabled:ye,placeholder:Object(a.sprintf)(
/* translators: %s attribute name. */
Object(a.__)("Select %s","woo-gutenberg-products-block"),Q.label),onChange:e=>{!de&&e.length>1&&(e=[e[e.length-1]]);const t=[e=e.map(e=>{const t=z.find(t=>t.formattedValue===e);return t?t.value:e}),M].reduce((e,t)=>e.filter(e=>!t.includes(e)));if(1===t.length)return fe(t[0]);const r=[M,e].reduce((e,t)=>e.filter(e=>!t.includes(e)));1===r.length&&fe(r[0])},value:M,displayTransform:e=>{const t=z.find(t=>[t.value,t.formattedValue].includes(e));return t?t.textLabel:e},saveTransform:I.c,messages:{added:Object(a.sprintf)(
/* translators: %s is the attribute label. */
Object(a.__)("%s filter added.","woo-gutenberg-products-block"),Q.label),removed:Object(a.sprintf)(
/* translators: %s is the attribute label. */
Object(a.__)("%s filter removed.","woo-gutenberg-products-block"),Q.label),remove:Object(a.sprintf)(
/* translators: %s is the attribute label. */
Object(a.__)("Remove %s filter.","woo-gutenberg-products-block"),Q.label.toLocaleLowerCase()),__experimentalInvalid:Object(a.sprintf)(
/* translators: %s is the attribute label. */
Object(a.__)("Invalid %s filter.","woo-gutenberg-products-block"),Q.label.toLocaleLowerCase())}}),Oe&&Object(n.createElement)(_.a,{icon:k.a,size:30})):Object(n.createElement)(B,{options:z,checked:M,onChange:fe,isLoading:ye,isDisabled:ye})),Object(n.createElement)("div",{className:"wc-block-attribute-filter__actions"},(M.length>0||r)&&!ye&&Object(n.createElement)(d.a,{onClick:()=>{U([]),J(Object(I.d)()),W&&oe([])},screenReaderLabel:Object(a.__)("Reset attribute filter","woo-gutenberg-products-block")}),t.showFilterButton&&Object(n.createElement)(f.a,{className:"wc-block-attribute-filter__button",isLoading:ye,disabled:(()=>{if(pe||je)return!0;const e=Object(I.e)(Q);return e.length===M.length&&M.every(t=>e.includes(t))})(),onClick:()=>oe(M)})))}},222:function(e,t){},281:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(57),a=r(20),l=r(114);const c=e=>{const t=Object(a.a)(e)?e:{},r=Object(l.a)(t.style);return Object(n.__experimentalUseColorProps)({...t,style:r})}},488:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(281),l=r(26),c=r(156),o=r(52);t.default=e=>{const t=Object(a.a)(e);return Object(n.createElement)("div",{className:Object(l.a)(e.className)?e.className:"",style:{...t.style}},Object(n.createElement)(c.a,{isEditor:!1,attributes:Object(o.g)(e)}))}},52:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"h",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return u})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return d})),r.d(t,"c",(function(){return f})),r.d(t,"g",(function(){return g}));var n=r(15),a=r(71),l=r(26),c=r(124);function o(){return Math.floor(Math.random()*Date.now())}const i=e=>e.replace("pa_",""),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r={};t.forEach(e=>{const{attribute:t,slug:n,operator:l}=e,c=i(t),o=n.join(","),s=`${a.b}${c}`,u="in"===l?"or":"and";r[`${a.a}${c}`]=o,r[s]=u});const l=Object(n.removeQueryArgs)(e,...Object.keys(r));return Object(n.addQueryArgs)(l,r)},u=e=>{let{currentCheckedFilters:t,hasSetFilterDefaultsFromUrl:r}=e;return r&&0===t.length},b=e=>{if(e){const t=Object(a.d)("filter_"+e.name);return("string"==typeof t?t.split(","):[]).map(e=>encodeURIComponent(e).toLowerCase())}return[]},d=(e,t)=>{const r=Object.entries(t).reduce((e,t)=>{let[r,n]=t;return r.includes("query_type")?e:{...e,[r]:n}},{});return Object.entries(r).reduce((t,r)=>{let[n,a]=r;return e[n]===a&&t},!0)},f=e=>e.trim().replace(/\s/g,"-").replace(/_/g,"-").replace(/-+/g,"-").replace(/[^a-zA-Z0-9-]/g,""),g=e=>({className:Object(l.a)(null==e?void 0:e.className)?e.className:"",attributeId:parseInt(Object(l.a)(null==e?void 0:e.attributeId)?e.attributeId:"0",10),showCounts:"false"!==(null==e?void 0:e.showCounts),queryType:Object(l.a)(null==e?void 0:e.queryType)&&e.queryType||c.attributes.queryType.default,heading:Object(l.a)(null==e?void 0:e.heading)?e.heading:"",headingLevel:Object(l.a)(null==e?void 0:e.headingLevel)&&parseInt(e.headingLevel,10)||c.attributes.headingLevel.default,displayStyle:Object(l.a)(null==e?void 0:e.displayStyle)&&e.displayStyle||c.attributes.displayStyle.default,showFilterButton:"true"===(null==e?void 0:e.showFilterButton),selectType:Object(l.a)(null==e?void 0:e.selectType)&&e.selectType||c.attributes.selectType.default,isPreview:!1})},55:function(e,t,r){"use strict";var n=r(0),a=r(1),l=r(21);r(131),t.a=e=>{let{name:t,count:r}=e;return Object(n.createElement)(n.Fragment,null,t,null!==r&&Number.isFinite(r)&&Object(n.createElement)(l.a,{label:r.toString(),screenReaderLabel:Object(a.sprintf)(
/* translators: %s number of products. */
Object(a._n)("%s product","%s products",r,"woo-gutenberg-products-block"),r),wrapperElement:"span",wrapperProps:{className:"wc-filter-element-label-list-count"}}))}},62:function(e,t,r){"use strict";var n=r(0);r(87),t.a=e=>{let{children:t}=e;return Object(n.createElement)("div",{className:"wc-block-filter-title-placeholder"},t)}},87:function(e,t){}}]);