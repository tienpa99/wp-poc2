(window.webpackWcBlocksJsonp=window.webpackWcBlocksJsonp||[]).push([[72],{105:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>null==e||"object"==typeof e&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length},113:function(e,t,n){"use strict";var r=n(13),c=n.n(r),i=n(0),a=n(147),o=n(4),l=n.n(o);n(217);const u=e=>({thousandSeparator:null==e?void 0:e.thousandSeparator,decimalSeparator:null==e?void 0:e.decimalSeparator,fixedDecimalScale:!0,prefix:null==e?void 0:e.prefix,suffix:null==e?void 0:e.suffix,isNumericString:!0});t.a=e=>{var t;let{className:n,value:r,currency:o,onValueChange:s,displayType:b="text",...m}=e;const p="string"==typeof r?parseInt(r,10):r;if(!Number.isFinite(p))return null;const d=p/10**o.minorUnit;if(!Number.isFinite(d))return null;const f=l()("wc-block-formatted-money-amount","wc-block-components-formatted-money-amount",n),O=null!==(t=m.decimalScale)&&void 0!==t?t:null==o?void 0:o.minorUnit,j={...m,...u(o),decimalScale:O,value:void 0,currency:void 0,onValueChange:void 0},g=s?e=>{const t=+e.value*10**o.minorUnit;s(t)}:()=>{};return Object(i.createElement)(a.a,c()({className:f,displayType:b},j,{value:d,onValueChange:g}))}},114:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(26),c=n(20);const i=e=>Object(r.a)(e)?JSON.parse(e)||{}:Object(c.a)(e)?e:{}},135:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(0),c=n(83),i=n(20),a=n(105),o=n(42),l=n(27),u=n(31),s=n(54),b=n(25);const m=e=>{let{queryAttribute:t,queryPrices:n,queryStock:m,queryRating:p,queryState:d,productIds:f,isEditor:O=!1}=e,j=Object(b.a)();j+="-collection-data";const[g]=Object(u.a)(j),[_,w]=Object(u.b)("calculate_attribute_counts",[],j),[v,h]=Object(u.b)("calculate_price_range",null,j),[y,k]=Object(u.b)("calculate_stock_status_counts",null,j),[x,N]=Object(u.b)("calculate_rating_counts",null,j),E=Object(l.a)(t||{}),F=Object(l.a)(n),C=Object(l.a)(m),S=Object(l.a)(p);Object(r.useEffect)(()=>{"object"==typeof E&&Object.keys(E).length&&(_.find(e=>Object(i.b)(E,"taxonomy")&&e.taxonomy===E.taxonomy)||w([..._,E]))},[E,_,w]),Object(r.useEffect)(()=>{v!==F&&void 0!==F&&h(F)},[F,h,v]),Object(r.useEffect)(()=>{y!==C&&void 0!==C&&k(C)},[C,k,y]),Object(r.useEffect)(()=>{x!==S&&void 0!==S&&N(S)},[S,N,x]);const[U,R]=Object(r.useState)(O),[I]=Object(c.a)(U,200);U||R(!0);const L=Object(r.useMemo)(()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=Object(o.a)(e.calculate_attribute_counts.map(e=>{let{taxonomy:t,queryType:n}=e;return{taxonomy:t,query_type:n}})).asc(["taxonomy","query_type"])),t})(g),[g]);return Object(s.a)({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...d,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...!Object(a.a)(f)&&{include:f},...L},shouldSelect:I})}},152:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(26),c=n(153);const i=e=>({heading:Object(r.a)(null==e?void 0:e.heading)?e.heading:"",headingLevel:Object(r.a)(null==e?void 0:e.headingLevel)&&parseInt(e.headingLevel,10)||c.attributes.headingLevel.default,showFilterButton:"true"===(null==e?void 0:e.showFilterButton),showInputFields:"false"!==(null==e?void 0:e.showInputFields),inlineInput:"true"===(null==e?void 0:e.inlineInput)})},153:function(e){e.exports=JSON.parse('{"name":"woocommerce/price-filter","version":"1.0.0","title":"Filter by Price Controls","description":"Enable customers to filter the product grid by choosing a price range.","category":"woocommerce","keywords":["WooCommerce"],"supports":{"html":false,"multiple":false,"color":{"text":true,"background":false},"inserter":false,"lock":false},"attributes":{"className":{"type":"string","default":""},"showInputFields":{"type":"boolean","default":true},"inlineInput":{"type":"boolean","default":false},"showFilterButton":{"type":"boolean","default":false},"headingLevel":{"type":"number","default":3}},"textdomain":"woo-gutenberg-products-block","apiVersion":2,"$schema":"https://schemas.wp.org/trunk/block.json"}')},155:function(e,t,n){"use strict";var r=n(0),c=n(56),i=n(31),a=n(135),o=n(13),l=n.n(o),u=n(1),s=n(4),b=n.n(s),m=n(113),p=n(20),d=n(53);n(226);const f=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],[i,a]=e;const o=e=>Number.isFinite(e);return o(i)||(i=t||0),o(a)||(a=n||r),o(t)&&t>i&&(i=t),o(n)&&n<=i&&(i=n-r),o(t)&&t>=a&&(a=t+r),o(n)&&n<a&&(a=n),!c&&i>=a&&(i=a-r),c&&a<=i&&(a=i+r),[i,a]};var O=n(64);const j=e=>{let{maxConstraint:t,minorUnit:n}=e;return e=>{let{floatValue:r}=e;return void 0!==r&&r<=t/10**n&&r>0}},g=e=>{let{minConstraint:t,currentMaxValue:n,minorUnit:r}=e;return e=>{let{floatValue:c}=e;return void 0!==c&&c>=t/10**r&&c<n/10**r}};var _=n(63),w=e=>{let{minPrice:t,maxPrice:n,minConstraint:c,maxConstraint:i,onChange:a,step:o,currency:s,showInputFields:w=!0,showFilterButton:v=!1,inlineInput:h=!0,isLoading:y=!1,isUpdating:k=!1,isEditor:x=!1,onSubmit:N=(()=>{})}=e;const E=Object(r.useRef)(null),F=Object(r.useRef)(null),C=o||10**s.minorUnit,[S,U]=Object(r.useState)(t),[R,I]=Object(r.useState)(n),L=Object(r.useRef)(null),[M,P]=Object(r.useState)(0);Object(r.useEffect)(()=>{U(t)},[t]),Object(r.useEffect)(()=>{I(n)},[n]),Object(r.useLayoutEffect)(()=>{var e;h&&L.current&&P(null===(e=L.current)||void 0===e?void 0:e.offsetWidth)},[h,P]);const A=Object(r.useMemo)(()=>isFinite(c)&&isFinite(i),[c,i]),B=Object(r.useMemo)(()=>isFinite(t)&&isFinite(n)&&A?{"--low":(t-c)/(i-c)*100+"%","--high":(n-c)/(i-c)*100+"%"}:{"--low":"0%","--high":"100%"},[t,n,c,i,A]),q=Object(r.useCallback)(e=>{if(y||!A||!E.current||!F.current)return;const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=E.current.offsetWidth,c=+E.current.value,a=F.current.offsetWidth,o=+F.current.value,l=r*(c/i),u=a*(o/i);Math.abs(n-l)>Math.abs(n-u)?(E.current.style.zIndex="20",F.current.style.zIndex="21"):(E.current.style.zIndex="21",F.current.style.zIndex="20")},[y,i,A]),W=Object(r.useCallback)(e=>{const r=e.target.classList.contains("wc-block-price-filter__range-input--min"),o=+e.target.value,l=r?[Math.round(o/C)*C,n]:[t,Math.round(o/C)*C],u=f(l,c,i,C,r);a(u)},[a,t,n,c,i,C]),D=Object(r.useCallback)(e=>{if(e.relatedTarget&&e.relatedTarget.classList&&e.relatedTarget.classList.contains("wc-block-price-filter__amount"))return;const t=e.target.classList.contains("wc-block-price-filter__amount--min");if(S>=R){const e=f([0,R],null,null,C,t);return a([parseInt(e[0],10),parseInt(e[1],10)])}const n=f([S,R],null,null,C,t);a(n)},[a,C,S,R]),T=Object(d.a)(N,600),V=b()("wc-block-price-filter","wc-block-components-price-slider",w&&"wc-block-price-filter--has-input-fields",w&&"wc-block-components-price-slider--has-input-fields",v&&"wc-block-price-filter--has-filter-button",v&&"wc-block-components-price-slider--has-filter-button",!A&&"is-disabled",(h||M<=300)&&"wc-block-components-price-slider--is-input-inline"),z=Object(p.a)(E.current)?E.current.ownerDocument.activeElement:void 0,J=z&&z===E.current?C:1,$=z&&z===F.current?C:1,Q=String(S/10**s.minorUnit),X=String(R/10**s.minorUnit),G=h&&M>300,H=Object(r.createElement)("div",{className:b()("wc-block-price-filter__range-input-wrapper","wc-block-components-price-slider__range-input-wrapper",{"is-loading":y&&k}),onMouseMove:q,onFocus:q},A&&Object(r.createElement)("div",{"aria-hidden":w},Object(r.createElement)("div",{className:"wc-block-price-filter__range-input-progress wc-block-components-price-slider__range-input-progress",style:B}),Object(r.createElement)("input",{type:"range",className:"wc-block-price-filter__range-input wc-block-price-filter__range-input--min wc-block-components-price-slider__range-input wc-block-components-price-slider__range-input--min","aria-label":Object(u.__)("Filter products by minimum price","woo-gutenberg-products-block"),"aria-valuetext":Q,value:Number.isFinite(t)?t:c,onChange:W,step:J,min:c,max:i,ref:E,disabled:y&&!A,tabIndex:w?-1:0}),Object(r.createElement)("input",{type:"range",className:"wc-block-price-filter__range-input wc-block-price-filter__range-input--max wc-block-components-price-slider__range-input wc-block-components-price-slider__range-input--max","aria-label":Object(u.__)("Filter products by maximum price","woo-gutenberg-products-block"),"aria-valuetext":X,value:Number.isFinite(n)?n:i,onChange:W,step:$,min:c,max:i,ref:F,disabled:y,tabIndex:w?-1:0}))),K=e=>`wc-block-price-filter__amount wc-block-price-filter__amount--${e} wc-block-form-text-input wc-block-components-price-slider__amount wc-block-components-price-slider__amount--${e}`,Y={currency:s,decimalScale:0},Z={...Y,displayType:"input",allowNegative:!1,disabled:y||!A,onBlur:D};return Object(r.createElement)("div",{className:V,ref:L},(!G||!w)&&H,w&&Object(r.createElement)("div",{className:"wc-block-price-filter__controls wc-block-components-price-slider__controls"},k?Object(r.createElement)("div",{className:"input-loading"}):Object(r.createElement)(m.a,l()({},Z,{className:K("min"),"aria-label":Object(u.__)("Filter products by minimum price","woo-gutenberg-products-block"),isAllowed:g({minConstraint:c,minorUnit:s.minorUnit,currentMaxValue:R}),onValueChange:e=>{e!==S&&U(e)},value:S})),G&&H,k?Object(r.createElement)("div",{className:"input-loading"}):Object(r.createElement)(m.a,l()({},Z,{className:K("max"),"aria-label":Object(u.__)("Filter products by maximum price","woo-gutenberg-products-block"),isAllowed:j({maxConstraint:i,minorUnit:s.minorUnit}),onValueChange:e=>{e!==R&&I(e)},value:R}))),!w&&!k&&Number.isFinite(t)&&Number.isFinite(n)&&Object(r.createElement)("div",{className:"wc-block-price-filter__range-text wc-block-components-price-slider__range-text"},Object(r.createElement)(m.a,l()({},Y,{value:t})),Object(r.createElement)(m.a,l()({},Y,{value:n}))),Object(r.createElement)("div",{className:"wc-block-components-price-slider__actions"},(x||!k&&(t!==c||n!==i))&&Object(r.createElement)(_.a,{onClick:()=>{a([c,i]),T()},screenReaderLabel:Object(u.__)("Reset price filter","woo-gutenberg-products-block")}),v&&Object(r.createElement)(O.a,{className:"wc-block-price-filter__button wc-block-components-price-slider__button",isLoading:k,disabled:y||!A,onClick:N,screenReaderLabel:Object(u.__)("Apply price filter","woo-gutenberg-products-block")})))},v=n(62),h=n(41),y=n(2),k=n(15),x=n(71),N=n(74),E=n(26);const F=(e,t,n)=>{const r=10*10**t;let i=null;const a=parseFloat(e);isNaN(a)||("ROUND_UP"===n?i=Math.ceil(a/r)*r:"ROUND_DOWN"===n&&(i=Math.floor(a/r)*r));const o=Object(c.a)(i,Number.isFinite);return Number.isFinite(i)?i:o};n(225);var C=n(44);function S(e,t){return Number(e)*10**t}t.a=e=>{let{attributes:t,isEditor:n=!1}=e;const o=Object(C.b)(),l=Object(y.getSettingWithCoercion)("has_filterable_products",!1,N.a),u=Object(y.getSettingWithCoercion)("is_rendering_php_template",!1,N.a),s=n?[]:Object(y.getSettingWithCoercion)("product_ids",[],Array.isArray),[b,m]=Object(r.useState)(!1),f=Object(x.d)("min_price"),O=Object(x.d)("max_price"),[j]=Object(i.a)(),{results:g,isLoading:_}=Object(a.a)({queryPrices:!0,queryState:j,productIds:s,isEditor:n}),U=Object(h.getCurrencyFromPriceResponse)(Object(p.b)(g,"price_range")?g.price_range:void 0),[R,I]=Object(i.b)("min_price"),[L,M]=Object(i.b)("max_price"),[P,A]=Object(r.useState)(S(f,U.minorUnit)||null),[B,q]=Object(r.useState)(S(O,U.minorUnit)||null),{minConstraint:W,maxConstraint:D}=(e=>{let{minPrice:t,maxPrice:n,minorUnit:r}=e;return{minConstraint:F(t||"",r,"ROUND_DOWN"),maxConstraint:F(n||"",r,"ROUND_UP")}})({minPrice:Object(p.b)(g,"price_range")&&Object(p.b)(g.price_range,"min_price")&&Object(E.a)(g.price_range.min_price)?g.price_range.min_price:void 0,maxPrice:Object(p.b)(g,"price_range")&&Object(p.b)(g.price_range,"max_price")&&Object(E.a)(g.price_range.max_price)?g.price_range.max_price:void 0,minorUnit:U.minorUnit});Object(r.useEffect)(()=>{b||(I(S(f,U.minorUnit)),M(S(O,U.minorUnit)),m(!0))},[U.minorUnit,b,O,f,M,I]);const[T,V]=Object(r.useState)(_),z=Object(r.useCallback)((e,t)=>{const n=t>=Number(D)?void 0:t,r=e<=Number(W)?void 0:e;if(window){const e=function(e,t){const n={};for(const[e,r]of Object.entries(t))r?n[e]=r.toString():delete n[e];const r=Object(k.removeQueryArgs)(e,...Object.keys(t));return Object(k.addQueryArgs)(r,n)}(window.location.href,{min_price:r/10**U.minorUnit,max_price:n/10**U.minorUnit});window.location.href!==e&&Object(x.c)(e)}I(r),M(n)},[W,D,I,M,U.minorUnit]),J=Object(d.a)(z,500),$=Object(r.useCallback)(e=>{V(!0),e[0]!==P&&A(e[0]),e[1]!==B&&q(e[1]),u&&b&&!t.showFilterButton&&J(e[0],e[1])},[P,B,A,q,u,b,J,t.showFilterButton]);Object(r.useEffect)(()=>{t.showFilterButton||u||J(P,B)},[P,B,t.showFilterButton,J,u]);const Q=Object(c.a)(R),X=Object(c.a)(L),G=Object(c.a)(W),H=Object(c.a)(D);if(Object(r.useEffect)(()=>{(!Number.isFinite(P)||R!==Q&&R!==P||W!==G&&W!==P)&&A(Number.isFinite(R)?R:W),(!Number.isFinite(B)||L!==X&&L!==B||D!==H&&D!==B)&&q(Number.isFinite(L)?L:D)},[P,B,R,L,W,D,G,H,Q,X]),!l)return o(!1),null;if(!_&&(null===W||null===D||W===D))return o(!1),null;const K="h"+t.headingLevel;o(!0),!_&&T&&V(!1);const Y=Object(r.createElement)(K,{className:"wc-block-price-filter__title"},t.heading),Z=_&&T?Object(r.createElement)(v.a,null,Y):Y;return Object(r.createElement)(r.Fragment,null,!n&&t.heading&&Z,Object(r.createElement)("div",{className:"wc-block-price-slider"},Object(r.createElement)(w,{minConstraint:W,maxConstraint:D,minPrice:P,maxPrice:B,currency:U,showInputFields:t.showInputFields,inlineInput:t.inlineInput,showFilterButton:t.showFilterButton,onChange:$,onSubmit:()=>z(P,B),isLoading:_,isUpdating:T,isEditor:n})))}},217:function(e,t){},225:function(e,t){},226:function(e,t){},281:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(57),c=n(20),i=n(114);const a=e=>{const t=Object(c.a)(e)?e:{},n=Object(i.a)(t.style);return Object(r.__experimentalUseColorProps)({...t,style:n})}},486:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(281),i=n(26),a=n(155),o=n(152);t.default=e=>{const t=Object(c.a)(e);return Object(r.createElement)("div",{className:Object(i.a)(e.className)?e.className:"",style:{...t.style}},Object(r.createElement)(a.a,{isEditor:!1,attributes:Object(o.a)(e)}))}},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(8);function c(e,t,n){var c=this,i=Object(r.useRef)(null),a=Object(r.useRef)(0),o=Object(r.useRef)(null),l=Object(r.useRef)([]),u=Object(r.useRef)(),s=Object(r.useRef)(),b=Object(r.useRef)(e),m=Object(r.useRef)(!0);b.current=e;var p=!t&&0!==t&&"undefined"!=typeof window;if("function"!=typeof e)throw new TypeError("Expected a function");t=+t||0;var d=!!(n=n||{}).leading,f=!("trailing"in n)||!!n.trailing,O="maxWait"in n,j=O?Math.max(+n.maxWait||0,t):null;return Object(r.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]),Object(r.useMemo)((function(){var e=function(e){var t=l.current,n=u.current;return l.current=u.current=null,a.current=e,s.current=b.current.apply(n,t)},n=function(e,t){p&&cancelAnimationFrame(o.current),o.current=p?requestAnimationFrame(e):setTimeout(e,t)},r=function(e){if(!m.current)return!1;var n=e-i.current,r=e-a.current;return!i.current||n>=t||n<0||O&&r>=j},g=function(t){return o.current=null,f&&l.current?e(t):(l.current=u.current=null,s.current)},_=function(){var e=Date.now();if(r(e))return g(e);if(m.current){var c=e-i.current,o=e-a.current,l=t-c,u=O?Math.min(l,j-o):l;n(_,u)}},w=function(){for(var b=[],p=0;p<arguments.length;p++)b[p]=arguments[p];var f=Date.now(),j=r(f);if(l.current=b,u.current=c,i.current=f,j){if(!o.current&&m.current)return a.current=i.current,n(_,t),d?e(i.current):s.current;if(O)return n(_,t),e(i.current)}return o.current||n(_,t),s.current};return w.cancel=function(){o.current&&(p?cancelAnimationFrame(o.current):clearTimeout(o.current)),a.current=0,l.current=i.current=u.current=o.current=null},w.isPending=function(){return!!o.current},w.flush=function(){return o.current?g(Date.now()):s.current},w}),[d,O,t,j,f,p])}},62:function(e,t,n){"use strict";var r=n(0);n(87),t.a=e=>{let{children:t}=e;return Object(r.createElement)("div",{className:"wc-block-filter-title-placeholder"},t)}},63:function(e,t,n){"use strict";var r=n(0),c=n(1),i=n(4),a=n.n(i),o=n(21);n(91),t.a=e=>{let{className:t,label:
/* translators: Reset button text for filters. */
n=Object(c.__)("Reset","woo-gutenberg-products-block"),onClick:i,screenReaderLabel:l=Object(c.__)("Reset filter","woo-gutenberg-products-block")}=e;return Object(r.createElement)("button",{className:a()("wc-block-components-filter-reset-button",t),onClick:i},Object(r.createElement)(o.a,{label:n,screenReaderLabel:l}))}},64:function(e,t,n){"use strict";var r=n(0),c=n(1),i=n(4),a=n.n(i),o=n(21);n(92),t.a=e=>{let{className:t,isLoading:n,disabled:i,label:
/* translators: Submit button text for filters. */
l=Object(c.__)("Apply","woo-gutenberg-products-block"),onClick:u,screenReaderLabel:s=Object(c.__)("Apply filter","woo-gutenberg-products-block")}=e;return Object(r.createElement)("button",{type:"submit",className:a()("wp-block-button__link","wc-block-filter-submit-button","wc-block-components-filter-submit-button",{"is-loading":n},t),disabled:i,onClick:u},Object(r.createElement)(o.a,{label:l,screenReaderLabel:s}))}},83:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),c=n(53);function i(e,t){return e===t}function a(e){return"function"==typeof e?function(){return e}:e}function o(e,t,n){var o=n&&n.equalityFn||i,l=function(e){var t=Object(r.useState)(a(e)),n=t[0],c=t[1];return[n,Object(r.useCallback)((function(e){return c(a(e))}),[])]}(e),u=l[0],s=l[1],b=Object(c.a)(Object(r.useCallback)((function(e){return s(e)}),[s]),t,n),m=Object(r.useRef)(e);return o(m.current,e)||(b(e),m.current=e),[u,b]}},87:function(e,t){},91:function(e,t){},92:function(e,t){}}]);