!function(){var e={482:function(e,t){var r;!function(){"use strict";var n=function(){function e(){}function t(e,t){for(var r=t.length,n=0;n<r;++n)o(e,t[n])}e.prototype=Object.create(null);var r={}.hasOwnProperty,n=/\s+/;function o(e,o){if(o){var l=typeof o;"string"===l?function(e,t){for(var r=t.split(n),o=r.length,l=0;l<o;++l)e[r[l]]=!0}(e,o):Array.isArray(o)?t(e,o):"object"===l?function(e,t){if(t.toString===Object.prototype.toString||t.toString.toString().includes("[native code]"))for(var n in t)r.call(t,n)&&(e[n]=!!t[n]);else e[t.toString()]=!0}(e,o):"number"===l&&function(e,t){e[t]=!0}(e,o)}}return function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];var l=new e;t(l,n);var a=[];for(var s in l)l[s]&&a.push(s);return a.join(" ")}}();e.exports?(n.default=n,e.exports=n):void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)}()},875:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var l=typeof r;if("string"===l||"number"===l)e.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&e.push(a)}}else if("object"===l){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},202:function(e){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,l;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(o of t.entries())if(!r.has(o[0]))return!1;for(o of t.entries())if(!e(o[1],r.get(o[0])))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(o of t.entries())if(!r.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(t[o]!==r[o])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(l=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,l[o]))return!1;for(o=n;0!=o--;){var a=l[o];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r}},49:function(e,t,r){"use strict";var n=r(257);function o(){}function l(){}l.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,l,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:o};return r.PropTypes=r,r}},507:function(e,t,r){e.exports=r(49)()},257:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,r),l.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};r.r(e),r.d(e,{addPollClientId:function(){return h},removePollClientId:function(){return _},setIsFetchingPollData:function(){return b},setPollApiDataForClientId:function(){return v},setTryFetchPollData:function(){return w}});var t={};r.r(t),r.d(t,{loadAccountInfo:function(){return C},updateAccountInfo:function(){return E}});var n=window.wp.blocks,o=window.wp.hooks,l=window.wp.element,a=window.wp.i18n,s=()=>(0,l.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 6L5.5 18C5.5 18.2761 5.72386 18.5 6 18.5L18 18.5C18.2761 18.5 18.5 18.2761 18.5 18L18.5 6C18.5 5.72386 18.2761 5.5 18 5.5L6 5.5C5.72386 5.5 5.5 5.72386 5.5 6ZM4 18L4 6C4 4.89543 4.89543 4 6 4L18 4C19.1046 4 20 4.89543 20 6L20 18C20 19.1046 19.1046 20 18 20L6 20C4.89543 20 4 19.1046 4 18Z"}),(0,l.createElement)("rect",{x:"15",y:"17",width:"6",height:"1.5",transform:"rotate(-90 15 17)"}),(0,l.createElement)("rect",{x:"11.5",y:"17",width:"9",height:"1.5",transform:"rotate(-90 11.5 17)"}),(0,l.createElement)("rect",{x:"8",y:"17",width:"5",height:"1.5",transform:"rotate(-90 8 17)"})),i=window.wp.data;const c="ACCOUNT_INFO_LOAD",u="ACCOUNT_INFO_UPDATE",d="SET_TRY_FETCH",m="IS_FETCHING",f="SET_POLL",p="ADD_POLL_CLIENT_ID",g="REMOVE_POLL_CLIENT_ID";function w(e){return{type:d,tryFetch:e}}function b(e){return{type:m,isFetching:e}}function v(e,t){return{type:f,clientId:e,pollData:t}}function h(e){return{type:p,clientId:e}}function _(e){return{type:g,clientId:e}}function C(){return{type:c}}function E(e){return{type:u,data:e}}var y=window.lodash;const k={is_verified:!0,capabilities:["hide-branding"],signal_count:{count:0,userLimit:2500,shouldDisplay:!1}};var S=(0,i.combineReducers)({accountInfo:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;return t.type===u?{...e,...t.data}:e}}),L=(0,i.combineReducers)({tryFetch:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===d?!!t.tryFetch:e},isFetching:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===m?!!t.isFetching:e},pollsByClientId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===f?{...e,[t.clientId]:t.pollData}:e},pollClientIds:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===p?[...e,t.clientId]:t.type===g?[...(0,y.filter)(e,(e=>e!==t.clientId))]:e},account:S}),x=window.wp.apiFetch,T=r.n(x);class I extends Error{}class O extends I{constructor(){super((0,a.__)("Server error. Please try again.","crowdsignal-forms"))}}const N="crowdsignal-forms/editor",A={reducer:L,actions:{...e,...t},selectors:{shouldTryFetchingPollData(e){return!!e?.tryFetch},getPollDataByClientId(e,t){return e.pollsByClientId[t]||null},getPollClientIds(e){return e.pollClientIds},isFetchingPollData(e){return!!e?.isFetching},getAccountInfo(e){return e.account.accountInfo}},controls:{ACCOUNT_INFO_LOAD(){return T()({path:"/crowdsignal-forms/v1/account/info",method:"GET"})}},resolvers:{*getAccountInfo(){return E(yield C())}}},R=(0,i.createReduxStore)(N,A);function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P.apply(this,arguments)}(0,i.register)(R);var D=window.React,B=r.n(D),F=window.wp.blockEditor,M=window.wp.components,H=window.wp.compose,V=r(875),U=r.n(V),j=e=>{let{hasVoted:t,isPollClosed:r,isPollHidden:n,showSubmitMessage:o}=e;const s=U()({"is-transparent":o},"crowdsignal-forms-poll__closed-banner");return(0,l.createElement)("div",{className:s},n&&(0,a.__)("This Poll is Hidden","crowdsignal-forms"),r&&!n&&(0,a.__)("This Poll is Closed","crowdsignal-forms"),t&&(0,a.__)("Thanks For Voting!","crowdsignal-forms"))},W=r(507),z=r.n(W);function q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var $=function e(t,r){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=q({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var a in o)o[a]&&(l+="; "+a,!0!==o[a]&&(l+="="+o[a].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+l}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var l=r[o].split("="),a=l.slice(1).join("=");try{var s=decodeURIComponent(l[0]);if(n[s]=t.read(a,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",q({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,q({},this.attributes,t))},withConverter:function(t){return e(q({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const K=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{data:r,error:n,loading:o}=((r,n)=>{const[o,l]=(0,D.useState)(null),[a,s]=(0,D.useState)(null),[i,c]=(0,D.useState)(!0);return(0,D.useEffect)((()=>{c(!0),s(null),l(null),async function(e){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?null:window.fetch(`https://api.crowdsignal.com/v3/polls/${e}/results`,{method:"GET",headers:{"content-type":"application/json"}}).then((e=>{if(e.status>=200&&e.status<300)return e.json();throw e})).then((e=>{if(404===e.status)return{};if(e.error)throw new Error(e.message);return e.results.votes_by_answer}))}(e,t).then(l).catch(s).finally((()=>c(!1)))}),n),{data:o,error:a,loading:i}})(0,[e]);return{error:n,loading:o,results:r}};var Z=window.wp.htmlEntities;const G=e=>{let{error:t,loading:r,text:n,totalVotes:o,votes:s}=e;const i=U()("crowdsignal-forms-poll__answer-results",{"is-error":t,"is-loading":r}),c=!r&&!t,u=0===o?0:100*s/o,d={width:`${parseInt(u,10)}%`};return(0,l.createElement)("div",{className:i},(0,l.createElement)("div",{className:"crowdsignal-forms-poll__answer-results-labels"},(0,l.createElement)("span",{className:"crowdsignal-forms-poll__answer-results-answer"},(0,Z.decodeEntities)(n)),(0,l.createElement)("span",{className:"crowdsignal-forms-poll__answer-results-votes"},c&&(0,a.sprintf)(/* translators: %s: Number of votes. */
(0,a._n)("%s vote","%s votes",s,"crowdsignal-forms"),s.toLocaleString())),(0,l.createElement)("span",{className:"crowdsignal-forms-poll__answer-results-percent"},c&&`${u.toFixed(2)}%`)),(0,l.createElement)("div",{className:"crowdsignal-forms-poll__answer-results-progress-track"},(0,l.createElement)("div",{className:"crowdsignal-forms-poll__answer-results-progress-bar",style:d})))};G.propTypes={loading:z().bool,text:z().string.isRequired,totalVotes:z().number,votes:z().number};var Q=G,Y=e=>{let{showLogo:t,children:r,message:n,trackRef:o="cs-forms-poll"}=e;return(0,l.createElement)("div",{className:"crowdsignal-forms__footer-branding"},(0,l.createElement)("a",{className:"crowdsignal-forms__footer-cs-link",href:"https://crowdsignal.com?ref="+o,target:"_blank",rel:"noopener noreferrer"},n||(0,a.__)("Create your own poll with Crowdsignal","crowdsignal-forms")),r,t&&(0,l.createElement)("a",{href:"https://crowdsignal.com?ref="+o,target:"_blank",rel:"noopener noreferrer"},(0,l.createElement)("img",{className:"crowdsignal-forms__footer-branding-logo",src:"https://app.crowdsignal.com/images/svg/cs-logo-dots.svg",alt:"Crowdsignal sticker"})))};const X=Object.freeze({THANK_YOU:"thank-you",CUSTOM_TEXT:"custom-text",REDIRECT:"redirect",RESULTS:"results"}),J=Object.freeze({THEME_DEFAULT:"theme-default",GEORGIA:"georgia",PALATINO:"palatino",TIMES_NEW_ROMAN:"times-new-roman",ARIAL:"arial",IMPACT:"impact",LUCIDA:"lucida",TAHOMA:"tahoma",TREBUCHET:"trebuchet",VERDANA:"verdana",COURIER:"courier",CABIN:"Cabin",CHIVO:"Chivo",OPEN_SANS:"Open+Sans",FIRA_SANS:"Fira+Sans",ROBOTO:"Roboto",NUNITO:"Nunito",OVERPASS:"Overpass",LATO:"Lato",LIBRE_FRANKLIN:"Libre+Franklin",MONTSERRAT:"Montserrat",POPPINS:"Poppins",RUBIK:"Rubik",RALEWAY:"Raleway",JOSEFIN_SANS:"Josefin+Sans",ALEGREYA_SANS:"Alegreya+Sans",OSWALD:"Oswald"}),ee=Object.freeze([J.CABIN,J.CHIVO,J.OPEN_SANS,J.FIRA_SANS,J.ROBOTO,J.NUNITO,J.OVERPASS,J.LATO,J.LIBRE_FRANKLIN,J.MONTSERRAT,J.POPPINS,J.RUBIK,J.RALEWAY,J.JOSEFIN_SANS,J.ALEGREYA_SANS,J.OSWALD]),te=Object.freeze({[J.THEME_DEFAULT]:null,[J.GEORGIA]:"Georgia, serif",[J.PALATINO]:'"Palatino Linotype", "Book Antiqua", Palatino, serif',[J.TIMES_NEW_ROMAN]:'"Times New Roman", Times, serif',[J.ARIAL]:"Arial, Helvetica, sans-serif",[J.IMPACT]:"Impact, Charcoal, sans-serif",[J.LUCIDA]:'"Lucida Sans Unicode", "Lucida Grande", sans-serif',[J.TAHOMA]:"Tahoma, Geneva, sans-serif",[J.TREBUCHET]:'"Trebuchet MS", Helvetica, sans-serif',[J.VERDANA]:"Verdana, Geneva, sans-serif",[J.COURIER]:'"Courier New", Courier, monospace',[J.CABIN]:'"Cabin", sans-serif',[J.CHIVO]:'"Chivo", sans-serif',[J.OPEN_SANS]:'"Open Sans", sans-serif',[J.FIRA_SANS]:'"Fira Sans", sans-serif',[J.ROBOTO]:'"Roboto", sans-serif',[J.NUNITO]:'"Nunito", sans-serif',[J.OVERPASS]:'"Overpass", sans-serif',[J.LATO]:'"Lato", sans-serif',[J.LIBRE_FRANKLIN]:'"Libre Franklin", sans-serif',[J.MONTSERRAT]:'"Montserrat", sans-serif',[J.POPPINS]:'"Poppins", sans-serif',[J.RUBIK]:'"Rubik", sans-serif',[J.RALEWAY]:'"Raleway", sans-serif',[J.JOSEFIN_SANS]:'"Josefin Sans", sans-serif',[J.ALEGREYA_SANS]:'"Alegreya Sans", sans-serif',[J.OSWALD]:'"Oswald", sans-serif'}),re=Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"}),ne=Object.freeze({SHOW_RESULTS:"show-results",SHOW_CLOSED_BANNER:"show-closed-banner",HIDDEN:"hidden"}),oe=Object.freeze({RADIO:"radio",BUTTON:"button"}),le=Object.freeze({LIST:"list",INLINE:"inline"}),ae=(e,t)=>(0,y.map)(e,(e=>void 0!==e.answerIdFromApi?e:{...e,answerIdFromApi:t[e.answerId]})),se=e=>(0,y.isEmpty)(e)||void 0===e.text||null===e.text||""===e.text,ie=e=>{let{answers:t,pollIdFromApi:r,setErrorMessage:n,hideBranding:o}=e;const{error:s,loading:i,results:c}=K(r);(0,D.useEffect)((()=>{n(s?(0,a.__)("Unfortunately, we're having some trouble retrieving the results for this poll at this time.","crowdsignal-forms"):"")}),[s]);const u=U()("crowdsignal-forms-poll__results",{"is-error":!!s,"is-loading":i}),d=(0,y.sum)((0,y.values)(c));return(0,l.createElement)("div",{className:u},(0,l.createElement)("div",{className:"crowdsignal-forms-poll__results-list"},(0,y.map)(t,(e=>{var t;return!se(e)&&(0,l.createElement)(Q,{key:e.answerId,error:!!s,loading:i,text:e.text,totalVotes:d,votes:c&&null!==(t=c[e.answerIdFromApi])&&void 0!==t?t:0})}))),(0,l.createElement)("div",{className:"crowdsignal-forms-poll__results-footer"},(0,l.createElement)("span",{className:"crowdsignal-forms-poll__results-total"},(0,a.sprintf)(/* translators: %s: Number of votes */
(0,a._n)("%s total vote","%s total votes",d,"crowdsignal-forms"),d?d.toLocaleString():0)),!o&&(0,l.createElement)(Y,null)))};ie.propTypes={pollIdFromApi:z().number,answers:z().arrayOf(z().shape({answerId:z().string.isRequired,answerIdFromApi:z().number,text:z().string})).isRequired,setErrorMessage:z().func.isRequired,hideBranding:z().bool};var ce=ie,ue=r(202),de=r.n(ue);const me=e=>{let t=window.getComputedStyle(e).backgroundColor;for(;"rgba(0, 0, 0, 0)"===t&&e.parentNode&&e.parentNode.nodeType===window.Node.ELEMENT_NODE;)e=e.parentNode,t=window.getComputedStyle(e).backgroundColor;return t},fe=e=>(0,H.createHigherOrderComponent)((t=>class extends l.Component{constructor(e){super(e),this.nodeRef=this.props.node,this.state={fallbackStyles:void 0,grabStylesCompleted:!1},this.bindRef=this.bindRef.bind(this)}bindRef(e){e&&(this.nodeRef=e)}componentDidMount(){this.grabFallbackStyles()}componentDidUpdate(){this.grabFallbackStyles()}grabFallbackStyles(){const{grabStylesCompleted:t,fallbackStyles:r}=this.state;if(this.nodeRef&&!t){const t=e(this.nodeRef,this.props);de()(t,r)||this.setState({fallbackStyles:t,grabStylesCompleted:Object.values(t).every(Boolean)})}}render(){const e=(0,l.createElement)(t,P({},this.props,this.state.fallbackStyles));return this.props.node?e:(0,l.createElement)("div",{ref:this.bindRef}," ",e," ")}}),"withFallbackStyles"),pe=()=>(0,l.createElement)("div",{className:"crowdsignal-forms__style-probe"},(0,l.createElement)("p",null),(0,l.createElement)("h3",null,"Text"),(0,l.createElement)("div",{className:"wp-block-button"},(0,l.createElement)("div",{className:"wp-block-button__link"})),(0,l.createElement)("div",{className:"entry-content"},(0,l.createElement)("div",{className:"alignwide"}))),ge=e=>{if(null===e)return{};const t=e.querySelector(".wp-block-button__link"),r=e.querySelector("p"),n=e.querySelector("h3"),o=e.querySelector(".alignwide");let l=me(t);const a=me(r),s=window.getComputedStyle(r).color;if(l===a){l=(i=t,"0px"!==window.getComputedStyle(i).borderBlockStartWidth?window.getComputedStyle(i).borderBlockStartColor:null)||s}var i;return{accentColor:l,backgroundColor:a,textColor:s,textColorInverted:window.getComputedStyle(t).color,textFont:window.getComputedStyle(r).fontFamily,textSize:window.getComputedStyle(r).fontSize,headingFont:window.getComputedStyle(n).fontFamily,contentWideWidth:window.getComputedStyle(o).maxWidth}},we=e=>fe((e=>({fallbackStyles:ge(e.querySelector(".crowdsignal-forms__style-probe"))})))((t=>{let{fallbackStyles:r,...n}=t;return(0,l.createElement)(e,P({fallbackStyles:r||{},renderStyleProbe:()=>r?null:(0,l.createElement)(pe,null)},n))}));var be=e=>{let{answer:t,answerStyle:r,index:n,isMultipleChoice:o,onChange:s,onDelete:i,onNewAnswer:c,disabled:u}=e;const d=e=>s(n,{...t,text:e}),m=()=>i(n),f=()=>c(n+1),p=U()("crowdsignal-forms-poll__answer",{"is-multiple-choice":o,"is-button":oe.BUTTON===r});return(0,l.createElement)("div",{className:p},oe.RADIO===r&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"crowdsignal-forms-poll__check"}),(0,l.createElement)("div",{className:"crowdsignal-forms-poll__answer-label-wrapper"},u?(0,l.createElement)("div",{className:"crowdsignal-forms-poll__answer-label"},t.text?(0,Z.decodeEntities)(t.text):(0,a.__)("Enter an answer","crowdsignal-forms")):(0,l.createElement)(F.RichText,{className:"crowdsignal-forms-poll__answer-label",placeholder:(0,a.__)("Enter an answer","crowdsignal-forms"),multiline:!1,preserveWhiteSpace:!1,onChange:d,onSplit:f,onReplace:y.noop,onRemove:m,value:t.text,allowedFormats:[],withoutInteractiveFormatting:!0}))),oe.BUTTON===r&&(0,l.createElement)("div",{className:"wp-block-button crowdsignal-forms-poll__block-button"},u?(0,l.createElement)("div",{className:"wp-block-button__link crowdsignal-forms-poll__submit-button"},t.text?(0,Z.decodeEntities)(t.text):(0,a.__)("Enter an answer","crowdsignal-forms")):(0,l.createElement)(F.RichText,{className:"wp-block-button__link crowdsignal-forms-poll__submit-button",placeholder:(0,a.__)("Enter an answer","crowdsignal-forms"),multiline:!1,preserveWhiteSpace:!1,onChange:d,onSplit:f,onReplace:y.noop,onRemove:m,value:t.text,allowedFormats:[],withoutInteractiveFormatting:!0})))};const ve=(e,t)=>(0,y.tap)(e.querySelectorAll("[role=textbox]")[t],(e=>e&&e.focus()));var he=e=>{let{attributes:t,isSelected:r,setAttributes:n,disabled:o,answerStyle:a,buttonAlignment:s}=e;const i=(0,D.useRef)(),c=(e,r)=>n({answers:(0,y.tap)([...t.answers],(t=>{t[e]=r}))}),u=e=>{ve(i.current,Math.max(e-1,0)),n({answers:(0,y.filter)(t.answers,(r=>t.answers.length<=2||r!==t.answers[e]))})},d=e=>{e<t.answers.length&&n({answers:[...(0,y.slice)(t.answers,0,e),{},...(0,y.slice)(t.answers,e,t.answers.length)]}),ve(i.current,Math.min(e,t.answers.length))},m=r&&(0,y.last)(t.answers).text?[...t.answers,{}]:t.answers,f=U()({"is-button":oe.BUTTON===a,"is-inline-button-alignment":le.INLINE===s},"crowdsignal-forms-poll__options"),p=oe.RADIO===a;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{ref:i,className:f},(0,y.map)(m,((e,n)=>(e=>r&&!o||!se(e))(e)&&(0,l.createElement)(be,{key:`poll-answer-${n}`,answer:e,answerStyle:a,index:n,isMultipleChoice:t.isMultipleChoice,onChange:c,onDelete:u,onNewAnswer:d,disabled:o})))),p&&(0,l.createElement)("div",{className:"crowdsignal-forms-poll__actions"},(0,l.createElement)("div",{className:"wp-block-button crowdsignal-forms-poll__block-button"},o?(0,l.createElement)("div",{className:"wp-block-button__link crowdsignal-forms-poll__submit-button"},t.submitButtonLabel):(0,l.createElement)(F.RichText,{className:"wp-block-button__link crowdsignal-forms-poll__submit-button",onChange:e=>n({submitButtonLabel:e}),value:t.submitButtonLabel,allowedFormats:[],multiline:!1,disableLineBreaks:!0}))))};const _e=e=>(0,y.includes)(J,e)?te[e]:null,Ce=(e,t)=>{var r,n,o,l;const a=(0,y.isEmpty)(e.textColor)?t.textColor:e.textColor;return(0,y.mapKeys)({borderColor:null!==(r=e.borderColor)&&void 0!==r?r:t.accentColor,borderRadius:`${e.borderRadius}px`,borderWidth:`${e.borderWidth}px`,bgColor:e.backgroundColor,bodyFontFamily:null!==(n=_e(e.fontFamily))&&void 0!==n?n:t.textFont,questionFontFamily:null!==(o=_e(e.fontFamily))&&void 0!==o?o:t.headingFont,submitButtonBgColor:e.submitButtonBackgroundColor||t.accentColor,submitButtonTextColor:e.submitButtonTextColor||t.textColorInverted,textColor:a,textColorProperties:null!==(l=Ee(a))&&void 0!==l?l:"0, 0, 0",contentWideWidth:t.contentWideWidth},((e,t)=>`--crowdsignal-forms-${(0,y.kebabCase)(t)}`))},Ee=e=>!e||"string"!=typeof e||-1===e.indexOf("rgb")&&0!==e.indexOf("#")||-1<e.indexOf("rgba")?null:(0===e.indexOf("#")&&(e=ye(e)),e.match(/\((.*?)\)/)[1]),ye=e=>{let t=0,r=0,n=0;const o=4===e.length?`#${e[1]+e[1]+e[2]+e[2]+e[3]+e[3]}`:e;return 7===o.length&&(t=parseInt(o.substr(1,2),16)||0,r=parseInt(o.substr(3,2),16)||0,n=parseInt(o.substr(5,2),16)||0),`rgb(${t}, ${r}, ${n})`},ke=function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return U()({"has-bg-color":e.backgroundColor,"has-text-color":e.textColor,"has-submit-button-bg-color":e.submitButtonBackgroundColor,"has-submit-button-text-color":e.submitButtonTextColor,"has-border-radius":null!==(t=e.borderRadius)&&void 0!==t&&t,"has-box-shadow":e.hasBoxShadow},n)},Se=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;return re.CLOSED===e||re.CLOSED_AFTER===e&&new Date(t)<r},Le=(e,t)=>e.isMultipleChoice?oe.RADIO:!(0,y.isEmpty)(t)&&t.indexOf("is-style-buttons")>-1?oe.BUTTON:oe.RADIO,xe=e=>{e?(0,n.registerBlockStyle)("crowdsignal-forms/poll",{name:"buttons",label:(0,a.__)("Buttons","crowdsignal-forms")}):(0,n.unregisterBlockStyle)("crowdsignal-forms/poll","buttons")};var Te=e=>{let{signalWarning:t}=e;return(0,l.createElement)("div",{className:"crowdsignal-forms__row"},(0,l.createElement)(M.Button,{href:"https://crowdsignal.com/pricing",isSecondary:!0,target:"_blank"},(0,a.__)("Upgrade","crowdsignal-forms")),t?(0,l.createElement)("div",{className:"crowdsignal-forms__sidebar-promote"},(0,l.createElement)("em",null,(0,a.__)("Your free Crowdsignal account has ","crowdsignal-forms"),(0,l.createElement)("strong",null,(0,l.createElement)(M.ExternalLink,{href:"https://crowdsignal.com/support/what-is-a-signal/"},(0,a.__)("reached the signals limit.","crowdsignal-forms"))))):(0,l.createElement)("div",{className:"crowdsignal-forms__sidebar-promote"},(0,l.createElement)("em",null,(0,a.__)("Hide Crowdsignal branding and get ","crowdsignal-forms"),(0,l.createElement)(M.ExternalLink,{href:"https://crowdsignal.com/support/what-is-a-signal/"},(0,a.__)("unlimited signals","crowdsignal-forms")))))},Ie=e=>{var t;let{attributes:r,className:n,setAttributes:o,fallbackBackgroundColor:s,fallbackTextColor:i,fallbackSubmitButtonBackgroundColor:c,fallbackSubmitButtonTextColor:u,viewResultsUrl:d,shouldPromote:m,signalWarning:f}=e;const p=""!==d,g=Le(r,n);return X.REDIRECT===r.confirmMessageType&&(r.confirmMessageType=X.THANK_YOU),(0,l.createElement)(F.InspectorControls,null,(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Results","crowdsignal-forms"),initialOpen:!0},(0,l.createElement)("p",null,p?(0,a.__)("Manage results on ","crowdsignal-forms"):(0,a.__)("Publish this post to enable results on ","crowdsignal-forms"),(0,l.createElement)(M.ExternalLink,{href:"https://www.crowdsignal.com"},"crowdsignal.com")),(0,l.createElement)("p",null,(0,l.createElement)(M.Button,{href:d,isSecondary:!0,target:"_blank",disabled:!p},(0,a.__)("View results","crowdsignal-forms"))),(0,l.createElement)(M.TextControl,{value:(0,Z.decodeEntities)(null!==(t=r.title)&&void 0!==t?t:r.question),label:(0,a.__)("Title of the poll block","crowdsignal-forms"),onChange:e=>o({title:e})}),m&&(0,l.createElement)(Te,{signalWarning:f})),(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Confirmation message","crowdsignal-forms"),initialOpen:!1},(0,l.createElement)(M.SelectControl,{value:r.confirmMessageType,label:(0,a.__)("On submission","crowdsignal-forms"),options:[{label:(0,a.__)("Show results","crowdsignal-forms"),value:X.RESULTS},{label:(0,a.__)('Show "Thank You" message',"crowdsignal-forms"),value:X.THANK_YOU},{label:(0,a.__)("Show a custom text message","crowdsignal-forms"),value:X.CUSTOM_TEXT}],onChange:e=>(0,y.includes)(X,e)&&o({confirmMessageType:e})}),X.CUSTOM_TEXT===r.confirmMessageType&&(0,l.createElement)(M.TextareaControl,{value:r.customConfirmMessage,label:(0,a.__)("Message text","crowdsignal-forms"),placeholder:(0,a.__)("Thanks for voting!","crowdsignal-forms"),onChange:e=>o({customConfirmMessage:e})}),X.REDIRECT===r.confirmMessageType&&(0,l.createElement)(F.URLInput,{className:"crowdsignal-forms__redirect-url",value:r.redirectAddress,label:(0,a.__)("Redirect address","crowdsignal-forms"),onChange:e=>o({redirectAddress:e})})),(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Settings","crowdsignal-forms"),initialOpen:!1},(0,l.createElement)(M.SelectControl,{value:r.pollStatus,label:(0,a.__)("Status","crowdsignal-forms"),options:[{label:(0,a.__)("Open","crowdsignal-forms"),value:re.OPEN},{label:(0,a.__)("Closed after","crowdsignal-forms"),value:re.CLOSED_AFTER},{label:(0,a.__)("Closed","crowdsignal-forms"),value:re.CLOSED}],onChange:e=>{(0,y.includes)(re,e)&&o({closedAfterDateTime:e===re.CLOSED_AFTER?new Date((new Date).getTime()+864e5).toISOString():null,pollStatus:e})}}),re.CLOSED_AFTER===r.pollStatus&&(0,l.createElement)(M.TimePicker,{currentTime:r.closedAfterDateTime,label:(0,a.__)("Close poll on","crowdsignal-forms"),onChange:e=>{const t=new Date(e);o({closedAfterDateTime:t.toISOString()})},is12Hour:!0}),re.OPEN!==r.pollStatus&&(0,l.createElement)(M.SelectControl,{value:r.closedPollState,label:(0,a.__)("When poll is closed","crowdsignal-forms"),options:[{label:(0,a.__)("Show results","crowdsignal-forms"),value:ne.SHOW_RESULTS},{label:(0,a.__)('Show poll with "Closed" banner',"crowdsignal-forms"),value:ne.SHOW_CLOSED_BANNER},{label:(0,a.__)("Hide poll","crowdsignal-forms"),value:ne.HIDDEN}],onChange:e=>(0,y.includes)(ne,e)&&o({closedPollState:e})})),(0,l.createElement)(F.PanelColorSettings,{title:(0,a.__)("Block styling","crowdsignal-forms"),initialOpen:!1,colorSettings:[{value:r.textColor,onChange:e=>o({textColor:e}),label:(0,a.__)("Text color","crowdsignal-forms")},{value:r.backgroundColor,onChange:e=>o({backgroundColor:e}),label:(0,a.__)("Background color","crowdsignal-forms")},{value:r.borderColor,onChange:e=>o({borderColor:e}),label:(0,a.__)("Border color","crowdsignal-forms")}]},(0,l.createElement)(F.ContrastChecker,{textColor:r.textColor,backgroundColor:r.backgroundColor,fallbackBackgroundColor:s,fallbackTextColor:i}),(0,l.createElement)(M.SelectControl,{value:r.fontFamily,label:(0,a.__)("Choose font","crowdsignal-forms"),options:[{label:(0,a.__)("Default theme font","crowdsignal-forms"),value:J.THEME_DEFAULT},{label:"Alegreya Sans",value:J.ALEGREYA_SANS},{label:"Arial",value:J.ARIAL},{label:"Cabin",value:J.CABIN},{label:"Chivo",value:J.CHIVO},{label:"Courier",value:J.COURIER},{label:"Fira Sans",value:J.FIRA_SANS},{label:"Georgia",value:J.GEORGIA},{label:"Impact",value:J.IMPACT},{label:"Josefin Sans",value:J.JOSEFIN_SANS},{label:"Lato",value:J.LATO},{label:"Libre Franklin",value:J.LIBRE_FRANKLIN},{label:"Lucida",value:J.LUCIDA},{label:"Montserrat",value:J.MONTSERRAT},{label:"Nunito",value:J.NUNITO},{label:"Open Sans",value:J.OPEN_SANS},{label:"Oswald",value:J.OSWALD},{label:"Overpass",value:J.OVERPASS},{label:"Palatino",value:J.PALATINO},{label:"Poppins",value:J.POPPINS},{label:"Raleway",value:J.RALEWAY},{label:"Roboto",value:J.ROBOTO},{label:"Rubik",value:J.RUBIK},{label:"Tahoma",value:J.TAHOMA},{label:"Times New Roman",value:J.TIMES_NEW_ROMAN},{label:"Trebuchet",value:J.TREBUCHET},{label:"Verdana",value:J.VERDANA}],onChange:e=>(0,y.includes)(J,e)&&o({fontFamily:e})}),"full"!==r.align&&(0,l.createElement)("div",{className:"crowdsignal-forms__row"},(0,l.createElement)(M.TextControl,{type:"number",label:(0,a.__)("Width (%)","crowdsignal-forms"),value:r.width,onChange:e=>o({width:parseInt(e,10)})}),(0,l.createElement)(M.Button,{isSmall:!0,className:"crowdsignal-forms__reset-width-button",onClick:()=>o({width:100})},(0,a.__)("Reset","crowdsignal-forms"))),(0,l.createElement)("div",{className:"crowdsignal-forms__row"},(0,l.createElement)(M.TextControl,{label:(0,a.__)("Border thickness","crowdsignal-forms"),value:r.borderWidth,onChange:e=>{o({borderWidth:parseInt(e,10)||0})},type:"number",className:"crowdsignal-forms__small-text-input"}),(0,l.createElement)(M.TextControl,{label:(0,a.__)("Corner radius","crowdsignal-forms"),value:r.borderRadius,onChange:e=>{o({borderRadius:parseInt(e,10)||0})},type:"number",className:"crowdsignal-forms__small-text-input"})),(0,l.createElement)(M.ToggleControl,{label:(0,a.__)("Drop shadow","crowdsignal-forms"),checked:r.hasBoxShadow,onChange:e=>{o({hasBoxShadow:e})}})),(0,l.createElement)(F.PanelColorSettings,{title:(0,a.__)("Button styling","crowdsignal-forms"),initialOpen:!1,colorSettings:[{value:r.submitButtonTextColor,onChange:e=>o({submitButtonTextColor:e}),label:(0,a.__)("Text color","crowdsignal-forms")},{value:r.submitButtonBackgroundColor,onChange:e=>o({submitButtonBackgroundColor:e}),label:(0,a.__)("Background color","crowdsignal-forms")}]},(0,l.createElement)(F.ContrastChecker,{textColor:r.submitButtonTextColor,backgroundColor:r.submitButtonBackgroundColor,fallbackBackgroundColor:c,fallbackTextColor:u}),oe.BUTTON===g&&(0,l.createElement)(M.SelectControl,{value:r.buttonAlignment,label:(0,a.__)("Alignment","crowdsignal-forms"),options:[{value:le.LIST,label:(0,a.__)("List","crowdsignal-forms")},{value:le.INLINE,label:(0,a.__)("Inline","crowdsignal-forms")}],onChange:e=>o({buttonAlignment:e})})),(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Answer settings","crowdsignal-forms"),initialOpen:!0},(0,l.createElement)(M.CheckboxControl,{checked:r.hasOneResponsePerComputer,label:(0,a.__)("One response per computer","crowdsignal-forms"),onChange:e=>o({hasOneResponsePerComputer:e})}),(0,l.createElement)(M.CheckboxControl,{checked:r.randomizeAnswers,label:(0,a.__)("Randomize answer order","crowdsignal-forms"),onChange:e=>o({randomizeAnswers:e})})))};const Oe=[{icon:()=>(0,l.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{d:"M20 6.75H12V5.25H20V6.75Z"}),(0,l.createElement)("path",{d:"M20 12.5H12V11H20V12.5Z"}),(0,l.createElement)("path",{d:"M20 18.75H12V17.25H20V18.75Z"}),(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 7C6.55228 7 7 6.55228 7 6C7 5.44772 6.55228 5 6 5C5.44772 5 5 5.44772 5 6C5 6.55228 5.44772 7 6 7ZM6 8C7.10457 8 8 7.10457 8 6C8 4.89543 7.10457 4 6 4C4.89543 4 4 4.89543 4 6C4 7.10457 4.89543 8 6 8Z"}),(0,l.createElement)("path",{d:"M6 12.75C6.55228 12.75 7 12.3023 7 11.75C7 11.1977 6.55228 10.75 6 10.75C5.44772 10.75 5 11.1977 5 11.75C5 12.3023 5.44772 12.75 6 12.75ZM6 13.75C7.10457 13.75 8 12.8546 8 11.75C8 10.6454 7.10457 9.75 6 9.75C4.89543 9.75 4 10.6454 4 11.75C4 12.8546 4.89543 13.75 6 13.75Z"}),(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 19C6.55228 19 7 18.5523 7 18C7 17.4477 6.55228 17 6 17C5.44772 17 5 17.4477 5 18C5 18.5523 5.44772 19 6 19ZM6 20C7.10457 20 8 19.1046 8 18C8 16.8954 7.10457 16 6 16C4.89543 16 4 16.8954 4 18C4 19.1046 4.89543 20 6 20Z"})),title:(0,a.__)("Choose one answer","crowdsignal-forms"),value:!1},{icon:()=>(0,l.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 10.75H5V12.75H7V10.75ZM4 9.75V13.75H8V9.75H4Z"}),(0,l.createElement)("path",{d:"M4 4H8V8H4V4Z"}),(0,l.createElement)("path",{d:"M4 16H8V20H4V16Z"}),(0,l.createElement)("path",{d:"M20 6.75H12V5.25H20V6.75Z"}),(0,l.createElement)("path",{d:"M20 12.5H12V11H20V12.5Z"}),(0,l.createElement)("path",{d:"M20 18.75H12V17.25H20V18.75Z"})),title:(0,a.__)("Choose multiple answers","crowdsignal-forms"),value:!0}];var Ne=e=>{let{attributes:t,setAttributes:r}=e;const n=(0,y.map)(Oe,(e=>({...e,isActive:e.value===t.isMultipleChoice,onClick:()=>{r({isMultipleChoice:e.value}),xe(e.value)}})));return(0,l.createElement)(F.BlockControls,null,(0,l.createElement)(M.Toolbar,{controls:n}))},Ae=e=>{let{children:t}=e;return(0,l.createElement)("div",{className:"crowdsignal-forms-poll__error-banner"},t)},Re={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Pe;const De=new Uint8Array(16);function Be(){if(!Pe&&(Pe="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Pe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Pe(De)}const Fe=[];for(let e=0;e<256;++e)Fe.push((e+256).toString(16).slice(1));var Me=function(e,t,r){if(Re.randomUUID&&!t&&!e)return Re.randomUUID();const n=(e=e||{}).random||(e.rng||Be)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return(Fe[e[t+0]]+Fe[e[t+1]]+Fe[e[t+2]]+Fe[e[t+3]]+"-"+Fe[e[t+4]]+Fe[e[t+5]]+"-"+Fe[e[t+6]]+Fe[e[t+7]]+"-"+Fe[e[t+8]]+Fe[e[t+9]]+"-"+Fe[e[t+10]]+Fe[e[t+11]]+Fe[e[t+12]]+Fe[e[t+13]]+Fe[e[t+14]]+Fe[e[t+15]]).toLowerCase()}(n)},He=e=>{let{onEditClick:t}=e;return(0,l.createElement)("div",{className:"crowdsignal-forms-poll__edit-bar"},(0,l.createElement)("div",{className:"crowdsignal-forms-poll__edit-bar-message"},(0,a.__)("Warning! This poll is published. Deleting or reordering answers may cause the loss of existing responses.","crowdsignal-forms")),(0,l.createElement)("button",{className:"crowdsignal-forms-poll__edit-bar-button",onClick:()=>{t()}},(0,a.__)("Edit","crowdsignal-forms")))};const Ve=(0,y.debounce)(((e,t)=>{window._tkq=window._tkq||[],window._tkq.push(["recordEvent","crowdsignal_connection_failed",{author_id:e,block_name:t}])}),5e3);var Ue=e=>{const{blockIcon:t,blockName:r,children:n}=e,o=(0,i.useSelect)((e=>e(N).getAccountInfo())),{updateAccountInfo:s}=(0,i.useDispatch)(N),c=o&&0!==o.id,u=!!o.is_verified,d=(0,i.useSelect)((e=>e("core").getCurrentUser()));if(c&&u)return n;const m=!c,f=c&&!u;return Ve(d&&d.id?d.id:0,r),(0,l.createElement)("div",{className:"crowdsignal-forms__connect-to-crowdsignal"},(0,l.createElement)("div",{className:"crowdsignal-forms__connect-to-crowdsignal-header"},t,(0,l.createElement)("div",{className:"crowdsignal-forms__connect-to-crowdsignal-title"},r)),(0,l.createElement)("div",{className:"crowdsignal-forms__connect-to-crowdsignal-body"},m&&(0,a.__)("You need to connect to a Crowdsignal account to collect and manage your results.","crowdsignal-forms"),f&&(0,a.__)("Please verify your WordPress.com email address in order to publish your poll.","crowdsignal-forms")),(0,l.createElement)(M.Button,{isPrimary:!0,onClick:async()=>{const e=c,t=await(async()=>await T()({path:"/crowdsignal-forms/v1/account/info",method:"GET"}))(),r=0!==t.id,n=!!t.is_verified;s(t),r||window.open("/wp-admin/options-general.php?page=crowdsignal-forms-settings"),e&&!n&&window.open("https://wordpress.com/me/account")}},m&&(0,a.__)("Connect to Crowdsignal","crowdsignal-forms"),f&&(0,a.__)("Verify or Change your Email Address","crowdsignal-forms")))};const je=e=>!!e&&("crowdsignal-forms/poll"===e.name||"crowdsignal-forms/applause"===e.name||"crowdsignal-forms/vote"===e.name);let We=!1,ze=!1;(()=>{if(We)return;We=!0;const{isEditedPostDirty:e,isEditedPostNew:t,isSavingPost:r,isCleanNewPost:n,getCurrentPostId:o}=(0,i.select)("core/editor"),{setTryFetchPollData:l,setPollApiDataForClientId:a,setIsFetchingPollData:s}=(0,i.dispatch)(N),{shouldTryFetchingPollData:c,getPollDataByClientId:u,isFetchingPollData:d}=(0,i.select)(N);(0,i.subscribe)((()=>{const m=(0,y.filter)((0,i.select)("core/block-editor").getBlocks(),je);if(m.length<1)return;if(d())return;if(n()||t()||r()||e())return;if(!o())return;const f=(0,y.filter)(m,(e=>{let{attributes:t}=e;return t.pollId&&null===u(t.pollId)}));f.length<1||(c()?d()||(s(!0),Promise.all((0,y.map)(f,(e=>{const{pollId:t}=e.attributes;return T()({path:`/crowdsignal-forms/v1/polls/${t}?cached=1`,method:"GET"}).then((e=>a(t,{...e,viewResultsUrl:`https://app.crowdsignal.com/polls/${e.id}/results`})),(()=>a(t,null)))}))).finally((()=>s(!1)))):l(!0))}))})();const qe=e=>t=>{const{attributes:r,setAttributes:n,addPollClientId:o,removePollClientId:a}=t;return(0,D.useEffect)((()=>(("p2tenberg"in window||"p2editor"in window)&&(()=>{if(ze)return;ze=!0;let e=null;const t=()=>{null!==e&&clearTimeout(e),e=setTimeout((()=>r()),1e3+1e3*Math.random())},r=()=>{const{getPollClientIds:e,getPollDataByClientId:r,shouldTryFetchingPollData:n,isFetchingPollData:o}=(0,i.select)(N),l=(0,y.filter)(e(),(e=>null===r(e)));if(l.length<1)return t();const{setTryFetchPollData:a,setPollApiDataForClientId:s,setIsFetchingPollData:c}=(0,i.dispatch)(N);return n()?o()||(c(!0),Promise.all((0,y.map)(l,(e=>T()({path:`/crowdsignal-forms/v1/polls/${e}?cached=1`,method:"GET"}).then((t=>s(e,{...t,viewResultsUrl:`https://app.crowdsignal.com/polls/${t.id}/results`})),(()=>s(e,null)))))).finally((()=>c(!1)))):a(!0),t()};r()})(),r.pollId&&o(r.pollId),()=>{r.pollId&&a(r.pollId)})),[]),((e,t,r,n)=>{(0,D.useEffect)((()=>{if(!(0,y.isEmpty)(t))if(window.csPolls||(window.csPolls={}),window.csPolls[t])if(window.csPolls[t].indexOf(e)>-1);else{const e=(0,y.map)(r,(e=>(0,y.omit)(e,["answerId"])));n({pollId:null,answers:e})}else window.csPolls[t]=[e]}),[t])})(t.clientId,r.pollId,r.answers,n),(0,l.createElement)(e,t)};var $e=e=>(0,H.compose)([(0,i.withSelect)(((e,t)=>{const{getPollDataByClientId:r,shouldTryFetchingPollData:n,isFetchingPollData:o}=e(N),{attributes:l}=t;return{pollDataFromApi:l.pollId?r(l.pollId):null,getPollDataByClientId:r,shouldTryFetchingPollData:n,isFetchingPollData:o}})),(0,i.withDispatch)((e=>{const{setTryFetchPollData:t,setPollApiDataForClientId:r,setIsFetchingPollData:n,addPollClientId:o,removePollClientId:l}=e(N);return{setTryFetchPollData:t,setPollApiDataForClientId:r,setIsFetchingPollData:n,addPollClientId:o,removePollClientId:l}})),qe])(e),Ke=e=>{let{icon:t,children:r,componentActions:n=[],...o}=e;return(0,l.createElement)(M.Notice,P({className:"crowdsignal-forms__editor-notice"},o),t&&(0,l.createElement)("div",{className:"crowdsignal-forms__editor-notice-icon"},(0,l.createElement)(M.Icon,{icon:t})),(0,l.createElement)("div",{className:"crowdsignal-forms__editor-notice-text"},r),n.map((e=>e)))},Ze=()=>(0,l.createElement)(Ke,{icon:"warning",status:"warn",isDismissible:!1,actions:[{label:(0,a.__)("Please upgrade","crowdsignal-forms"),url:"https://crowdsignal.com/pricing",className:"is-secondary",noDefaultClasses:!0}]},(0,a.__)("Your free Crowdsignal account has ","crowdsignal-forms"),(0,l.createElement)(M.ExternalLink,{href:"https://crowdsignal.com/support/what-is-a-signal/"},(0,a.__)("exceeded 2500 signals.","crowdsignal-forms"))),Ge=(0,H.compose)([we,$e,e=>t=>{const{attributes:r,setAttributes:n}=t;return(0,D.useEffect)((()=>{if(!r.pollId){const e=Me();n({pollId:e})}if((0,y.some)(r.answers,(e=>!e.answerId&&e.text))){const e=(0,y.map)(r.answers,(e=>{if(e.answerId||!e.text)return e;const t=Me();return{...e,answerId:t}}));n({answers:e})}})),(0,l.createElement)(e,t)}])((e=>{const{attributes:t,className:r,fallbackStyles:n,isSelected:o,setAttributes:c,renderStyleProbe:u,pollDataFromApi:d}=e,[m,f]=(0,D.useState)(!0),[p,g]=(0,D.useState)(""),w=!(0,y.isEmpty)(d),b=d?d.viewResultsUrl:"",v=d?d.id:null,h={};d&&(0,y.map)(d.answers,(e=>{h[e.client_id]=e.id}));const _=o&&"full"!==t.align,C="full"!==t.align?`${t.width}%`:"auto",E=Se(t.pollStatus,t.closedAfterDateTime),k=t.note||o&&m,S=E&&ne.SHOW_RESULTS===t.closedPollState,L=E&&ne.HIDDEN===t.closedPollState,x=(0,i.useSelect)((e=>e(N).getAccountInfo())),T=(0,y.get)(x,"capabilities",[]).includes("hide-branding");(0,D.useEffect)((()=>f(!w)),[o]),(0,D.useEffect)((()=>{o&&xe(!t.isMultipleChoice)}),[t.isMultipleChoice,o]);const I=o&&w&&!m,O=Le(t,r);t.fontFamily&&(e=>{if((0,y.isEmpty)(e)||J.THEME_DEFAULT===e||-1===ee.indexOf(e))return;const t=`https://fonts.googleapis.com/css2?family=${e}:wght@400;600;700&display=swap`;0===(0,y.filter)(Array.from(document.head.childNodes),(e=>"link"===e.nodeName.toLowerCase()&&e.href===t)).length&&document.head.appendChild((0,y.tap)(document.createElement("link"),(e=>{e.type="text/css",e.rel="stylesheet",e.href=t})))})(t.fontFamily);const A=(0,y.get)(x,["signalCount","shouldDisplay"]),R=A&&(0,y.get)(x,["signalCount","count"])>=(0,y.get)(x,["signalCount","userLimit"]);return(0,l.createElement)(Ue,{blockIcon:(0,l.createElement)(s,null),blockName:(0,a.__)("Crowdsignal Poll","crowdsignal-forms")},(0,l.createElement)(Ne,e),(0,l.createElement)(Ie,P({},e,{viewResultsUrl:b,shouldPromote:A,signalWarning:R})),R&&(0,l.createElement)(Ze,null),(0,l.createElement)(M.ResizableBox,{className:"crowdsignal-forms-poll__resize-wrapper",size:{height:"auto",width:C},minWidth:"25%",maxWidth:"100%",enable:{left:!0,right:!0},onResizeStop:(e,t,r)=>{"right"!==t&&"left"!==t||c({width:(0,y.round)(r.offsetWidth/r.parentNode.offsetWidth*100)})},showHandle:_,resizeRatio:2},(0,l.createElement)("div",{className:ke(t,r,{"is-selected-in-editor":o,"is-closed":E,"is-hidden":L},"crowdsignal-forms-poll"),style:Ce(t,n)},I&&(0,l.createElement)(He,{onEditClick:()=>{f(!0)}}),p&&(0,l.createElement)(Ae,null,p),(0,l.createElement)("div",{className:"crowdsignal-forms-poll__content"},m?(0,l.createElement)(F.RichText,{tagName:"h3",className:"crowdsignal-forms-poll__question",placeholder:(0,a.__)("Enter your question","crowdsignal-forms"),onChange:e=>c({question:e}),value:t.question,allowedFormats:[],disableLineBreaks:!0}):(0,l.createElement)("h3",{className:"crowdsignal-forms-poll__question"},t.question||(0,a.__)("Enter your question","crowdsignal-forms")),k&&(m?(0,l.createElement)(F.RichText,{tagName:"p",className:"crowdsignal-forms-poll__note",placeholder:(0,a.__)("Add a note (optional)","crowdsignal-forms"),onChange:e=>c({note:e}),value:t.note,allowedFormats:[],disableLineBreaks:!0}):(0,l.createElement)("div",{className:"crowdsignal-forms-poll__note"},t.note||(0,a.__)("Add a note (optional)","crowdsignal-forms"))),!S&&(0,l.createElement)(he,P({},e,{setAttributes:c,disabled:!m,answerStyle:O,buttonAlignment:t.buttonAlignment})),S&&(0,l.createElement)(ce,{answers:ae((0,y.filter)(t.answers,(e=>!se(e))),h),pollIdFromApi:v,hideBranding:T,setErrorMessage:g}),!T&&(0,l.createElement)(Y,null)),E&&(0,l.createElement)(j,{isPollHidden:L,isPollClosed:E}),u())))})),Qe={pollId:{type:"string",default:null},isMultipleChoice:{type:"boolean",default:!1},title:{type:"string",default:null},question:{type:"string",default:""},note:{type:"string",default:""},answers:{type:"array",default:[{},{},{}],items:{type:"object",properties:{answerId:{type:"string",default:null},text:{type:"string",default:""}}}},submitButtonLabel:{type:"string",default:(0,a.__)("Submit","crowdsignal-forms")},submitButtonTextColor:{type:"string"},submitButtonBackgroundColor:{type:"string"},confirmMessageType:{type:"string",default:X.RESULTS},customConfirmMessage:{type:"string"},redirectAddress:{type:"string"},textColor:{type:"string"},backgroundColor:{type:"string"},borderColor:{type:"string"},borderWidth:{type:"number",default:2},borderRadius:{type:"number",default:0},hasBoxShadow:{type:"boolean",default:!1},fontFamily:{type:"string",default:J.THEME_DEFAULT},hasOneResponsePerComputer:{type:"boolean",default:!1},randomizeAnswers:{type:"boolean",default:!1},align:{type:"string"},width:{type:"number",default:100},pollStatus:{type:"string",default:re.OPEN},closedPollState:{type:"string",default:ne.SHOW_RESULTS},closedAfterDateTime:{type:"string",default:null},hideBranding:{type:"boolean",default:!1},buttonAlignment:{type:"string",default:le.LIST}},Ye={title:(0,a.__)("Poll","crowdsignal-forms"),description:(0,a.__)("Create polls and get your audience’s opinion — powered by Crowdsignal.","crowdsignal-forms"),category:"crowdsignal-forms",keywords:[(0,a.__)("ask","crowdsignal-forms"),"crowdsignal",(0,a.__)("feedback","crowdsignal-forms"),(0,a.__)("form","crowdsignal-forms"),(0,a.__)("opinion","crowdsignal-forms"),(0,a.__)("poll","crowdsignal-forms"),(0,a.__)("pop","crowdsignal-forms"),(0,a.__)("question","crowdsignal-forms"),(0,a.__)("quiz","crowdsignal-forms"),(0,a.__)("research","crowdsignal-forms"),(0,a.__)("survey","crowdsignal-forms"),(0,a.__)("vote","crowdsignal-forms")],icon:(0,l.createElement)(s,null),edit:Ge,attributes:Qe,supports:{align:["center","wide","full"]},getEditWrapperProps:e=>{let{align:t}=e;return{"data-align":t}},example:{attributes:{question:(0,a.__)("How did you hear about us?","crowdsignal-forms"),answers:[{text:(0,a.__)("Search","crowdsignal-forms")},{text:(0,a.__)("Friend","crowdsignal-forms")},{text:(0,a.__)("Email","crowdsignal-forms")}]}},styles:[{name:"default",label:(0,a.__)("List","crowdsignal-forms"),isDefault:!0},{name:"buttons",label:(0,a.__)("Buttons","crowdsignal-forms")}],variations:[{isDefault:!0,attributes:{className:"is-style-buttons"}}]},Xe=()=>(0,l.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("mask",{id:"maskVote","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"3",y:"3",width:"18",height:"18"},(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.5999 9.525H13.3942L14.1779 5.75475L14.2027 5.49075C14.2027 5.1525 14.0624 4.839 13.8397 4.61625L12.9652 3.75L7.53666 9.18675C7.23142 9.48374 7.04992 9.89621 7.04991 10.3499H3.75V18.6824H7.05V18.6178C7.05963 19.5172 7.79834 20.25 8.69991 20.25H16.1249C16.8097 20.25 17.3954 19.8375 17.6429 19.2435L20.1344 13.4273C20.2087 13.2375 20.2499 13.0395 20.2499 12.825V11.175C20.2499 10.2675 19.5074 9.525 18.5999 9.525ZM7.05 18.6178V10.3499H7.04991C7.04991 10.35 7.04991 10.35 7.04991 10.35V18.6C7.04991 18.6059 7.04994 18.6119 7.05 18.6178ZM18.5999 12.825L16.1249 18.6H8.69986V10.35L12.2804 6.76952L11.3646 11.175H18.5999V12.825Z",fill:"white"})),(0,l.createElement)("g",{mask:"url(#maskVote)"},(0,l.createElement)("rect",{x:"1.00024",y:"1.25",width:"22",height:"22"})));const Je=Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"}),et=(Object.freeze({CONNECTED:"connected",NOT_CONNECTED:"not-connected",NOT_VERIFIED:"not-verified"}),[{title:(0,a.__)("Small","crowdsignal-forms"),size:"small"},{title:(0,a.__)("Medium","crowdsignal-forms"),size:"medium"},{title:(0,a.__)("Large","crowdsignal-forms"),size:"large"}]),tt={position:"bottom right",isAlternate:!0,className:"crowdsignal-forms-vote__size-dropdown"};var rt=e=>{let{attributes:t,setAttributes:r,viewResultsUrl:n,signalWarning:o,shouldPromote:s}=e;const i=""!==n;return(0,l.createElement)(F.InspectorControls,null,(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Results","crowdsignal-forms"),initialOpen:!0},(0,l.createElement)("p",null,i?(0,a.__)("Manage results on ","crowdsignal-forms"):(0,a.__)("Publish this post to enable results on ","crowdsignal-forms"),(0,l.createElement)(M.ExternalLink,{href:"https://www.crowdsignal.com"},"crowdsignal.com")),(0,l.createElement)("p",null,(0,l.createElement)(M.Button,{href:n,isSecondary:!0,target:"_blank",disabled:!i},(0,a.__)("View results","crowdsignal-forms"))),(0,l.createElement)(M.TextControl,{value:t.title,label:(0,a.__)("Title of the vote block","crowdsignal-forms"),onChange:e=>r({title:e})}),s&&(0,l.createElement)(Te,{signalWarning:o})),(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Settings","crowdsignal-forms")},(0,l.createElement)(M.SelectControl,{value:t.pollStatus,label:(0,a.__)("Status","crowdsignal-forms"),options:[{label:(0,a.__)("Open","crowdsignal-forms"),value:Je.OPEN},{label:(0,a.__)("Closed after","crowdsignal-forms"),value:Je.CLOSED_AFTER},{label:(0,a.__)("Closed","crowdsignal-forms"),value:Je.CLOSED}],onChange:e=>{(0,y.includes)(Je,e)&&r({closedAfterDateTime:e===Je.CLOSED_AFTER?new Date((new Date).getTime()+864e5).toISOString():null,pollStatus:e})}}),Je.CLOSED_AFTER===t.pollStatus&&(0,l.createElement)(M.TimePicker,{currentTime:t.closedAfterDateTime,label:(0,a.__)("Close vote block on","crowdsignal-forms"),onChange:e=>{const t=new Date(e);r({closedAfterDateTime:t.toISOString()})},is12Hour:!0})))},nt=()=>(0,l.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.1894 5.75L13.6668 5.75L13.6668 4.25H19.0002H19.7502L19.7502 5V10.3333H18.2502V6.81054L6.81072 18.25L10.3333 18.25V19.75L5 19.75H4.25V19V13.6666L5.75 13.6666L5.75 17.1894L17.1894 5.75Z"})),ot=()=>(0,l.createElement)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("line",{x1:"8",y1:"8.5",x2:"24",y2:"8.5",stroke:"currentColor"}),(0,l.createElement)("line",{x1:"8",y1:"15",x2:"24",y2:"15",stroke:"currentColor",strokeWidth:"2"}),(0,l.createElement)("line",{x1:"8",y1:"22.5",x2:"24",y2:"22.5",stroke:"currentColor",strokeWidth:"3"})),lt=()=>(0,l.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{d:"M12.0078 18.2266C14.7656 18.2266 16.4062 15.9531 16.4062 12.3438C16.4062 8.73438 14.75 6.5 12.0078 6.5C9.25781 6.5 7.59375 8.75 7.59375 12.3516C7.59375 15.9688 9.24219 18.2266 12.0078 18.2266ZM12.0078 16.5781C10.5078 16.5781 9.625 15 9.625 12.3438C9.625 9.73438 10.5234 8.14844 12.0078 8.14844C13.4844 8.14844 14.3672 9.71875 14.3672 12.3516C14.3672 15.0078 13.5 16.5781 12.0078 16.5781Z"})),at=e=>{let{attributes:t,setAttributes:r}=e;const n=(0,y.get)(t,"size","medium"),o=et,[s,i]=(0,D.useState)(!1),c=()=>i(!s),u=t.hideResults?(0,a.__)("Show vote counters","crowdsignal-forms"):(0,a.__)("Hide vote counters","crowdsignal-forms");return(0,l.createElement)(F.BlockControls,null,(0,l.createElement)(M.ToolbarGroup,{isCollapsed:!0,icon:nt,label:(0,a.__)("Change block size","crowdsignal-forms"),popoverProps:tt,controls:o.map((e=>{const{size:t}=e,o=n===t;return{...e,isActive:o,role:"menuitemradio",onClick:()=>r({size:t})}}))}),(0,l.createElement)(M.Toolbar,{controls:[{icon:ot,onClick:c},{icon:lt,label:u,onClick:()=>r({hideResults:!t.hideResults}),isActive:!t.hideResults,isPressed:!t.hideResults}]}),s&&(0,l.createElement)(M.Popover,{className:"crowdsignal-forms__border-popover",onFocusOutside:c},(0,l.createElement)("div",{className:"crowdsignal-forms__row"},(0,l.createElement)(M.TextControl,{label:(0,a.__)("Border thickness","crowdsignal-forms"),type:"number",className:"crowdsignal-forms__small-text-input",onChange:e=>{r({borderWidth:parseInt(e,10)||0})},value:t.borderWidth||0}),(0,l.createElement)(M.TextControl,{label:(0,a.__)("Corner radius","crowdsignal-forms"),type:"number",className:"crowdsignal-forms__small-text-input",onChange:e=>{r({borderRadius:parseInt(e,10)||0})},value:t.borderRadius||0}))))},st=e=>t=>r=>{const{attributes:n,setAttributes:o}=r;return(0,D.useEffect)((()=>{(0,y.forEach)(e,(e=>{n[e]||o({[e]:Me()})}))}),[]),(0,l.createElement)(t,r)},it=(e,t,r,n)=>(0,D.useEffect)((()=>{(0,y.isEmpty)(window.csBlockTypeCount)&&(window.csBlockTypeCount={}),(0,y.isNil)(window.csBlockTypeCount[e])&&(window.csBlockTypeCount[e]=0),window.csBlockTypeCount[e]++,null===r.title&&(1===window.csBlockTypeCount[e]?n({title:t}):n({title:`${t} ${window.csBlockTypeCount[e]}`}))}),[]),ct=(0,H.compose)([$e,st(["pollId"])])((e=>{const{attributes:t,setAttributes:r,className:n,pollDataFromApi:o}=e;it(e.name,(0,a.__)("Untitled Vote","crowdsignal-forms"),t,r);const s=o?o.viewResultsUrl:"",c=Se(t.pollStatus,t.closedAfterDateTime),u=U()(n,"crowdsignal-forms-vote",`size-${t.size}`,{"no-results":t.hideResults,"is-closed":c}),d=(e=>(0,y.mapKeys)({borderRadius:`${e.borderRadius}px`,borderWidth:`${e.borderWidth}px`},((e,t)=>`--crowdsignal-forms-vote-${(0,y.kebabCase)(t)}`)))(t),m=(0,i.useSelect)((e=>e(N).getAccountInfo())),f=(0,y.get)(m,["signalCount","shouldDisplay"]),p=f&&(0,y.get)(m,["signalCount","count"])>=(0,y.get)(m,["signalCount","userLimit"]);return(0,l.createElement)(Ue,{blockIcon:null,blockName:(0,a.__)("Crowdsignal Vote","crowdsignal-forms")},(0,l.createElement)(rt,P({},e,{shouldPromote:f,signalWarning:p,viewResultsUrl:s})),(0,l.createElement)(at,e),(0,l.createElement)("div",{className:u,style:d},(0,l.createElement)("div",{className:"crowdsignal-forms-vote__items"},(0,l.createElement)(F.InnerBlocks,{template:[["crowdsignal-forms/vote-item",{type:"up"}],["crowdsignal-forms/vote-item",{type:"down"}]],templateInsertUpdatesSelection:!1,allowedBlocks:["crowdsignal-forms/vote-item"],orientation:"horizontal",__experimentalMoverDirection:"horizontal"}))))})),ut={pollId:{type:"string",default:null},hideBranding:{type:"boolean",default:!1},title:{type:"string",default:null},pollStatus:{type:"string",default:Je.OPEN},closedAfterDateTime:{type:"string",default:null},size:{type:"string",default:"medium"},borderWidth:{type:"number",default:1},borderRadius:{type:"number",default:5},hideResults:{type:"boolean",default:!1}},dt={title:(0,a.__)("Vote","crowdsignal-forms"),description:(0,a.__)("Allow your audience to rate your work or express their opinion — powered by Crowdsignal.","crowdsignal-forms"),category:"crowdsignal-forms",keywords:[(0,a.__)("ballot","crowdsignal-forms"),(0,a.__)("button","crowdsignal-forms"),(0,a.__)("count","crowdsignal-forms"),"crowdsignal",(0,a.__)("deciding","crowdsignal-forms"),(0,a.__)("decision","crowdsignal-forms"),(0,a.__)("elect","crowdsignal-forms"),(0,a.__)("election","crowdsignal-forms"),(0,a.__)("feedback","crowdsignal-forms"),(0,a.__)("form","crowdsignal-forms"),(0,a.__)("like","crowdsignal-forms"),(0,a.__)("nero","crowdsignal-forms"),(0,a.__)("opinion","crowdsignal-forms"),(0,a.__)("poll","crowdsignal-forms"),(0,a.__)("polling","crowdsignal-forms"),(0,a.__)("rate","crowdsignal-forms"),(0,a.__)("rating","crowdsignal-forms"),(0,a.__)("research","crowdsignal-forms"),(0,a.__)("survey","crowdsignal-forms"),(0,a.__)("thumb down","crowdsignal-forms"),(0,a.__)("thumb up","crowdsignal-forms"),(0,a.__)("thumbs","crowdsignal-forms"),(0,a.__)("vote","crowdsignal-forms"),(0,a.__)("voting","crowdsignal-forms")],icon:(0,l.createElement)(Xe,null),edit:ct,save:()=>(0,l.createElement)(F.InnerBlocks.Content,null),attributes:ut,example:{attributes:{className:"crowdsignal-forms-vote__example",size:"large"}}},mt=e=>{let{attributes:t,setAttributes:r}=e;return(0,l.createElement)(F.InspectorControls,null,(0,l.createElement)(F.PanelColorSettings,{title:(0,a.__)("Styling","crowdsignal-forms"),initialOpen:!0,colorSettings:[{value:t.textColor,onChange:e=>r({textColor:e}),label:(0,a.__)("Text color","crowdsignal-forms")},{value:t.backgroundColor,onChange:e=>r({backgroundColor:e}),label:(0,a.__)("Background color","crowdsignal-forms")},{value:t.borderColor,onChange:e=>r({borderColor:e}),label:(0,a.__)("Border color","crowdsignal-forms")}]}))};function ft(e,t){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ft(e,t)}function pt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ft(e,t)}function gt(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}var wt=window.ReactDOM,bt=r.n(wt),vt=B().createContext(null),ht=function(e){return e.scrollTop},_t="unmounted",Ct="exited",Et="entering",yt="entered",kt="exiting",St=function(e){function t(t,r){var n;n=e.call(this,t,r)||this;var o,l=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?l?(o=Ct,n.appearStatus=Et):o=yt:o=t.unmountOnExit||t.mountOnEnter?_t:Ct,n.state={status:o},n.nextCallback=null,n}pt(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===_t?{status:Ct}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==Et&&r!==yt&&(t=Et):r!==Et&&r!==yt||(t=kt)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Et){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:bt().findDOMNode(this);r&&ht(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ct&&this.setState({status:_t})},r.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,o=this.props.nodeRef?[n]:[bt().findDOMNode(this),n],l=o[0],a=o[1],s=this.getTimeouts(),i=n?s.appear:s.enter;e||r?(this.props.onEnter(l,a),this.safeSetState({status:Et},(function(){t.props.onEntering(l,a),t.onTransitionEnd(i,(function(){t.safeSetState({status:yt},(function(){t.props.onEntered(l,a)}))}))}))):this.safeSetState({status:yt},(function(){t.props.onEntered(l)}))},r.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:bt().findDOMNode(this);t?(this.props.onExit(n),this.safeSetState({status:kt},(function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:Ct},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:Ct},(function(){e.props.onExited(n)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:bt().findDOMNode(this),n=null==e&&!this.props.addEndListener;if(r&&!n){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],l=o[0],a=o[1];this.props.addEndListener(l,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===_t)return null;var t=this.props,r=t.children,n=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,gt(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return B().createElement(vt.Provider,{value:null},"function"==typeof r?r(e,n):B().cloneElement(B().Children.only(r),n))},t}(B().Component);function Lt(){}St.contextType=vt,St.propTypes={},St.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Lt,onEntering:Lt,onEntered:Lt,onExit:Lt,onExiting:Lt,onExited:Lt},St.UNMOUNTED=_t,St.EXITED=Ct,St.ENTERING=Et,St.ENTERED=yt,St.EXITING=kt;var xt,Tt,It=St,Ot="out-in",Nt="in-out",At=function(e,t,r){return function(){var n;e.props[t]&&(n=e.props)[t].apply(n,arguments),r()}},Rt=((xt={})[Ot]=function(e){var t=e.current,r=e.changeState;return B().cloneElement(t,{in:!1,onExited:At(t,"onExited",(function(){r(Et,null)}))})},xt[Nt]=function(e){var t=e.current,r=e.changeState,n=e.children;return[t,B().cloneElement(n,{in:!0,onEntered:At(n,"onEntered",(function(){r(Et)}))})]},xt),Pt=((Tt={})[Ot]=function(e){var t=e.children,r=e.changeState;return B().cloneElement(t,{in:!0,onEntered:At(t,"onEntered",(function(){r(yt,B().cloneElement(t,{in:!0}))}))})},Tt[Nt]=function(e){var t=e.current,r=e.children,n=e.changeState;return[B().cloneElement(t,{in:!1,onExited:At(t,"onExited",(function(){n(yt,B().cloneElement(r,{in:!0}))}))}),B().cloneElement(r,{in:!0})]},Tt),Dt=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={status:yt,current:null},t.appeared=!1,t.changeState=function(e,r){void 0===r&&(r=t.state.current),t.setState({status:e,current:r})},t}pt(t,e);var r=t.prototype;return r.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){return null==e.children?{current:null}:t.status===Et&&e.mode===Nt?{status:Et}:!t.current||((r=t.current)===(n=e.children)||B().isValidElement(r)&&B().isValidElement(n)&&null!=r.key&&r.key===n.key)?{current:B().cloneElement(e.children,{in:!0})}:{status:kt};var r,n},r.render=function(){var e,t=this.props,r=t.children,n=t.mode,o=this.state,l=o.status,a=o.current,s={children:r,current:a,changeState:this.changeState,status:l};switch(l){case Et:e=Pt[n](s);break;case kt:e=Rt[n](s);break;case yt:e=a}return B().createElement(vt.Provider,{value:{isMounting:!this.appeared}},e)},t}(B().Component);Dt.propTypes={},Dt.defaultProps={mode:Ot};var Bt=Dt;function Ft(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Mt=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return n=t,void((r=e).classList?r.classList.remove(n):"string"==typeof r.className?r.className=Ft(r.className,n):r.setAttribute("class",Ft(r.className&&r.className.baseVal||"",n)));var r,n}))},Ht=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,r){var n=t.resolveArguments(e,r),o=n[0],l=n[1];t.removeClasses(o,"exit"),t.addClass(o,l?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,r)},t.onEntering=function(e,r){var n=t.resolveArguments(e,r),o=n[0],l=n[1]?"appear":"enter";t.addClass(o,l,"active"),t.props.onEntering&&t.props.onEntering(e,r)},t.onEntered=function(e,r){var n=t.resolveArguments(e,r),o=n[0],l=n[1]?"appear":"enter";t.removeClasses(o,l),t.addClass(o,l,"done"),t.props.onEntered&&t.props.onEntered(e,r)},t.onExit=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"appear"),t.removeClasses(r,"enter"),t.addClass(r,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var r=t.resolveArguments(e)[0];t.addClass(r,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"exit"),t.addClass(r,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,r){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,r]},t.getClassNames=function(e){var r=t.props.classNames,n="string"==typeof r,o=n?(n&&r?r+"-":"")+e:r[e];return{baseClassName:o,activeClassName:n?o+"-active":r[e+"Active"],doneClassName:n?o+"-done":r[e+"Done"]}},t}pt(t,e);var r=t.prototype;return r.addClass=function(e,t,r){var n=this.getClassNames(t)[r+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===r&&o&&(n+=" "+o),"active"===r&&e&&ht(e),n&&(this.appliedClasses[t][r]=n,function(e,t){e&&t&&t.split(" ").forEach((function(t){return n=t,void((r=e).classList?r.classList.add(n):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,n)||("string"==typeof r.className?r.className=r.className+" "+n:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+n)));var r,n}))}(e,n))},r.removeClasses=function(e,t){var r=this.appliedClasses[t],n=r.base,o=r.active,l=r.done;this.appliedClasses[t]={},n&&Mt(e,n),o&&Mt(e,o),l&&Mt(e,l)},r.render=function(){var e=this.props,t=(e.classNames,gt(e,["classNames"]));return B().createElement(It,P({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(B().Component);Ht.defaultProps={classNames:""},Ht.propTypes={};var Vt=Ht,Ut=e=>{let{className:t,fillColor:r="black"}=e;return(0,l.createElement)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("g",{clipPath:"url(#clipThumbsUp)"},(0,l.createElement)("mask",{id:"maskThumbsUp","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"2",y:"-1",width:"20",height:"20"},(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.35 6.24998H13.5658L14.4366 2.06081L14.4641 1.76748C14.4641 1.39165 14.3083 1.04331 14.0608 0.795813L13.0891 -0.166687L7.05748 5.87415C6.71831 6.20415 6.51664 6.66248 6.51664 7.16665L2.84998 7.16665V16.425H6.51664V16.3333C6.51664 17.3416 7.34164 18.1666 8.34998 18.1666H16.6C17.3608 18.1666 18.0116 17.7083 18.2866 17.0483L21.055 10.5858C21.1375 10.375 21.1833 10.155 21.1833 9.91665V8.08331C21.1833 7.07498 20.3583 6.24998 19.35 6.24998ZM19.35 9.91665L16.6 16.3333H8.34998V7.16665L12.3283 3.18831L11.3108 8.08331H19.35V9.91665Z",fill:"white"})),(0,l.createElement)("g",{mask:"url(#maskThumbsUp)"},(0,l.createElement)("rect",{x:"0.999878",y:"-3.05176e-05",width:"22",height:"22",fill:r}))),(0,l.createElement)("defs",null,(0,l.createElement)("clipPath",{id:"clipThumbsUp"},(0,l.createElement)("rect",{width:"24",height:"24",fill:"white"}))))},jt=e=>{let{className:t,fillColor:r="black"}=e;return(0,l.createElement)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("g",{clipPath:"url(#clipThumbsDown)"},(0,l.createElement)("mask",{id:"maskThumbsDown","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"2",y:"5",width:"20",height:"20"},(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.65002 17.75H10.4342L9.56336 21.9392L9.53586 22.2325C9.53586 22.6083 9.69169 22.9567 9.93919 23.2042L10.9109 24.1667L16.9425 18.1258C17.2817 17.7958 17.4834 17.3375 17.4834 16.8333L21.15 16.8333L21.15 7.57499H17.4834V7.66666C17.4834 6.65832 16.6584 5.83332 15.65 5.83332H7.40003C6.63919 5.83332 5.98836 6.29165 5.71336 6.95166L2.94503 13.4142C2.86253 13.625 2.81669 13.845 2.81669 14.0833V15.9167C2.81669 16.925 3.64169 17.75 4.65002 17.75ZM4.65002 14.0833L7.40002 7.66666H15.65L15.65 16.8333L11.6717 20.8117L12.6892 15.9167H4.65002V14.0833Z",fill:"white"})),(0,l.createElement)("g",{mask:"url(#maskThumbsDown)"},(0,l.createElement)("rect",{x:"23.0001",y:"24",width:"22",height:"22",transform:"rotate(-180 23.0001 24)",fill:r}))),(0,l.createElement)("defs",null,(0,l.createElement)("clipPath",{id:"clipThumbsDown"},(0,l.createElement)("rect",{width:"24",height:"24",fill:"white"}))))};const Wt=e=>e?e>=1e7?`${(0,y.round)(e/1e6)}M`:e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e4?`${(0,y.round)(e/1e3)}K`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString():"0",zt=e=>{const{attributes:t,voteCount:r,apiAnswerId:n,onVote:o,disabled:a,isVotedOn:s,hideCount:i,fallbackStyles:c,isInEditor:u}=e,{className:d,type:m}=t,[f,p]=(0,D.useState)(0),g=()=>{!a&&o&&(p(1),o(n))},w="up"===m?Ut:jt,b=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return U()({"has-bg-color":e.backgroundColor,"has-text-color":e.textColor,"has-border-color":e.borderColor},r)}(t,"crowdsignal-forms-vote-item",d,{"is-voted-on":s,"is-disabled":a,"is-in-editor":u},`is-type-${m}`),v=((e,t)=>{const r=(0,y.isEmpty)(e.textColor)?t.textColor:e.textColor,n=(0,y.isEmpty)(e.backgroundColor)?t.backgroundColor:e.backgroundColor;return(0,y.mapKeys)({borderColor:e.borderColor,bgColor:n,textColor:r,votedColor:t.accentColor},((e,t)=>`--crowdsignal-forms-vote-${(0,y.kebabCase)(t)}`))})(t,c),h=r+f;return(0,l.createElement)("div",{className:b,onClick:g,onKeyPress:g,role:"button",style:v,tabIndex:0},(0,l.createElement)(w,{className:"crowdsignal-forms-vote-item__icon",fillColor:"currentColor"}),!i&&(0,l.createElement)(Bt,{mode:"in-out"},(0,l.createElement)(Vt,{key:f,classNames:"crowdsignal-forms-vote-item__count",timeout:300},(0,l.createElement)("div",{className:"crowdsignal-forms-vote-item__count"},Wt(h)))))};zt.propTypes={apiAnswerId:z().number,className:z().string,disabled:z().bool,isVotedOn:z().bool,onVote:z().func,type:z().string.isRequired,voteCount:z().number.isRequired};var qt=zt,$t=(0,H.compose)([we,st(["answerId"])])((e=>{const{attributes:t,className:r,fallbackStyles:n,renderStyleProbe:o}=e;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(mt,e),(0,l.createElement)(qt,{attributes:t,fallbackStyles:n,className:r,voteCount:0,isInEditor:!0,type:t.type}),o())})),Kt={title:(0,a.__)("Vote Item","crowdsignal-forms"),description:(0,a.__)("Allow your audience to rate your work or express their opinion — powered by Crowdsignal.","crowdsignal-forms"),category:"crowdsignal-forms",parent:["crowdsignal-forms/vote"],icon:(0,l.createElement)(Xe,null),edit:$t,attributes:{answerId:{type:"string",default:null},type:{type:"string"},textColor:{type:"string"},backgroundColor:{type:"string"},borderColor:{type:"string"}}};const Zt=e=>{let{showBranding:t,referralCode:r}=e;return(0,l.createElement)("div",{className:"crowdsignal-forms__branding"},t&&(0,l.createElement)("a",{className:"crowdsignal-forms__branding-link with-external-icon",href:`https://crowdsignal.com?ref=${r}`,target:"blank",rel:"noopener noreferrer"},(0,a.__)("Powered by Crowdsignal","crowdsignal-forms")),!t&&(0,l.createElement)("span",{className:"crowdsignal-forms__branding-link"}," "))};Zt.propTypes={showBranding:z().bool,referralCode:z().string.isRequired};var Gt=Zt,Qt=e=>{let{active:t,className:r}=e;const n=U()("crowdsignal-forms-applause__animation",r,{"is-active":t});return(0,l.createElement)("svg",{className:n,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("g",{className:"crowdsignal-forms-applause__animation-right"},(0,l.createElement)("path",{className:"crowdsignal-forms-applause__animation-inner-fill",fillRule:"evenodd",clipRule:"evenodd",d:"M24.5287 18.5813L21.719 22.432C20.771 23.7312 18.9509 24.0157 17.6517 23.0676L9.50948 17.1265C8.6982 16.5345 8.52021 15.3957 9.11218 14.5844C9.18511 14.4845 9.26979 14.3931 9.35606 14.3119L9.19145 14.1918C8.38017 13.5998 8.20218 12.461 8.79415 11.6497C8.93571 11.4557 9.10825 11.2933 9.30319 11.1743C9.10822 10.6266 9.17716 10.0013 9.54606 9.49567C10.1123 8.71967 11.1811 8.52659 11.9839 9.03133C12.0392 8.91852 12.1004 8.81 12.1733 8.71006C12.7653 7.89878 13.9042 7.72079 14.7154 8.31276L20.3297 12.4094L20.611 10.4435C20.6949 9.84704 21.1499 9.35925 21.7392 9.23069L23.703 8.79878L25.0454 16.3547C25.1822 17.1302 24.992 17.9464 24.5287 18.5813Z"}),(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.5287 18.5813L21.719 22.432C20.771 23.7312 18.9509 24.0157 17.6517 23.0676L9.50948 17.1265C8.6982 16.5345 8.52021 15.3957 9.11218 14.5844C9.18511 14.4845 9.26979 14.3931 9.35606 14.3119L9.19145 14.1918C8.38017 13.5998 8.20218 12.461 8.79415 11.6497C8.93571 11.4557 9.10825 11.2933 9.30319 11.1743C9.10822 10.6266 9.17716 10.0013 9.54606 9.49567C10.1123 8.71967 11.1811 8.52659 11.9839 9.03133C12.0392 8.91852 12.1004 8.81 12.1733 8.71006C12.7653 7.89878 13.9042 7.72079 14.7154 8.31276L20.3297 12.4094L20.611 10.4435C20.6949 9.84704 21.1499 9.35925 21.7392 9.23069L23.703 8.79878L25.0454 16.3547C25.1822 17.1302 24.992 17.9464 24.5287 18.5813ZM23.6104 16.605L22.538 10.5434L22.0547 10.6502L21.4234 15.0093L13.8574 9.48855C13.8574 9.48855 13.4691 9.4034 13.349 9.56801C13.2288 9.73262 13.2638 9.95632 13.4284 10.0764L17.667 13.1693L16.8091 14.345L11.2301 10.2742C11.0655 10.1541 10.8418 10.189 10.7217 10.3536C10.6016 10.5182 10.6365 10.7419 10.8012 10.862L16.3802 14.9329L15.5222 16.1087L10.4782 12.4282C10.3136 12.3081 10.0899 12.343 9.96978 12.5076C9.84967 12.6722 9.88463 12.8959 10.0492 13.0161L15.0933 16.6966L14.2353 17.8723L10.7962 15.3629C10.6316 15.2428 10.4079 15.2777 10.2878 15.4423C10.1677 15.607 10.2027 15.8307 10.3673 15.9508L18.5094 21.8919C19.1561 22.3638 20.0713 22.2207 20.5431 21.5741L23.3571 17.7175C23.5888 17.4001 23.6766 16.9957 23.6104 16.605Z"})),(0,l.createElement)("g",{className:"crowdsignal-forms-applause__animation-left"},(0,l.createElement)("path",{className:"crowdsignal-forms-applause__animation-inner-fill",fillRule:"evenodd",clipRule:"evenodd",d:"M21.2292 18.7813L18.4195 22.632C17.4715 23.9312 15.6513 24.2157 14.3521 23.2676L6.20992 17.3265C5.39864 16.7345 5.22065 15.5957 5.81262 14.7844C5.88554 14.6845 5.97023 14.5931 6.0565 14.5119L5.89189 14.3918C5.08061 13.7998 4.90262 12.661 5.49459 11.8497C5.63615 11.6557 5.80869 11.4933 6.00363 11.3743C5.80866 10.8266 5.8776 10.2013 6.2465 9.69567C6.81274 8.91967 7.88153 8.72658 8.68439 9.23133C8.73968 9.11852 8.80084 9.01 8.87377 8.91006C9.46573 8.09878 10.6046 7.92079 11.4159 8.51276L17.0302 12.6094L17.3115 10.6435C17.3953 10.047 17.8504 9.55925 18.4397 9.43069L20.4034 8.99877L21.7458 16.5547C21.8826 17.3302 21.6925 18.1464 21.2292 18.7813Z"}),(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.2292 18.7813L18.4195 22.632C17.4715 23.9312 15.6513 24.2157 14.3521 23.2676L6.20992 17.3265C5.39864 16.7345 5.22065 15.5957 5.81262 14.7844C5.88554 14.6845 5.97023 14.5931 6.0565 14.5119L5.89189 14.3918C5.08061 13.7998 4.90262 12.661 5.49459 11.8497C5.63615 11.6557 5.80869 11.4933 6.00363 11.3743C5.80866 10.8266 5.8776 10.2013 6.2465 9.69567C6.81274 8.91967 7.88153 8.72658 8.68439 9.23133C8.73968 9.11852 8.80084 9.01 8.87377 8.91006C9.46573 8.09878 10.6046 7.92079 11.4159 8.51276L17.0302 12.6094L17.3115 10.6435C17.3953 10.047 17.8504 9.55925 18.4397 9.43069L20.4034 8.99877L21.7458 16.5547C21.8826 17.3302 21.6925 18.1464 21.2292 18.7813ZM20.3108 16.805L19.2384 10.7434L18.7551 10.8502L18.1239 15.2093L10.5578 9.68854C10.5578 9.68854 10.1695 9.6034 10.0494 9.76801C9.92928 9.93261 9.96425 10.1563 10.1289 10.2764L14.3675 13.3692L13.5096 14.545L7.93056 10.4742C7.76595 10.354 7.54224 10.389 7.42213 10.5536C7.30202 10.7182 7.33699 10.9419 7.50159 11.062L13.0806 15.1329L12.2227 16.3087L7.17864 12.6282C7.01403 12.5081 6.79033 12.543 6.67022 12.7076C6.55011 12.8722 6.58507 13.0959 6.74968 13.216L11.7937 16.8965L10.9358 18.0723L7.49667 15.5629C7.33206 15.4428 7.10836 15.4777 6.98825 15.6423C6.86814 15.8069 6.9031 16.0307 7.06771 16.1508L15.2099 22.0919C15.8566 22.5638 16.7717 22.4207 17.2436 21.7741L20.0576 17.9175C20.2892 17.6001 20.3771 17.1957 20.3108 16.805Z"})),(0,l.createElement)("g",{className:"crowdsignal-forms-applause__animation-wave-small"},(0,l.createElement)("rect",{x:"15.4854",y:"4.42176",width:"1.5",height:"3",transform:"rotate(8 15.4854 4.42176)"}),(0,l.createElement)("rect",{x:"19.9369",y:"5.15548",width:"1.5",height:"3",transform:"rotate(43 19.9369 5.15548)"}),(0,l.createElement)("rect",{x:"11.1523",y:"4.78963",width:"1.5",height:"3",transform:"rotate(-27 11.1523 4.78963)"})),(0,l.createElement)("g",{className:"crowdsignal-forms-applause__animation-wave-large"},(0,l.createElement)("rect",{x:"23.453",y:"2.41095",width:"1.5",height:"3",transform:"rotate(38 23.453 2.41095)"}),(0,l.createElement)("rect",{x:"26.9413",y:"5.27211",width:"1.5",height:"3",transform:"rotate(73 26.9413 5.27211)"}),(0,l.createElement)("rect",{x:"19.5165",y:"0.562988",width:"1.5",height:"3",transform:"rotate(3 19.5165 0.562988)"}),(0,l.createElement)("rect",{width:"1.5",height:"3",transform:"matrix(-0.788011 0.615662 0.615662 0.788011 8.52597 2.41095)"}),(0,l.createElement)("rect",{width:"1.5",height:"3",transform:"matrix(-0.292372 0.956305 0.956305 0.292372 5.03775 5.27211)"}),(0,l.createElement)("rect",{width:"1.5",height:"3",transform:"matrix(-0.99863 0.052336 0.052336 0.99863 12.4625 0.562988)"})))};const Yt=e=>{const{attributes:t,fallbackStyles:r,renderStyleProbe:n}=e,o=t.apiPollData?t.apiPollData.id:null,{hasVoted:a,vote:s}=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=`cs-poll-${e}`,[o,l]=(0,D.useState)(!1),[a,s]=(0,D.useState)(!1),[i,c]=(0,D.useState)("");return(0,D.useEffect)((()=>{t&&void 0!==$.get(n)&&(s(!0),c($.get(n)))}),[]),{hasVoted:a,isVoting:o,vote:async function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{l(!0);const i=await(async e=>{const t=(new Date).getTime(),r=await window.fetch(`https://poll.fm/n/5430eeac3911395001d731d9702fc38b/${e}?${t}&format=json`);if(!r.ok)throw new O;const n=await r.json();if(!n.nonce)throw new O;return n.nonce})(e);if(await(async(e,t,r,n)=>{const o=r.join(","),l=await window.fetch(`https://polls.polldaddy.com/vote-js.php?format=json&p=${t}&b=1&a=${o}&o=&va=16&cookie=0&n=${e}&url=${encodeURIComponent(window.location)}&vi=${n}`);if(!l.ok)throw new O;const a=await l.json();if("error"===a.status)throw new I(a.error)})(i,e,o,a),s(!0),t){const e=r?o.join(","):(new Date).getTime();$.set(n,e,{sameSite:"Strict",expires:365}),c(e)}}finally{l(!1)}},storedCookieValue:i}}(o,!0),[i,c]=(0,D.useState)(0),[u,d]=(0,D.useState)(0),[m,f]=(0,D.useState)(null),[p,g]=(0,D.useState)(!1),[w,b]=(0,D.useState)(null),{results:v}=K(o),h=Se(t.pollStatus,t.closedAfterDateTime),_=()=>{if(null===o||h)return;w&&clearTimeout(w),g(!0),b(setTimeout((()=>{g(!1)}),200));const e=u+1;d(e),c(i+1);const r=t.apiPollData.answers[0].id;null!==m&&clearTimeout(m);const n=setTimeout((()=>{s([r],e),f(null),d(0)}),1e3);f(n)},C=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return U()({"has-bg-color":e.backgroundColor,"has-text-color":e.textColor,"has-border-color":e.borderColor},r)}(t,"crowdsignal-forms-applause",t.className,`size-${t.size}`,{"is-closed":h}),E=((e,t)=>{const r=(0,y.isEmpty)(e.textColor)?t.textColor:e.textColor;return(0,y.mapKeys)({bgColor:e.backgroundColor||t.backgroundColor,textColor:r,hoverColor:t.accentColor,borderRadius:`${e.borderRadius||0}px`,borderWidth:`${e.borderWidth||0}px`,borderColor:e.borderColor},((e,t)=>`--crowdsignal-forms-applause-${(0,y.kebabCase)(t)}`))})(t,r),k=(null!==v?(0,y.values)(v)[0]:0)+i;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:C,style:E,onClick:_,onKeyPress:_,role:"button",tabIndex:0},(0,l.createElement)(Qt,{active:p}),(0,l.createElement)("p",{className:"crowdsignal-forms-applause__count"},Wt(k)," Claps"),n()),(0,l.createElement)(Gt,{showBranding:a&&!t.hideBranding,referralCode:"cs-forms-applause"}))};Yt.propTypes={className:z().string};var Xt=we(Yt);const Jt=Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"}),er=[{title:(0,a.__)("Small","crowdsignal-forms"),size:"small"},{title:(0,a.__)("Medium","crowdsignal-forms"),size:"medium"},{title:(0,a.__)("Large","crowdsignal-forms"),size:"large"}],tr={position:"bottom right",isAlternate:!0,className:"crowdsignal-forms-vote__size-dropdown"};var rr=e=>{let{attributes:t,setAttributes:r}=e;const n=(0,y.get)(t,"size","medium"),o=er,[s,i]=(0,D.useState)(!1),c=()=>i(!s);return(0,l.createElement)(F.BlockControls,null,(0,l.createElement)(M.ToolbarGroup,{isCollapsed:!0,icon:nt,label:(0,a.__)("Change block size","crowdsignal-forms"),popoverProps:tr,controls:o.map((e=>{const{size:t}=e,o=n===t;return{...e,isActive:o,role:"menuitemradio",onClick:()=>r({size:t})}}))}),(0,l.createElement)(M.Toolbar,{controls:[{icon:ot,onClick:c}]}),s&&(0,l.createElement)(M.Popover,{className:"crowdsignal-forms__border-popover",onFocusOutside:c},(0,l.createElement)("div",{className:"crowdsignal-forms__row"},(0,l.createElement)(M.TextControl,{label:(0,a.__)("Border thickness","crowdsignal-forms"),type:"number",className:"crowdsignal-forms__small-text-input",onChange:e=>{r({borderWidth:parseInt(e,10)||0})},value:t.borderWidth}),(0,l.createElement)(M.TextControl,{label:(0,a.__)("Corner radius","crowdsignal-forms"),type:"number",className:"crowdsignal-forms__small-text-input",onChange:e=>{r({borderRadius:parseInt(e,10)||0})},value:t.borderRadius}))))},nr=e=>{let{attributes:t,setAttributes:r,viewResultsUrl:n,shouldPromote:o,signalWarning:s}=e;const i=""!==n;return(0,l.createElement)(F.InspectorControls,null,(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Results","crowdsignal-forms"),initialOpen:!0},(0,l.createElement)("p",null,i?(0,a.__)("Manage results on ","crowdsignal-forms"):(0,a.__)("Publish this post to enable results on ","crowdsignal-forms"),(0,l.createElement)(M.ExternalLink,{href:"https://www.crowdsignal.com"},"crowdsignal.com")),(0,l.createElement)("p",null,(0,l.createElement)(M.Button,{href:n,isSecondary:!0,target:"_blank",disabled:!i},(0,a.__)("View results","crowdsignal-forms"))),(0,l.createElement)(M.TextControl,{value:t.title,label:(0,a.__)("Title of the applause block","crowdsignal-forms"),onChange:e=>r({title:e})}),o&&(0,l.createElement)(Te,{signalWarning:s})),(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Settings","crowdsignal-forms")},(0,l.createElement)(M.SelectControl,{value:t.pollStatus,label:(0,a.__)("Status","crowdsignal-forms"),options:[{label:(0,a.__)("Open","crowdsignal-forms"),value:Jt.OPEN},{label:(0,a.__)("Closed after","crowdsignal-forms"),value:Jt.CLOSED_AFTER},{label:(0,a.__)("Closed","crowdsignal-forms"),value:Jt.CLOSED}],onChange:e=>{(0,y.includes)(Jt,e)&&r({closedAfterDateTime:e===Jt.CLOSED_AFTER?new Date((new Date).getTime()+864e5).toISOString():null,pollStatus:e})}}),Jt.CLOSED_AFTER===t.pollStatus&&(0,l.createElement)(M.TimePicker,{currentTime:t.closedAfterDateTime,label:(0,a.__)("Close applause block on","crowdsignal-forms"),onChange:e=>{const t=new Date(e);r({closedAfterDateTime:t.toISOString()})},is12Hour:!0})),(0,l.createElement)(F.PanelColorSettings,{title:(0,a.__)("Styling","crowdsignal-forms"),initialOpen:!0,colorSettings:[{value:t.textColor,onChange:e=>r({textColor:e}),label:(0,a.__)("Text color","crowdsignal-forms")},{value:t.backgroundColor,onChange:e=>r({backgroundColor:e}),label:(0,a.__)("Background color","crowdsignal-forms")},{value:t.borderColor,onChange:e=>r({borderColor:e}),label:(0,a.__)("Border color","crowdsignal-forms")}]}))},or=(0,H.compose)([$e,st(["pollId","answerId"])])((e=>{const{attributes:t,setAttributes:r,pollDataFromApi:n}=e,o=n?n.viewResultsUrl:"";it(e.name,(0,a.__)("Untitled Applause","crowdsignal-forms"),t,r);const s=(0,i.useSelect)((e=>e(N).getAccountInfo())),c=(0,y.get)(s,["signalCount","shouldDisplay"]),u=c&&(0,y.get)(s,["signalCount","count"])>=(0,y.get)(s,["signalCount","userLimit"]);return(0,l.createElement)(Ue,{blockIcon:null,blockName:(0,a.__)("Crowdsignal Applause","crowdsignal-forms")},(0,l.createElement)(nr,P({},e,{shouldPromote:c,signalWarning:u,viewResultsUrl:o})),(0,l.createElement)(rr,e),(0,l.createElement)(Xt,e))})),lr={pollId:{type:"string",default:null},hideBranding:{type:"boolean",default:!1},title:{type:"string",default:null},answerId:{type:"string",default:null},size:{type:"string",default:"medium"},pollStatus:{type:"string",default:Jt.OPEN},closedAfterDateTime:{type:"string",default:null},textColor:{type:"string"},backgroundColor:{type:"string"},borderColor:{type:"string"},borderWidth:{type:"number",default:0},borderRadius:{type:"number",default:0}},ar={title:(0,a.__)("Applause","crowdsignal-forms"),description:(0,a.__)("Let your audience cheer with a big round of applause — powered by Crowdsignal.","crowdsignal-forms"),category:"crowdsignal-forms",keywords:["crowdsignal",(0,a.__)("applause","crowdsignal-forms"),(0,a.__)("cheer","crowdsignal-forms"),(0,a.__)("cheering","crowdsignal-forms"),(0,a.__)("clap","crowdsignal-forms"),(0,a.__)("feedback","crowdsignal-forms"),(0,a.__)("kudos","crowdsignal-forms"),(0,a.__)("like","crowdsignal-forms"),(0,a.__)("opinion","crowdsignal-forms"),(0,a.__)("praise","crowdsignal-forms"),(0,a.__)("rating","crowdsignal-forms"),(0,a.__)("upvote","crowdsignal-forms"),(0,a.__)("upvoting","crowdsignal-forms"),(0,a.__)("votes","crowdsignal-forms"),(0,a.__)("voting","crowdsignal-forms")],icon:(0,l.createElement)((()=>(0,l.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("g",{clipPath:"url(#clip0)"},(0,l.createElement)("rect",{width:"24",height:"24",fill:"white"}),(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5284 16.5813L18.7187 20.432C17.7707 21.7312 15.9506 22.0157 14.6513 21.0676L6.50915 15.1265C5.69788 14.5345 5.51988 13.3957 6.11185 12.5844C6.18478 12.4845 6.26946 12.3931 6.35573 12.3119L6.19112 12.1918C5.37984 11.5998 5.20185 10.461 5.79382 9.64968C5.93538 9.45568 6.10792 9.29329 6.30287 9.17428C6.1079 8.62662 6.17683 8.00125 6.54574 7.49567C7.11197 6.71967 8.18077 6.52659 8.98362 7.03133C9.03891 6.91852 9.10007 6.81 9.173 6.71006C9.76497 5.89878 10.9038 5.72079 11.7151 6.31276L17.3294 10.4094L17.6107 8.44349C17.6946 7.84704 18.1496 7.35925 18.7389 7.23069L20.7027 6.79878L22.045 14.3547C22.1819 15.1302 21.9917 15.9464 21.5284 16.5813ZM20.61 14.605L19.5377 8.54337L19.0543 8.65016L18.4231 13.0093L10.857 7.48855C10.857 7.48855 10.4687 7.4034 10.3486 7.56801C10.2285 7.73262 10.2635 7.95632 10.4281 8.07643L14.6667 11.1693L13.8088 12.345L8.22979 8.27416C8.06518 8.15405 7.84147 8.18902 7.72136 8.35362C7.60126 8.51823 7.63622 8.74194 7.80082 8.86204L13.3798 12.9329L12.5219 14.1087L7.47787 10.4282C7.31327 10.3081 7.08956 10.343 6.96945 10.5076C6.84934 10.6722 6.8843 10.8959 7.04891 11.0161L12.0929 14.6966L11.235 15.8723L7.7959 13.3629C7.6313 13.2428 7.40759 13.2777 7.28748 13.4423C7.16737 13.607 7.20233 13.8307 7.36694 13.9508L15.5091 19.8919C16.1558 20.3638 17.0709 20.2207 17.5428 19.5741L20.3568 15.7175C20.5884 15.4001 20.6763 14.9957 20.61 14.605Z"}),(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.2289 16.7813L15.4192 20.632C14.4711 21.9312 12.651 22.2157 11.3518 21.2676L3.20959 15.3265C2.39831 14.7345 2.22032 13.5957 2.81229 12.7844C2.88522 12.6845 2.9699 12.5931 3.05617 12.5119L2.89156 12.3918C2.08028 11.7998 1.90229 10.661 2.49426 9.84968C2.63582 9.65567 2.80836 9.49329 3.0033 9.37428C2.80834 8.82662 2.87727 8.20125 3.24618 7.69567C3.81241 6.91967 4.88121 6.72658 5.68406 7.23133C5.73935 7.11852 5.80051 7.01 5.87344 6.91006C6.46541 6.09878 7.60427 5.92079 8.41555 6.51276L14.0298 10.6094L14.3111 8.64348C14.395 8.04703 14.85 7.55925 15.4393 7.43069L17.4031 6.99877L18.7455 14.5547C18.8823 15.3302 18.6921 16.1464 18.2289 16.7813Z",fill:"white"}),(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.2289 16.7813L15.4192 20.632C14.4711 21.9312 12.651 22.2157 11.3518 21.2676L3.20959 15.3265C2.39831 14.7345 2.22032 13.5957 2.81229 12.7844C2.88522 12.6845 2.9699 12.5931 3.05617 12.5119L2.89156 12.3918C2.08028 11.7998 1.90229 10.661 2.49426 9.84968C2.63582 9.65567 2.80836 9.49329 3.0033 9.37428C2.80834 8.82662 2.87727 8.20125 3.24618 7.69567C3.81241 6.91967 4.88121 6.72658 5.68406 7.23133C5.73935 7.11852 5.80051 7.01 5.87344 6.91006C6.46541 6.09878 7.60427 5.92079 8.41555 6.51276L14.0298 10.6094L14.3111 8.64348C14.395 8.04703 14.85 7.55925 15.4393 7.43069L17.4031 6.99877L18.7455 14.5547C18.8823 15.3302 18.6921 16.1464 18.2289 16.7813ZM17.3105 14.805L16.2381 8.74337L15.7548 8.85016L15.1235 13.2093L7.55749 7.68854C7.55749 7.68854 7.16918 7.6034 7.04907 7.76801C6.92896 7.93261 6.96392 8.15632 7.12853 8.27643L11.3672 11.3692L10.5092 12.545L4.93023 8.47416C4.76562 8.35405 4.54191 8.38901 4.4218 8.55362C4.3017 8.71823 4.33666 8.94193 4.50126 9.06204L10.0803 13.1329L9.22235 14.3087L4.17831 10.6282C4.0137 10.5081 3.79 10.543 3.66989 10.7076C3.54978 10.8722 3.58474 11.0959 3.74935 11.216L8.79338 14.8965L7.93546 16.0723L4.49634 13.5629C4.33173 13.4428 4.10803 13.4777 3.98792 13.6423C3.86781 13.8069 3.90277 14.0307 4.06738 14.1508L12.2096 20.0919C12.8562 20.5638 13.7714 20.4207 14.2432 19.7741L17.0572 15.9175C17.2889 15.6001 17.3767 15.1957 17.3105 14.805Z"}),(0,l.createElement)("rect",{x:"12.4851",y:"1.42175",width:"1.5",height:"3",transform:"rotate(8 12.4851 1.42175)"}),(0,l.createElement)("rect",{x:"16.9365",y:"2.15547",width:"1.5",height:"3",transform:"rotate(43 16.9365 2.15547)"}),(0,l.createElement)("rect",{x:"8.15195",y:"1.78963",width:"1.5",height:"3",transform:"rotate(-27 8.15195 1.78963)"})),(0,l.createElement)("defs",null,(0,l.createElement)("clipPath",{id:"clip0"},(0,l.createElement)("rect",{width:"24",height:"24",fill:"white"}))))),null),edit:or,attributes:lr,example:{attributes:{size:"large"}}};const sr="rating",ir="feedback",cr=Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"});var ur={backgroundColor:{type:"string"},buttonColor:{type:"string"},buttonTextColor:{type:"string"},feedbackPlaceholder:{type:"string",default:(0,a.__)("Please help us understand your rating","crowdsignal-forms")},feedbackQuestion:{type:"string",default:(0,a.__)("Thanks so much for your response! How could we do better?","crowdsignal-forms")},hideBranding:{type:"boolean",default:!1},highRatingLabel:{type:"string",default:(0,a.__)("Extremely likely","crowdsignal-forms")},lowRatingLabel:{type:"string",default:(0,a.__)("Not likely at all","crowdsignal-forms")},ratingQuestion:{type:"string",default:(0,a.__)("How likely is it that you would recommend this project to a friend or colleague?","crowdsignal-forms")},submitButtonLabel:{type:"string",default:(0,a.__)("Submit","crowdsignal-forms")},surveyId:{type:"number",default:null},textColor:{type:"string"},title:{type:"string",default:""},viewThreshold:{type:"string",default:2},status:{type:"string",default:cr.OPEN},closedAfterDateTime:{type:"string",default:null},isExample:{type:"boolean",default:!1}},dr=window.wp.editor;const mr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,n]=(0,D.useState)(!1),o=(0,D.useRef)(0),l=(0,D.useCallback)((0,y.debounce)(((t,r)=>e(t).catch(r)),1500),[]),a=(0,D.useCallback)((function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n(!1),l(t,(()=>{e===o.current&&(r<3?a(e,r+1):n(!0))}))}),(0,y.values)(t));return(0,D.useEffect)((()=>{0!=o.current++&&a(o.current)}),(0,y.values)(t)),{error:r,save:()=>a(o.current)}},fr=e=>new Promise(((t,r)=>{const n=setTimeout((()=>r(new Error("Request timed out"))),1e4);e.then(t,r).finally((()=>clearTimeout(n)))}));var pr=e=>{let{attributes:t,setAttributes:r,shouldPromote:n,signalWarning:o}=e;const s=`https://app.crowdsignal.com/surveys/${t.surveyId}/report/overview`,i=e=>t=>r({[e]:t});return(0,l.createElement)(F.InspectorControls,null,(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Results","crowdsignal-forms"),initialOpen:!0},(0,l.createElement)("p",null,t.surveyId?(0,a.__)("Manage results on ","crowdsignal-forms"):(0,a.__)("Save the block to track results on ","crowdsignal-forms"),(0,l.createElement)(M.ExternalLink,{href:"https://www.crowdsignal.com"},"crowdsignal.com")),(0,l.createElement)("p",null,(0,l.createElement)(M.Button,{isSecondary:!0,disabled:!t.surveyId,href:s,target:"blank"},(0,a.__)("View results","crowdsignal-forms"))),(0,l.createElement)(M.TextControl,{label:(0,a.__)("Title (optional)","crowdsignal-forms"),onChange:e=>r({title:e}),value:(0,Z.decodeEntities)(t.title)}),n&&(0,l.createElement)(Te,{signalWarning:o})),(0,l.createElement)(F.PanelColorSettings,{title:(0,a.__)("Block styling","crowdsignal-forms"),initialOpen:!1,colorSettings:[{label:(0,a.__)("Background color","crowdsignal-forms"),onChange:i("backgroundColor"),value:t.backgroundColor},{label:(0,a.__)("Text color","crowdsignal-forms"),onChange:i("textColor"),value:t.textColor},{label:(0,a.__)("Button color","crowdsignal-forms"),onChange:i("buttonColor"),value:t.buttonColor},{label:(0,a.__)("Button text color","crowdsignal-forms"),onChange:i("buttonTextColor"),value:t.buttonTextColor}]}),(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Settings","crowdsignal-forms"),initialOpen:!1},(0,l.createElement)(M.SelectControl,{value:t.status,label:(0,a.__)("Status","crowdsignal-forms"),options:[{label:(0,a.__)("Open","crowdsignal-forms"),value:cr.OPEN},{label:(0,a.__)("Closed after","crowdsignal-forms"),value:cr.CLOSED_AFTER},{label:(0,a.__)("Closed","crowdsignal-forms"),value:cr.CLOSED}],onChange:e=>r({status:e}),help:cr.CLOSED_AFTER===t.status&&null!==t.closedAfterDateTime&&(new Date).toISOString()>t.closedAfterDateTime?"Currently closed as date has passed":""}),cr.CLOSED_AFTER===t.status&&(0,l.createElement)(M.DateTimePicker,{currentDate:t.closedAfterDateTime&&new Date(t.closedAfterDateTime)||new Date,label:(0,a.__)("Close on","crowdsignal-forms"),onChange:e=>{const t=new Date(e);r({closedAfterDateTime:t.toISOString()})},is12Hour:!0})))},gr=e=>{let{attributes:t,currentView:r,onViewChange:n,setAttributes:o}=e;const[s,i]=(0,D.useState)(!1),c=e=>()=>n(e);return(0,l.createElement)(F.BlockControls,null,(0,l.createElement)(M.ToolbarGroup,{label:(0,a.__)("Current view","crowdsignal-forms")},(0,l.createElement)(M.ToolbarButton,{className:"crowdsignal-forms-nps__toolbar-toggle",isActive:r===sr,label:(0,a.__)("Rating","crowdsignal-forms"),onClick:c(sr)},(0,a.__)("Rating","crowdsignal-forms")),(0,l.createElement)(M.ToolbarButton,{className:"crowdsignal-forms-nps__toolbar-toggle",isActive:r===ir,label:(0,a.__)("Feedback","crowdsignal-forms"),onClick:c(ir)},(0,a.__)("Feedback","crowdsignal-forms"))),(0,l.createElement)(M.ToolbarGroup,null,(0,l.createElement)(M.ToolbarButton,{className:"crowdsignal-forms-nps__toolbar-popover-button",icon:"visibility",label:(0,a.__)("Set view threshold","crowdsignal-forms"),onClick:()=>i(!0)},s&&(0,l.createElement)(M.Popover,{onClose:()=>i(!1)},(0,l.createElement)("div",{className:"crowdsignal-forms-nps__toolbar-popover"},(0,l.createElement)(M.TextControl,{label:(0,a.__)("Show this block after __ visits:","crowdsignal-forms"),value:t.viewThreshold,onChange:e=>o({viewThreshold:e}),type:"number",min:"1"}))))))};const wr=(e,t)=>(0,y.mapKeys)({backgroundColor:e.backgroundColor||"#ffffff",buttonColor:e.buttonColor||t.accentColor,buttonTextColor:e.buttonTextColor||t.textColorInverted,textColor:e.textColor||t.textColor,textSize:t.textSize},((e,t)=>`--crowdsignal-forms-${(0,y.kebabCase)(t)}`));var br=e=>{let{retryHandler:t}=e;return(0,l.createElement)(Ke,{status:"error",icon:"warning",isDismissible:!1,actions:[{className:"is-destructive",label:(0,a.__)("Retry","crowdsignal-forms"),onClick:t}]},(0,a.__)("Unfortunately, the block couldn't be saved to Crowdsignal.com.","crowdsignal-forms"))},vr=()=>(0,l.createElement)(M.Tooltip,{text:(0,l.createElement)("span",null,(0,a.__)("Hide Crowdsignal ads","crowdsignal-forms"),(0,l.createElement)("br",null),(0,a.__)("and get unlimited","crowdsignal-forms"),(0,l.createElement)("br",null),(0,a.__)("signals","crowdsignal-forms")," -"," ",(0,l.createElement)("a",{href:"https://crowdsignal.com/pricing",target:"_blank",rel:"noopener noreferrer"},(0,a.__)("Upgrade","crowdsignal-forms"))),position:"top center"},(0,l.createElement)("a",{href:"https://crowdsignal.com/pricing",target:"_blank",rel:"noopener noreferrer",className:"crowdsignal-forms__branding-promote"},(0,a.__)("Hide","crowdsignal-forms"))),hr=(0,H.compose)([(0,i.withSelect)((e=>{let t=e("core/editor").getPermalink();return t||(t=e("core").getSite()&&e("core").getSite().url),{sourceLink:t}})),we])((e=>{const[t,r]=(0,D.useState)(sr),{attributes:n,clientId:o,fallbackStyles:s,isSelected:c,setAttributes:u,renderStyleProbe:d,sourceLink:m}=e,{feedbackQuestion:f,ratingQuestion:p,surveyId:g,title:w,isExample:b,viewThreshold:v}=n,{error:h,save:_}=mr((async e=>{(0,i.dispatch)("core/editor").lockPostSaving(o);try{const t=await(e=>fr(T()({path:(0,y.trimEnd)(`/crowdsignal-forms/v1/nps/${e.surveyId||""}`,"/"),method:"POST",data:e})))({feedbackQuestion:e.feedbackQuestion,ratingQuestion:e.ratingQuestion,sourceLink:e.sourceLink,surveyId:e.surveyId,title:e.title||e.ratingQuestion});e.surveyId||u({surveyId:t.surveyId})}finally{(0,i.dispatch)("core/editor").unlockPostSaving(o)}}),{feedbackQuestion:f,ratingQuestion:p,sourceLink:m,surveyId:g,title:w});(0,D.useEffect)((()=>{b||n.surveyId||_()}),[]),(0,D.useEffect)((()=>{c||r(sr)}),[c]);const C=e=>t=>u({[e]:t}),E=U()("crowdsignal-forms-nps",{"is-inactive":!b&&!c}),k=(0,i.useSelect)((e=>e(N).getAccountInfo())),S=(0,y.get)(k,"capabilities",[]).includes("hide-branding"),L=(0,y.get)(k,["signalCount","shouldDisplay"]),x=L&&(0,y.get)(k,["signalCount","count"])>=(0,y.get)(k,["signalCount","userLimit"]);return(0,l.createElement)(Ue,{blockIcon:null,blockName:(0,a.__)("Crowdsignal NPS","crowdsignal-forms")},(0,l.createElement)(gr,P({currentView:t,onViewChange:r},e)),(0,l.createElement)(pr,P({shouldPromote:L,signalWarning:x},e)),!b&&x&&(0,l.createElement)(Ze,null),!b&&h&&(0,l.createElement)(br,{retryHandler:_}),!b&&(0,l.createElement)(Ke,{isDismissible:!1,icon:"visibility",componentActions:[(0,l.createElement)(dr.PostPreviewButton,{key:1,className:["is-secondary","components-notice__action","crowdsignal-forms-nps__preview-button",n.surveyId?"":"is-disabled"],textContent:(0,a.__)("Preview","crowdsignal-forms")})]},(0,a.sprintf)(/* translators: %d: number of pageviews */
(0,a._n)("This block will appear as a popup window to people who have visited this page at least %d time.","This block will appear as a popup window to people who have visited this page at least %d times.",v,"crowdsignal-forms"),v)),(t===sr||!c)&&(0,l.createElement)("div",{className:E,style:wr(n,s)},(0,l.createElement)(F.RichText,{tagName:"h3",className:"crowdsignal-forms-nps__question",placeholder:(0,a.__)("Enter your rating question","crowdsignal-forms"),onChange:C("ratingQuestion"),value:p,allowedFormats:[]}),(0,l.createElement)("div",{className:"crowdsignal-forms-nps__rating"},(0,l.createElement)("div",{className:"crowdsignal-forms-nps__rating-labels"},(0,l.createElement)(F.RichText,{tagName:"span",placeholder:(0,a.__)("Not likely","crowdsignal-forms"),onChange:C("lowRatingLabel"),value:n.lowRatingLabel,allowedFormats:[],multiline:!1,disableLineBreaks:!0}),(0,l.createElement)(F.RichText,{tagName:"span",placeholder:(0,a.__)("Very likely","crowdsignal-forms"),onChange:C("highRatingLabel"),value:n.highRatingLabel,allowedFormats:[],multiline:!1,disableLineBreaks:!0})),(0,l.createElement)("div",{className:"crowdsignal-forms-nps__rating-scale"},(0,y.times)(11,(e=>(0,l.createElement)("div",{key:`rating-${e}`,className:"crowdsignal-forms-nps__rating-button"},e)))),!S&&(0,l.createElement)(Y,{trackRef:"cs-forms-nps",message:(0,a.__)("Collect your own feedback with Crowdsignal","crowdsignal-forms")},(0,l.createElement)(vr,null)))),t===ir&&c&&(0,l.createElement)("div",{className:E,style:wr(n,s)},(0,l.createElement)("div",{className:"crowdsignal-forms-nps__feedback"},(0,l.createElement)(F.RichText,{tagName:"h3",className:"crowdsignal-forms-nps__question",placeholder:(0,a.__)("Enter your feedback question","crowdsignal-forms"),onChange:C("feedbackQuestion"),value:f,allowedFormats:[]}),(0,l.createElement)(M.TextareaControl,{className:"crowdsignal-forms-nps__feedback-text",rows:6,onChange:C("feedbackPlaceholder"),value:n.feedbackPlaceholder}),(0,l.createElement)("div",{className:"wp-block-button crowdsignal-forms-nps__feedback-button-wrapper"},(0,l.createElement)(F.RichText,{className:"wp-block-button__link crowdsignal-forms-nps__feedback-button",onChange:C("submitButtonLabel"),value:n.submitButtonLabel,allowedFormats:[],multiline:!1,disableLineBreaks:!0})),!S&&(0,l.createElement)(Y,{trackRef:"cs-forms-nps",message:(0,a.__)("Collect your own feedback with Crowdsignal","crowdsignal-forms")},(0,l.createElement)(vr,null)))),d())})),_r={title:(0,a.__)("Measure NPS","crowdsignal-forms"),description:(0,a.__)("Calculate your Net Promoter Score! Collect feedback and track customer satisfaction over time. — powered by Crowdsignal.","crowdsignal-forms"),category:"crowdsignal-forms",attributes:ur,supports:{multiple:!1,html:!1,reusable:!1},icon:(0,l.createElement)((()=>(0,l.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{d:"M4.49707 15V10.3857H4.54102L7.83691 15H9.05762V7.9541H7.64648V12.5439H7.60742L4.31641 7.9541H3.08594V15H4.49707ZM9.73438 7.9541V15H11.209V12.7783H12.5273C14.0117 12.7783 15.042 11.8115 15.042 10.3662C15.042 8.91602 14.0459 7.9541 12.6006 7.9541H9.73438ZM11.209 9.12109H12.21C13.0547 9.12109 13.543 9.57031 13.543 10.3711C13.543 11.1768 13.0498 11.626 12.2051 11.626H11.209V9.12109ZM15.1523 12.9932C15.1963 14.3164 16.2754 15.1221 17.9697 15.1221C19.7178 15.1221 20.8262 14.2578 20.8262 12.8906C20.8262 11.8164 20.2109 11.2109 18.7998 10.9082L17.9453 10.7275C17.1348 10.542 16.793 10.2979 16.793 9.86328C16.793 9.34082 17.2812 8.99414 18.0088 8.99414C18.7461 8.99414 19.2686 9.35547 19.3174 9.95117H20.6992C20.6748 8.67676 19.6445 7.83203 18.0039 7.83203C16.4316 7.83203 15.3086 8.69141 15.3086 9.99023C15.3086 11.0205 15.9482 11.6797 17.2471 11.958L18.165 12.1582C19.0146 12.3486 19.3516 12.6025 19.3516 13.0615C19.3516 13.5791 18.8145 13.9551 18.0283 13.9551C17.2471 13.9551 16.6416 13.5742 16.5732 12.9932H15.1523Z"}))),null),edit:hr,keywords:[(0,a.__)("ask","crowdsignal-forms"),"crowdsignal",(0,a.__)("CSAT","crowdsignal-forms"),(0,a.__)("customer experience","crowdsignal-forms"),(0,a.__)("customer satisfaction","crowdsignal-forms"),(0,a.__)("feedback","crowdsignal-forms"),(0,a.__)("form","crowdsignal-forms"),(0,a.__)("loyalty","crowdsignal-forms"),(0,a.__)("net promoter score","crowdsignal-forms"),(0,a.__)("nps","crowdsignal-forms"),(0,a.__)("opinion","crowdsignal-forms"),(0,a.__)("poll","crowdsignal-forms"),(0,a.__)("promoter","crowdsignal-forms"),(0,a.__)("research","crowdsignal-forms"),(0,a.__)("rating","crowdsignal-forms"),(0,a.__)("review","crowdsignal-forms"),(0,a.__)("score","crowdsignal-forms"),(0,a.__)("survey","crowdsignal-forms")],example:{attributes:{isExample:!0,ratingQuestion:(0,a.__)("How satisfied are you with the content of the site?","crowdsignal-forms"),feedbackQuestion:(0,a.__)("Any advise on how we could improve your experience?","crowdsignal-forms"),lowRatingLabel:(0,a.__)("Not satisfied","crowdsignal-forms"),highRatingLabel:(0,a.__)("Very satisfied","crowdsignal-forms")}}},Cr=()=>(0,l.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 5.25V17.6893L6.42678 16.2626C6.75497 15.9344 7.20008 15.75 7.66421 15.75H18.75C18.8881 15.75 19 15.6381 19 15.5V5.5C19 5.36193 18.8881 5.25 18.75 5.25H5ZM3.5 5C3.5 4.30965 4.05964 3.75 4.75 3.75H18.75C19.7165 3.75 20.5 4.5335 20.5 5.5V15.5C20.5 16.4665 19.7165 17.25 18.75 17.25H7.66421C7.59791 17.25 7.53432 17.2763 7.48744 17.3232L3.5 21.3107V5Z"}),(0,l.createElement)("rect",{x:"7",y:"9.75",width:"1.5",height:"1.5"}),(0,l.createElement)("rect",{x:"11.25",y:"9.75",width:"1.5",height:"1.5"}),(0,l.createElement)("rect",{x:"15.5",y:"9.75",width:"1.5",height:"1.5"}));const Er="question",yr="submit",kr=Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"}),Sr=Object.freeze({CLICK:"click",HOVER:"hover",PAGE_LOAD:"load"});var Lr={backgroundColor:{type:"string"},buttonColor:{type:"string"},buttonTextColor:{type:"string"},emailPlaceholder:{type:"string",default:(0,a.__)("Your Email","crowdsignal-forms")},emailRequired:{type:"boolean",default:!1},feedbackPlaceholder:{type:"string",default:(0,a.__)("Please let us know how we can do better…","crowdsignal-forms")},header:{type:"string",default:(0,a.__)("👋 Hey there!","crowdsignal-forms")},hideBranding:{type:"boolean",default:!1},hideTriggerShadow:{type:"boolean",default:!1},submitButtonLabel:{type:"string",default:(0,a.__)("Submit","crowdsignal-forms")},submitText:{type:"string",default:(0,a.__)("Thanks for letting us know!","crowdsignal-forms")},surveyId:{type:"number",default:null},textColor:{type:"string"},toggleOn:{type:"string",default:Sr.CLICK},triggerLabel:{type:"string",default:(0,a.__)("Feedback","crowdsignal-forms")},triggerBackgroundColor:{type:"string"},triggerTextColor:{type:"string"},title:{type:"string",default:""},x:{type:"string",default:"left"},y:{type:"string",default:"bottom"},status:{type:"string",default:kr.OPEN},closedAfterDateTime:{type:"string",default:null},emailResponses:{type:"boolean",default:!0},isExample:{type:"boolean",default:!1},isWidget:{type:"boolean",default:!1}};const xr=(e,t,r)=>({left:"left"===e?r.left:null,right:"right"===e?r.right:null}),Tr=(e,t,r)=>"center"===e?{top:(window.innerHeight-t)/2,bottom:null}:{top:"top"===e?r.top:null,bottom:"bottom"===e?r.bottom:null};var Ir,Or=e=>{let{attributes:t,setAttributes:r,shouldPromote:n,signalWarning:o,email:s}=e;const i=`https://app.crowdsignal.com/surveys/${t.surveyId}/report/overview`,c=e=>t=>r({[e]:t});return(0,l.createElement)(F.InspectorControls,null,(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Results","crowdsignal-forms"),initialOpen:!0},(0,l.createElement)("p",null,t.surveyId?(0,a.__)("Manage results on ","crowdsignal-forms"):(0,a.__)("Save the block to track results on ","crowdsignal-forms"),(0,l.createElement)(M.ExternalLink,{href:"https://www.crowdsignal.com"},"crowdsignal.com")),(0,l.createElement)("p",null,(0,l.createElement)(M.Button,{isSecondary:!0,disabled:!t.surveyId,href:i,target:"blank"},(0,a.__)("View results","crowdsignal-forms"))),(0,l.createElement)(M.TextControl,{label:(0,a.__)("Title (optional)","crowdsignal-forms"),onChange:e=>r({title:e}),value:(0,Z.decodeEntities)(t.title)}),(0,l.createElement)(M.ToggleControl,{label:(0,a.__)("Send me responses via email","crowdsignal-forms"),checked:t.emailResponses,onChange:c("emailResponses"),help:t.emailResponses&&s&&(0,a.sprintf)(
// translators: %s: email address
(0,a.__)("Responses will be sent to %s","crowdsignal-forms"),s)}),n&&(0,l.createElement)(Te,{signalWarning:o})),(0,l.createElement)(F.PanelColorSettings,{title:(0,a.__)("Feedback Button","crowdsignal-forms"),initialOpen:!1,colorSettings:[{label:(0,a.__)("Background color","crowdsignal-forms"),onChange:c("triggerBackgroundColor"),value:t.triggerBackgroundColor},{label:(0,a.__)("Text color","crowdsignal-forms"),onChange:c("triggerTextColor"),value:t.triggerTextColor}]},(0,l.createElement)(M.ToggleControl,{label:(0,a.__)("Hide Shadow","crowdsignal-forms"),checked:t.hideTriggerShadow,onChange:c("hideTriggerShadow")})),(0,l.createElement)(F.PanelColorSettings,{title:(0,a.__)("Block styling","crowdsignal-forms"),initialOpen:!1,colorSettings:[{label:(0,a.__)("Background color","crowdsignal-forms"),onChange:c("backgroundColor"),value:t.backgroundColor},{label:(0,a.__)("Text color","crowdsignal-forms"),onChange:c("textColor"),value:t.textColor},{label:(0,a.__)("Button color","crowdsignal-forms"),onChange:c("buttonColor"),value:t.buttonColor},{label:(0,a.__)("Button text color","crowdsignal-forms"),onChange:c("buttonTextColor"),value:t.buttonTextColor}]}),(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Settings","crowdsignal-forms"),initialOpen:!1},(0,l.createElement)(M.SelectControl,{value:t.status,label:(0,a.__)("Status","crowdsignal-forms"),options:[{label:(0,a.__)("Open","crowdsignal-forms"),value:kr.OPEN},{label:(0,a.__)("Closed after","crowdsignal-forms"),value:kr.CLOSED_AFTER},{label:(0,a.__)("Closed","crowdsignal-forms"),value:kr.CLOSED}],onChange:e=>r({status:e}),help:kr.CLOSED_AFTER===t.status&&null!==t.closedAfterDateTime&&(new Date).toISOString()>t.closedAfterDateTime?"Currently closed as date has passed":""}),kr.CLOSED_AFTER===t.status&&(0,l.createElement)(M.DateTimePicker,{currentDate:t.closedAfterDateTime&&new Date(t.closedAfterDateTime)||new Date,label:(0,a.__)("Close on","crowdsignal-forms"),onChange:e=>{const t=new Date(e);r({closedAfterDateTime:t.toISOString()})},is12Hour:!0}),(0,l.createElement)(M.SelectControl,{value:t.toggleOn,label:(0,a.__)("Show feedback form on:","crowdsignal-forms"),options:[{label:(0,a.__)("Click","crowdsignal-forms"),value:Sr.CLICK},{label:(0,a.__)("Hover","crowdsignal-forms"),value:Sr.HOVER},{label:(0,a.__)("Page load","crowdsignal-forms"),value:Sr.PAGE_LOAD}],onChange:c("toggleOn")}),(0,l.createElement)(M.ToggleControl,{label:(0,a.__)("Require email address","crowdsignal-forms"),checked:t.emailRequired,onChange:c("emailRequired")})))},Nr=window.wp.keycodes;function Ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(r),!0).forEach((function(t){Ar(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dr(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fr(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Br(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Br(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function Mr(e){return e?e.ownerDocument||e:document}try{Ir=window}catch(e){}function Hr(e){return e&&Mr(e).defaultView||Ir}var Vr=function(){var e=Hr();return Boolean(void 0!==e&&e.document&&e.document.createElement)}(),Ur=Vr?D.useLayoutEffect:D.useEffect;function jr(e){return(0,D.useState)(e)[0]}function Wr(e){for(var t,r=[[]],n=function(){var e=t.value,n=r.find((function(t){return!t[0]||t[0].groupId===e.groupId}));n?n.push(e):r.push([e])},o=Fr(e);!(t=o()).done;)n();return r}function zr(e){for(var t,r=[],n=Fr(e);!(t=n()).done;){var o=t.value;r.push.apply(r,o)}return r}function qr(e){return e.slice().reverse()}function $r(e,t){return t?e.find((function(e){return!e.disabled&&e.id!==t})):e.find((function(e){return!e.disabled}))}function Kr(e,t){var r;return t||null===t?t:e.currentId||null===e.currentId?e.currentId:null===(r=$r(e.items||[]))||void 0===r?void 0:r.id}function Zr(e,t){if(t)return null==e?void 0:e.find((function(e){return e.id===t&&!e.disabled}))}function Gr(e,t){return function(e){return"function"==typeof e}(e)?e(t):e}function Qr(e){return void 0===e&&(e="id"),(e?e+"-":"")+Math.random().toString(32).substr(2,6)}var Yr=(0,D.createContext)(Qr);function Xr(e,t){return Boolean(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}function Jr(e,t){return e.findIndex((function(e){return!(!e.ref.current||!t.ref.current)&&Xr(t.ref.current,e.ref.current)}))}function en(e){for(var t,r=0,n=Fr(e);!(t=n()).done;){var o=t.value.length;o>r&&(r=o)}return r}function tn(e){for(var t=Wr(e),r=en(t),n=[],o=0;o<r;o+=1)for(var l,a=Fr(t);!(l=a()).done;){var s=l.value;s[o]&&n.push(Pr(Pr({},s[o]),{},{groupId:s[o].groupId?""+o:void 0}))}return n}function rn(e,t,r){for(var n,o=en(e),l=Fr(e);!(n=l()).done;)for(var a=n.value,s=0;s<o;s+=1){var i=a[s];if(!i||r&&i.disabled){var c=0===s&&r?$r(a):a[s-1];a[s]=c&&t!==(null==c?void 0:c.id)&&r?c:{id:"__EMPTY_ITEM__",disabled:!0,ref:{current:null},groupId:null==c?void 0:c.groupId}}}return e}var nn={id:null,ref:{current:null}};function on(e,t){return e.filter((function(e){return e.groupId===t}))}var ln={horizontal:"vertical",vertical:"horizontal"};function an(e,t,r){return r in e?[].concat(e.slice(0,r),[t],e.slice(r)):[].concat(e,[t])}function sn(e){var t=e.map((function(e,t){return[t,e]})),r=!1;return t.sort((function(e,t){var n=e[0],o=e[1],l=t[0],a=t[1],s=o.ref.current,i=a.ref.current;return s&&i?Xr(s,i)?(n>l&&(r=!0),-1):(n<l&&(r=!0),1):0})),r?t.map((function(e){return e[0],e[1]})):e}function cn(e,t){var r=sn(e);e!==r&&t(r)}function un(e,t){"function"==typeof IntersectionObserver?function(e,t){var r=(0,D.useRef)([]);(0,D.useEffect)((function(){for(var n,o=function(e){for(var t,r=e[0],n=e.slice(1),o=null==r||null===(t=r.ref.current)||void 0===t?void 0:t.parentElement,l=function(){var e=o;if(n.every((function(t){return e.contains(t.ref.current)})))return{v:o};o=o.parentElement};o;){var a=l();if("object"==typeof a)return a.v}return Mr(o).body}(e),l=new IntersectionObserver((function(){!!r.current.length&&cn(e,t),r.current=e}),{root:o}),a=Fr(e);!(n=a()).done;){var s=n.value;s.ref.current&&l.observe(s.ref.current)}return function(){l.disconnect()}}),[e])}(e,t):function(e,t){(0,D.useEffect)((function(){var r=setTimeout((function(){return cn(e,t)}),250);return function(){return clearTimeout(r)}}))}(e,t)}function dn(e,t){var r=e.unstable_virtual,n=e.rtl,o=e.orientation,l=e.items,a=e.groups,s=e.currentId,i=e.loop,c=e.wrap,u=e.pastIds,d=e.shift,m=e.unstable_moves,f=e.unstable_includesBaseElement,p=e.initialVirtual,g=e.initialRTL,w=e.initialOrientation,b=e.initialCurrentId,v=e.initialLoop,h=e.initialWrap,_=e.initialShift,C=e.hasSetCurrentId;switch(t.type){case"registerGroup":var E=t.group;if(0===a.length)return Pr(Pr({},e),{},{groups:[E]});var y=Jr(a,E);return Pr(Pr({},e),{},{groups:an(a,E,y)});case"unregisterGroup":var k=t.id,S=a.filter((function(e){return e.id!==k}));return S.length===a.length?e:Pr(Pr({},e),{},{groups:S});case"registerItem":var L,x=t.item,T=a.find((function(e){var t;return null===(t=e.ref.current)||void 0===t?void 0:t.contains(x.ref.current)})),I=Pr({groupId:null==T?void 0:T.id},x),O=Jr(l,I),N=Pr(Pr({},e),{},{items:an(l,I,O)});return C||m||void 0!==b?N:Pr(Pr({},N),{},{currentId:null===(L=$r(N.items))||void 0===L?void 0:L.id});case"unregisterItem":var A=t.id,R=l.filter((function(e){return e.id!==A}));if(R.length===l.length)return e;var P=u.filter((function(e){return e!==A})),D=Pr(Pr({},e),{},{pastIds:P,items:R});if(s&&s===A){var B=f?null:Kr(Pr(Pr({},D),{},{currentId:P[0]}));return Pr(Pr({},D),{},{currentId:B})}return D;case"move":var F=t.id;if(void 0===F)return e;var M=u.filter((function(e){return e!==s&&e!==F})),H=s?[s].concat(M):M,V=Pr(Pr({},e),{},{pastIds:H});if(null===F)return Pr(Pr({},V),{},{unstable_moves:m+1,currentId:Kr(V,F)});var U=Zr(l,F);return Pr(Pr({},V),{},{unstable_moves:U?m+1:m,currentId:Kr(V,null==U?void 0:U.id)});case"next":if(null==s)return dn(e,Pr(Pr({},t),{},{type:"first"}));var j=n&&"vertical"!==o,W=j?qr(l):l,z=W.find((function(e){return e.id===s}));if(!z)return dn(e,Pr(Pr({},t),{},{type:"first"}));var q=!!z.groupId,$=W.indexOf(z),K=W.slice($+1),Z=on(K,z.groupId);if(t.allTheWay){var G=$r(j?on(W,z.groupId):qr(Z));return dn(e,Pr(Pr({},t),{},{type:"move",id:null==G?void 0:G.id}))}var Q=function(e){return e&&ln[e]}(q?o||"horizontal":o),Y=i&&i!==Q,X=q&&c&&c!==Q,J=t.hasNullItem||!q&&Y&&f;if(Y){var ee=function(e,t,r){var n=e.findIndex((function(e){return e.id===t}));return[].concat(e.slice(n+1),r?[nn]:[],e.slice(0,n))}(X&&!J?W:on(W,z.groupId),s,J),te=$r(ee,s);return dn(e,Pr(Pr({},t),{},{type:"move",id:null==te?void 0:te.id}))}if(X){var re=$r(J?Z:K,s),ne=J?(null==re?void 0:re.id)||null:null==re?void 0:re.id;return dn(e,Pr(Pr({},t),{},{type:"move",id:ne}))}var oe=$r(Z,s);return dn(e,Pr(Pr({},t),{},!oe&&J?{type:"move",id:null}:{type:"move",id:null==oe?void 0:oe.id}));case"previous":var le=!a.length&&f,ae=dn(Pr(Pr({},e),{},{items:qr(l)}),Pr(Pr({},t),{},{type:"next",hasNullItem:le}));return Pr(Pr({},ae),{},{items:l});case"down":var se=d&&!t.allTheWay,ie=tn(zr(rn(Wr(l),s,se))),ce=i&&"horizontal"!==i&&f,ue=dn(Pr(Pr({},e),{},{orientation:"vertical",items:ie}),Pr(Pr({},t),{},{type:"next",hasNullItem:ce}));return Pr(Pr({},ue),{},{orientation:o,items:l});case"up":var de=d&&!t.allTheWay,me=tn(qr(zr(rn(Wr(l),s,de)))),fe=f,pe=dn(Pr(Pr({},e),{},{orientation:"vertical",items:me}),Pr(Pr({},t),{},{type:"next",hasNullItem:fe}));return Pr(Pr({},pe),{},{orientation:o,items:l});case"first":var ge=$r(l);return dn(e,Pr(Pr({},t),{},{type:"move",id:null==ge?void 0:ge.id}));case"last":var we=dn(Pr(Pr({},e),{},{items:qr(l)}),Pr(Pr({},t),{},{type:"first"}));return Pr(Pr({},we),{},{items:l});case"sort":return Pr(Pr({},e),{},{items:sn(l),groups:sn(a)});case"setVirtual":return Pr(Pr({},e),{},{unstable_virtual:Gr(t.virtual,r)});case"setRTL":return Pr(Pr({},e),{},{rtl:Gr(t.rtl,n)});case"setOrientation":return Pr(Pr({},e),{},{orientation:Gr(t.orientation,o)});case"setCurrentId":var be=Kr(Pr(Pr({},e),{},{currentId:Gr(t.currentId,s)}));return Pr(Pr({},e),{},{currentId:be,hasSetCurrentId:!0});case"setLoop":return Pr(Pr({},e),{},{loop:Gr(t.loop,i)});case"setWrap":return Pr(Pr({},e),{},{wrap:Gr(t.wrap,c)});case"setShift":return Pr(Pr({},e),{},{shift:Gr(t.shift,d)});case"setIncludesBaseElement":return Pr(Pr({},e),{},{unstable_includesBaseElement:Gr(t.includesBaseElement,f)});case"reset":return Pr(Pr({},e),{},{unstable_virtual:p,rtl:g,orientation:w,currentId:Kr(Pr(Pr({},e),{},{currentId:b})),loop:v,wrap:h,shift:_,unstable_moves:0,pastIds:[]});case"setItems":return Pr(Pr({},e),{},{items:t.items});default:throw new Error}}function mn(e){return(0,D.useCallback)(e,[])}function fn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(r),!0).forEach((function(t){fn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wn(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vn(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return bn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}var hn=(0,D.createContext)({}),Cn=function(e,t,r){void 0===r&&(r=t.children);var n=(0,D.useContext)(hn);return n.useCreateElement?n.useCreateElement(e,t,r):"string"==typeof e&&function(e){return"function"==typeof e}(r)?(t.children,r(wn(t,["children"]))):(0,D.createElement)(e,t,r)};function En(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(r),!0).forEach((function(t){En(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sn(e){var t;if(!function(e){return"object"==typeof e&&null!=e}(e))return!1;var r=Object.getPrototypeOf(e);return null==r||(null===(t=r.constructor)||void 0===t?void 0:t.toString())===Object.toString()}function Ln(e,t){for(var r={},n={},o=0,l=Object.keys(e);o<l.length;o++){var a=l[o];t.indexOf(a)>=0?r[a]=e[a]:n[a]=e[a]}return[r,n]}function xn(e,t){if(void 0===t&&(t=[]),!Sn(e.state))return Ln(e,t);var r=Ln(e,[].concat(t,["state"])),n=r[0],o=r[1],l=n.state,a=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(n,["state"]);return[kn(kn({},l),a),o]}function Tn(e,t){if(e===t)return!0;if(!e)return!1;if(!t)return!1;if("object"!=typeof e)return!1;if("object"!=typeof t)return!1;var r=Object.keys(e),n=Object.keys(t),o=r.length;if(n.length!==o)return!1;for(var l=0,a=r;l<a.length;l++){var s=a[l];if(e[s]!==t[s])return!1}return!0}function In(e){return"normalizePropsAreEqualInner"===e.name?e:function(t,r){return Sn(t.state)&&Sn(r.state)?e(kn(kn({},t.state),t),kn(kn({},r.state),r)):e(t,r)}}function On(e){var t,r=e.as,n=e.useHook,o=e.memo,l=e.propsAreEqual,a=void 0===l?null==n?void 0:n.unstable_propsAreEqual:l,s=e.keys,i=void 0===s?(null==n?void 0:n.__keys)||[]:s,c=e.useCreateElement,u=void 0===c?Cn:c,d=function(e,t){var o=e.as,l=void 0===o?r:o,a=wn(e,["as"]);if(n){var s,c=xn(a,i),d=c[0],m=c[1],f=n(d,gn({ref:t},m)),p=f.wrapElement,g=wn(f,["wrapElement"]),w=(null===(s=l.render)||void 0===s?void 0:s.__keys)||l.__keys,b=w&&xn(a,w)[0],v=b?gn(gn({},g),b):g,h=u(l,v);return p?p(h):h}return u(l,gn({ref:t},a))};return t=d,d=(0,D.forwardRef)(t),o&&(d=function(e,t){return(0,D.memo)(e,t)}(d,a&&In(a))),d.__keys=i,d.unstable_propsAreEqual=In(a||Tn),d}function Nn(e,t){(0,D.useDebugValue)(e);var r=(0,D.useContext)(hn);return null!=r[e]?r[e]:t}function An(e){var t,r,n,o=(n=e.compose,Array.isArray(n)?n:void 0!==n?[n]:[]),l=function(t,r){if(e.useOptions&&(t=e.useOptions(t,r)),e.name&&(t=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={});var n="use"+e+"Options";(0,D.useDebugValue)(n);var o=Nn(n);return o?gn(gn({},t),o(t,r)):t}(e.name,t,r)),e.compose)for(var n,l=vn(o);!(n=l()).done;)t=n.value.__useOptions(t,r);return t},a=function(t,r,n){if(void 0===t&&(t={}),void 0===r&&(r={}),void 0===n&&(n=!1),n||(t=l(t,r)),e.useProps&&(r=e.useProps(t,r)),e.name&&(r=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={});var n="use"+e+"Props";(0,D.useDebugValue)(n);var o=Nn(n);return o?o(t,r):r}(e.name,t,r)),e.compose)if(e.useComposeOptions&&(t=e.useComposeOptions(t,r)),e.useComposeProps)r=e.useComposeProps(t,r);else for(var a,s=vn(o);!(a=s()).done;)r=(0,a.value)(t,r,!0);var i={},c=r||{};for(var u in c)void 0!==c[u]&&(i[u]=c[u]);return i};a.__useOptions=l;var s=o.reduce((function(e,t){return e.push.apply(e,t.__keys||[]),e}),[]);return a.__keys=[].concat(s,(null===(t=e.useState)||void 0===t?void 0:t.__keys)||[],e.keys||[]),a.unstable_propsAreEqual=e.propsAreEqual||(null===(r=o[0])||void 0===r?void 0:r.unstable_propsAreEqual)||Tn,a}function Rn(e,t){void 0===t&&(t=null),e&&("function"==typeof e?e(t):e.current=t)}function Pn(e,t){return(0,D.useMemo)((function(){return null==e&&null==t?null:function(r){Rn(e,r),Rn(t,r)}}),[e,t])}function Dn(e){var t=(0,D.useRef)(e);return Ur((function(){t.current=e})),t}function Bn(e){return e.target===e.currentTarget}var Fn=An({name:"Role",keys:["unstable_system"],propsAreEqual:function(e,t){var r=e.unstable_system,n=Dr(e,["unstable_system"]),o=t.unstable_system,l=Dr(t,["unstable_system"]);return!(r!==o&&!Tn(r,o))&&Tn(n,l)}}),Mn=(On({as:"div",useHook:Fn}),["button","color","file","image","reset","submit"]);function Hn(e){if("BUTTON"===e.tagName)return!0;if("INPUT"===e.tagName){var t=e;return-1!==Mn.indexOf(t.type)}return!1}function Vn(e){var t=Mr(e).activeElement;return null!=t&&t.nodeName?t:null}function Un(e,t){return e===t||e.contains(t)}function jn(e){var t=Vn(e);if(!t)return!1;if(Un(e,t))return!0;var r=t.getAttribute("aria-activedescendant");return!(!r||r!==e.id&&!e.querySelector("#"+r))}function Wn(e){return!Un(e.currentTarget,e.target)}function zn(e){return!!Vr&&-1!==window.navigator.userAgent.indexOf(e)}var qn="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])";var $n=zn("Mac")&&!zn("Chrome")&&(zn("Safari")||zn("Firefox"));function Kn(e){!jn(e)&&function(e){return function(e,t){return"matches"in e?e.matches(t):"msMatchesSelector"in e?e.msMatchesSelector(t):e.webkitMatchesSelector(t)}(e,qn)&&function(e){var t=e;return t.offsetWidth>0||t.offsetHeight>0||e.getClientRects().length>0}(e)}(e)&&e.focus()}function Zn(e,t,r,n){return e?t&&!r?-1:void 0:t?n:n||0}function Gn(e,t){return(0,D.useCallback)((function(r){var n;null===(n=e.current)||void 0===n||n.call(e,r),r.defaultPrevented||t&&(r.stopPropagation(),r.preventDefault())}),[e,t])}var Qn=An({name:"Tabbable",compose:Fn,keys:["disabled","focusable"],useOptions:function(e,t){return Pr({disabled:t.disabled},e)},useProps:function(e,t){var r=t.ref,n=t.tabIndex,o=t.onClickCapture,l=t.onMouseDownCapture,a=t.onMouseDown,s=t.onKeyPressCapture,i=t.style,c=Dr(t,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),u=(0,D.useRef)(null),d=Dn(o),m=Dn(l),f=Dn(a),p=Dn(s),g=!!e.disabled&&!e.focusable,w=(0,D.useState)(!0),b=w[0],v=w[1],h=(0,D.useState)(!0),_=h[0],C=h[1],E=e.disabled?Pr({pointerEvents:"none"},i):i;Ur((function(){var e=u.current;e&&(["BUTTON","INPUT","SELECT","TEXTAREA","A"].includes(e.tagName)||v(!1),["BUTTON","INPUT","SELECT","TEXTAREA"].includes(e.tagName)||C(!1))}),[]);var y=Gn(d,e.disabled),k=Gn(m,e.disabled),S=Gn(p,e.disabled),L=(0,D.useCallback)((function(e){var t;null===(t=f.current)||void 0===t||t.call(f,e);var r=e.currentTarget;if(!e.defaultPrevented&&$n&&!Wn(e)&&Hn(r)){var n=requestAnimationFrame((function(){r.removeEventListener("mouseup",o,!0),Kn(r)})),o=function(){cancelAnimationFrame(n),Kn(r)};r.addEventListener("mouseup",o,{once:!0,capture:!0})}}),[]);return Pr({ref:Pn(u,r),style:E,tabIndex:Zn(g,b,_,n),disabled:!(!g||!_)||void 0,"aria-disabled":!!e.disabled||void 0,onClickCapture:y,onMouseDownCapture:k,onMouseDown:L,onKeyPressCapture:S},c)}});function Yn(e,t,r){if("function"==typeof Event)return new Event(t,r);var n=Mr(e).createEvent("Event");return n.initEvent(t,null==r?void 0:r.bubbles,null==r?void 0:r.cancelable),n}function Xn(e,t,r){return void 0===r&&(r={}),"function"==typeof FocusEvent?new FocusEvent(t,r):Yn(e,t,r)}function Jn(e,t){var r=Xn(e,"blur",t),n=e.dispatchEvent(r),o=kn(kn({},t),{},{bubbles:!0});return e.dispatchEvent(Xn(e,"focusout",o)),n}On({as:"div",useHook:Qn});var eo=Vr&&"msCrypto"in window,to=["baseId","unstable_idCountRef","setBaseId","unstable_virtual","rtl","orientation","items","groups","currentId","loop","wrap","shift","unstable_moves","unstable_hasActiveWidget","unstable_includesBaseElement","registerItem","unregisterItem","registerGroup","unregisterGroup","move","next","previous","up","down","first","last","sort","unstable_setVirtual","setRTL","setOrientation","setCurrentId","setLoop","setWrap","setShift","reset","unstable_setIncludesBaseElement","unstable_setHasActiveWidget"],ro=to,no=ro;function oo(e){e.userFocus=!0,e.focus(),e.userFocus=!1}function lo(e,t){e.userFocus=t}var ao=Vr&&"msCrypto"in window;function so(e,t,r){var n=Dn(r);return(0,D.useCallback)((function(r){var o,l,a,s;if(null===(o=n.current)||void 0===o||o.call(n,r),!r.defaultPrevented&&e&&function(e){return!!Bn(e)&&!e.metaKey&&"Tab"!==e.key}(r)){var i=null==t?void 0:t.ref.current;i&&(l=i,a=r.type,s=r,l.dispatchEvent(function(e,t,r){if(void 0===r&&(r={}),"function"==typeof KeyboardEvent)return new KeyboardEvent(t,r);var n=Mr(e).createEvent("KeyboardEvent");return n.initKeyboardEvent(t,r.bubbles,r.cancelable,Hr(e),r.key,r.location,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey),n}(l,a,s))||r.preventDefault(),r.currentTarget.contains(i)&&r.stopPropagation())}}),[e,t])}function io(e,t){return null==e?void 0:e.some((function(e){return!!t&&e.ref.current===t}))}var co=On({as:"div",useHook:An({name:"Composite",compose:[Qn],keys:to,useOptions:function(e){return Pr(Pr({},e),{},{currentId:Kr(e)})},useProps:function(e,t){var r=t.ref,n=t.onFocusCapture,o=t.onFocus,l=t.onBlurCapture,a=t.onKeyDown,s=t.onKeyDownCapture,i=t.onKeyUpCapture,c=Dr(t,["ref","onFocusCapture","onFocus","onBlurCapture","onKeyDown","onKeyDownCapture","onKeyUpCapture"]),u=(0,D.useRef)(null),d=Zr(e.items,e.currentId),m=(0,D.useRef)(null),f=Dn(n),p=Dn(o),g=Dn(l),w=Dn(a),b=function(e){var t=Dn(e),r=(0,D.useReducer)((function(e){return e+1}),0),n=r[0],o=r[1];return(0,D.useEffect)((function(){var e,r=null===(e=t.current)||void 0===e?void 0:e.ref.current;n&&r&&oo(r)}),[n]),o}(d),v=ao?function(e){var t=(0,D.useRef)(null);return(0,D.useEffect)((function(){var r=Mr(e.current),n=function(e){var r=e.target;t.current=r};return r.addEventListener("focus",n,!0),function(){r.removeEventListener("focus",n,!0)}}),[]),t}(u):void 0;(0,D.useEffect)((function(){var t=u.current;e.unstable_moves&&!d&&(null==t||t.focus())}),[e.unstable_moves,d]);var h=so(e.unstable_virtual,d,s),_=so(e.unstable_virtual,d,i),C=(0,D.useCallback)((function(t){var r;if(null===(r=f.current)||void 0===r||r.call(f,t),!t.defaultPrevented&&e.unstable_virtual){var n=(null==v?void 0:v.current)||t.relatedTarget,o=io(e.items,n);Bn(t)&&o&&(t.stopPropagation(),m.current=n)}}),[e.unstable_virtual,e.items]),E=(0,D.useCallback)((function(t){var r;if(null===(r=p.current)||void 0===r||r.call(p,t),!t.defaultPrevented)if(e.unstable_virtual)Bn(t)&&b();else if(Bn(t)){var n;null===(n=e.setCurrentId)||void 0===n||n.call(e,null)}}),[e.unstable_virtual,e.setCurrentId]),y=(0,D.useCallback)((function(t){var r;if(null===(r=g.current)||void 0===r||r.call(g,t),!t.defaultPrevented&&e.unstable_virtual){var n=(null==d?void 0:d.ref.current)||null,o=function(e){return eo?Vn(e.currentTarget):e.relatedTarget}(t),l=io(e.items,o);Bn(t)&&l?(o===n?m.current&&m.current!==o&&Jn(m.current,t):n&&Jn(n,t),t.stopPropagation()):!io(e.items,t.target)&&n&&Jn(n,t)}}),[e.unstable_virtual,e.items,d]),k=(0,D.useCallback)((function(t){var r,n;if(null===(r=w.current)||void 0===r||r.call(w,t),!t.defaultPrevented&&null===e.currentId&&Bn(t)){var o="horizontal"!==e.orientation,l="vertical"!==e.orientation,a=!(null===(n=e.groups)||void 0===n||!n.length),s={ArrowUp:(a||o)&&function(){if(a){var t,r=$r(zr(qr(Wr(e.items))));null!=r&&r.id&&(null===(t=e.move)||void 0===t||t.call(e,r.id))}else{var n;null===(n=e.last)||void 0===n||n.call(e)}},ArrowRight:(a||l)&&e.first,ArrowDown:(a||o)&&e.first,ArrowLeft:(a||l)&&e.last,Home:e.first,End:e.last,PageUp:e.first,PageDown:e.last}[t.key];s&&(t.preventDefault(),s())}}),[e.currentId,e.orientation,e.groups,e.items,e.move,e.last,e.first]);return Pr({ref:Pn(u,r),id:e.baseId,onFocus:E,onFocusCapture:C,onBlurCapture:y,onKeyDownCapture:h,onKeyDown:k,onKeyUpCapture:_,"aria-activedescendant":e.unstable_virtual&&(null==d?void 0:d.id)||void 0},c)},useComposeProps:function(e,t){t=Fn(e,t,!0);var r=Qn(e,t,!0);return e.unstable_virtual||null===e.currentId?Pr({tabIndex:0},r):Pr(Pr({},t),{},{ref:r.ref})}}),useCreateElement:function(e,t,r){return Cn(e,t,r)}}),uo=An({keys:[].concat(["baseId","unstable_idCountRef","setBaseId"],["id"]),useOptions:function(e,t){var r=(0,D.useContext)(Yr),n=(0,D.useState)((function(){return e.unstable_idCountRef?(e.unstable_idCountRef.current+=1,"-"+e.unstable_idCountRef.current):e.baseId?"-"+r(""):""}))[0],o=(0,D.useMemo)((function(){return e.baseId||r()}),[e.baseId,r]),l=t.id||e.id||""+o+n;return Pr(Pr({},e),{},{id:l})},useProps:function(e,t){return Pr({id:e.id},t)}}),mo=(On({as:"div",useHook:uo}),An({name:"Group",compose:Fn,keys:[],useProps:function(e,t){return Pr({role:"group"},t)}})),fo=(On({as:"div",useHook:mo}),On({as:"div",useHook:An({name:"CompositeGroup",compose:[mo,uo],keys:ro,propsAreEqual:function(e,t){if(!t.id||e.id!==t.id)return mo.unstable_propsAreEqual(e,t);var r=e.currentId,n=(e.unstable_moves,Dr(e,["currentId","unstable_moves"])),o=t.currentId,l=(t.unstable_moves,Dr(t,["currentId","unstable_moves"]));if(e.items&&t.items){var a=Zr(e.items,r),s=Zr(t.items,o),i=null==a?void 0:a.groupId,c=null==s?void 0:s.groupId;if(t.id===c||t.id===i)return!1}return mo.unstable_propsAreEqual(n,l)},useProps:function(e,t){var r=t.ref,n=Dr(t,["ref"]),o=(0,D.useRef)(null),l=e.id;return Ur((function(){var t;if(l)return null===(t=e.registerGroup)||void 0===t||t.call(e,{id:l,ref:o}),function(){var t;null===(t=e.unregisterGroup)||void 0===t||t.call(e,l)}}),[l,e.registerGroup,e.unregisterGroup]),Pr({ref:Pn(o,r)},n)}})})),po=An({name:"Clickable",compose:Qn,keys:["unstable_clickOnEnter","unstable_clickOnSpace"],useOptions:function(e){var t=e.unstable_clickOnEnter,r=void 0===t||t,n=e.unstable_clickOnSpace;return Pr({unstable_clickOnEnter:r,unstable_clickOnSpace:void 0===n||n},Dr(e,["unstable_clickOnEnter","unstable_clickOnSpace"]))},useProps:function(e,t){var r=t.onKeyDown,n=t.onKeyUp,o=Dr(t,["onKeyDown","onKeyUp"]),l=(0,D.useState)(!1),a=l[0],s=l[1],i=Dn(r),c=Dn(n),u=(0,D.useCallback)((function(t){var r;if(null===(r=i.current)||void 0===r||r.call(i,t),!t.defaultPrevented&&!e.disabled&&!t.metaKey&&Bn(t)){var n=e.unstable_clickOnEnter&&"Enter"===t.key,o=e.unstable_clickOnSpace&&" "===t.key;if(n||o){if(function(e){var t=e.currentTarget;return!!e.isTrusted&&(Hn(t)||"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"A"===t.tagName||"SELECT"===t.tagName)}(t))return;t.preventDefault(),n?t.currentTarget.click():o&&s(!0)}}}),[e.disabled,e.unstable_clickOnEnter,e.unstable_clickOnSpace]),d=(0,D.useCallback)((function(t){var r;if(null===(r=c.current)||void 0===r||r.call(c,t),!t.defaultPrevented&&!e.disabled&&!t.metaKey){var n=e.unstable_clickOnSpace&&" "===t.key;a&&n&&(s(!1),t.currentTarget.click())}}),[e.disabled,e.unstable_clickOnSpace,a]);return Pr({"data-active":a||void 0,onKeyDown:u,onKeyUp:d},o)}});function go(e){try{var t=e instanceof HTMLInputElement&&null!==e.selectionStart,r="TEXTAREA"===e.tagName,n="true"===e.contentEditable;return t||r||n||!1}catch(e){return!1}}function wo(e){var t=Vn(e);if(!t)return!1;if(t===e)return!0;var r=t.getAttribute("aria-activedescendant");return!!r&&r===e.id}function bo(e,t){if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){var r,n=Object.getPrototypeOf(e),o=null===(r=Object.getOwnPropertyDescriptor(n,"value"))||void 0===r?void 0:r.set;o&&(o.call(e,t),function(e,t,r){e.dispatchEvent(Yn(e,"input",{bubbles:!0}))}(e))}}function vo(e){return e.querySelector("[data-composite-item-widget]")}On({as:"button",memo:!0,useHook:po});var ho=On({as:"button",memo:!0,useHook:An({name:"CompositeItem",compose:[po,uo],keys:no,propsAreEqual:function(e,t){if(!t.id||e.id!==t.id)return po.unstable_propsAreEqual(e,t);var r=e.currentId,n=e.unstable_moves,o=Dr(e,["currentId","unstable_moves"]),l=t.currentId,a=t.unstable_moves,s=Dr(t,["currentId","unstable_moves"]);if(l!==r){if(t.id===l||t.id===r)return!1}else if(n!==a)return!1;return po.unstable_propsAreEqual(o,s)},useOptions:function(e){return Pr(Pr({},e),{},{id:e.id,currentId:Kr(e),unstable_clickOnSpace:!e.unstable_hasActiveWidget&&e.unstable_clickOnSpace})},useProps:function(e,t){var r,n=t.ref,o=t.tabIndex,l=void 0===o?0:o,a=t.onMouseDown,s=t.onFocus,i=t.onBlurCapture,c=t.onKeyDown,u=t.onClick,d=Dr(t,["ref","tabIndex","onMouseDown","onFocus","onBlurCapture","onKeyDown","onClick"]),m=(0,D.useRef)(null),f=e.id,p=e.disabled&&!e.focusable,g=e.currentId===f,w=Dn(g),b=(0,D.useRef)(!1),v=function(e){return(0,D.useMemo)((function(){var t;return null===(t=e.items)||void 0===t?void 0:t.find((function(t){return e.id&&t.id===e.id}))}),[e.items,e.id])}(e),h=Dn(a),_=Dn(s),C=Dn(i),E=Dn(c),y=Dn(u),k=!e.unstable_virtual&&!e.unstable_hasActiveWidget&&g||!(null!==(r=e.items)&&void 0!==r&&r.length);(0,D.useEffect)((function(){var t;if(f)return null===(t=e.registerItem)||void 0===t||t.call(e,{id:f,ref:m,disabled:!!p}),function(){var t;null===(t=e.unregisterItem)||void 0===t||t.call(e,f)}}),[f,p,e.registerItem,e.unregisterItem]),(0,D.useEffect)((function(){var t=m.current;t&&e.unstable_moves&&w.current&&oo(t)}),[e.unstable_moves]);var S=(0,D.useCallback)((function(e){var t;null===(t=h.current)||void 0===t||t.call(h,e),lo(e.currentTarget,!0)}),[]),L=(0,D.useCallback)((function(t){var r,n,o=!!t.currentTarget.userFocus;if(lo(t.currentTarget,!1),null===(r=_.current)||void 0===r||r.call(_,t),!t.defaultPrevented&&!Wn(t)&&f&&!function(e,t){if(Bn(e))return!1;for(var r,n=Fr(t);!(r=n()).done;)if(r.value.ref.current===e.target)return!0;return!1}(t,e.items)&&(null===(n=e.setCurrentId)||void 0===n||n.call(e,f),o&&e.unstable_virtual&&e.baseId&&Bn(t))){var l=Mr(t.target).getElementById(e.baseId);l&&(b.current=!0,function(e,t){var r={},n=r.preventScroll,o=r.isActive,l=void 0===o?wo:o;l(e)||(e.focus({preventScroll:n}),l(e)||requestAnimationFrame((function(){e.focus({preventScroll:n})})))}(l))}}),[f,e.items,e.setCurrentId,e.unstable_virtual,e.baseId]),x=(0,D.useCallback)((function(t){var r;null===(r=C.current)||void 0===r||r.call(C,t),t.defaultPrevented||e.unstable_virtual&&b.current&&(b.current=!1,t.preventDefault(),t.stopPropagation())}),[e.unstable_virtual]),T=(0,D.useCallback)((function(t){var r;if(Bn(t)){var n="horizontal"!==e.orientation,o="vertical"!==e.orientation,l=!(null==v||!v.groupId),a={ArrowUp:(l||n)&&e.up,ArrowRight:(l||o)&&e.next,ArrowDown:(l||n)&&e.down,ArrowLeft:(l||o)&&e.previous,Home:function(){var r,n;!l||t.ctrlKey?null===(r=e.first)||void 0===r||r.call(e):null===(n=e.previous)||void 0===n||n.call(e,!0)},End:function(){var r,n;!l||t.ctrlKey?null===(r=e.last)||void 0===r||r.call(e):null===(n=e.next)||void 0===n||n.call(e,!0)},PageUp:function(){var t,r;l?null===(t=e.up)||void 0===t||t.call(e,!0):null===(r=e.first)||void 0===r||r.call(e)},PageDown:function(){var t,r;l?null===(t=e.down)||void 0===t||t.call(e,!0):null===(r=e.last)||void 0===r||r.call(e)}}[t.key];if(a)return t.preventDefault(),void a();if(null===(r=E.current)||void 0===r||r.call(E,t),!t.defaultPrevented)if(1===t.key.length&&" "!==t.key){var s=vo(t.currentTarget);s&&go(s)&&(s.focus(),bo(s,""))}else if("Delete"===t.key||"Backspace"===t.key){var i=vo(t.currentTarget);i&&go(i)&&(t.preventDefault(),bo(i,""))}}}),[e.orientation,v,e.up,e.next,e.down,e.previous,e.first,e.last]),I=(0,D.useCallback)((function(e){var t;if(null===(t=y.current)||void 0===t||t.call(y,e),!e.defaultPrevented){var r=vo(e.currentTarget);r&&!jn(r)&&r.focus()}}),[]);return Pr({ref:Pn(m,n),id:f,tabIndex:k?l:-1,"aria-selected":!(!e.unstable_virtual||!g)||void 0,onMouseDown:S,onFocus:L,onBlurCapture:x,onKeyDown:T,onClick:I},d)}})}),_o=e=>{let{isActive:t,column:r,onSelect:n,row:o,...a}=e;const s=`${o.label} ${r.label}`,i=(0,D.useCallback)((()=>{n(o.value,r.value)}),[n,o.value,r.value]),c=U()("crowdsignal-forms__block-alignment-control-button",{"is-active":t});return(0,l.createElement)(M.Tooltip,{text:s},(0,l.createElement)(ho,P({className:c,role:"gridcell",onFocus:i},a),(0,l.createElement)(M.VisuallyHidden,null,s)))};const Co=(e,t,r)=>`${e}-${t}-${r}`;var Eo=function e(t){let{columns:r,onChange:n,rows:o,value:s}=t;const i=(0,H.useInstanceId)(e,"block-alignment-control-grid"),c=function(e){void 0===e&&(e={});var t=jr(e),r=t.unstable_virtual,n=void 0!==r&&r,o=t.rtl,l=void 0!==o&&o,a=t.orientation,s=t.currentId,i=t.loop,c=void 0!==i&&i,u=t.wrap,d=void 0!==u&&u,m=t.shift,f=void 0!==m&&m,p=t.unstable_includesBaseElement,g=function(e){void 0===e&&(e={});var t=jr(e).baseId,r=(0,D.useContext)(Yr),n=(0,D.useRef)(0),o=(0,D.useState)((function(){return t||r()}));return{baseId:o[0],setBaseId:o[1],unstable_idCountRef:n}}(Dr(t,["unstable_virtual","rtl","orientation","currentId","loop","wrap","shift","unstable_includesBaseElement"])),w=(0,D.useReducer)(dn,{unstable_virtual:n,rtl:l,orientation:a,items:[],groups:[],currentId:s,loop:c,wrap:d,shift:f,unstable_moves:0,pastIds:[],unstable_includesBaseElement:null!=p?p:null===s,initialVirtual:n,initialRTL:l,initialOrientation:a,initialCurrentId:s,initialLoop:c,initialWrap:d,initialShift:f}),b=w[0],v=(b.pastIds,b.initialVirtual,b.initialRTL,b.initialOrientation,b.initialCurrentId,b.initialLoop,b.initialWrap,b.initialShift,b.hasSetCurrentId,Dr(b,["pastIds","initialVirtual","initialRTL","initialOrientation","initialCurrentId","initialLoop","initialWrap","initialShift","hasSetCurrentId"])),h=w[1],_=(0,D.useState)(!1),C=_[0],E=_[1],y=function(){var e=(0,D.useRef)(!1);return Ur((function(){return function(){e.current=!0}}),[]),e}(),k=(0,D.useCallback)((function(e){return h({type:"setItems",items:e})}),[]);return un(v.items,k),Pr(Pr(Pr({},g),v),{},{unstable_hasActiveWidget:C,unstable_setHasActiveWidget:E,registerItem:mn((function(e){y.current||h({type:"registerItem",item:e})})),unregisterItem:mn((function(e){y.current||h({type:"unregisterItem",id:e})})),registerGroup:mn((function(e){y.current||h({type:"registerGroup",group:e})})),unregisterGroup:mn((function(e){y.current||h({type:"unregisterGroup",id:e})})),move:mn((function(e){return h({type:"move",id:e})})),next:mn((function(e){return h({type:"next",allTheWay:e})})),previous:mn((function(e){return h({type:"previous",allTheWay:e})})),up:mn((function(e){return h({type:"up",allTheWay:e})})),down:mn((function(e){return h({type:"down",allTheWay:e})})),first:mn((function(){return h({type:"first"})})),last:mn((function(){return h({type:"last"})})),sort:mn((function(){return h({type:"sort"})})),unstable_setVirtual:mn((function(e){return h({type:"setVirtual",virtual:e})})),setRTL:mn((function(e){return h({type:"setRTL",rtl:e})})),setOrientation:mn((function(e){return h({type:"setOrientation",orientation:e})})),setCurrentId:mn((function(e){return h({type:"setCurrentId",currentId:e})})),setLoop:mn((function(e){return h({type:"setLoop",loop:e})})),setWrap:mn((function(e){return h({type:"setWrap",wrap:e})})),setShift:mn((function(e){return h({type:"setShift",shift:e})})),unstable_setIncludesBaseElement:mn((function(e){return h({type:"setIncludesBaseElement",includesBaseElement:e})})),reset:mn((function(){return h({type:"reset"})}))})}({baseId:i,currentId:Co(i,s.row,s.column),rtl:(0,a.isRTL)()});return(0,D.useEffect)((()=>{c.setCurrentId(Co(i,s.row,s.column))}),[s,c.setCurrentId]),(0,l.createElement)(co,P({},c,{className:"crowdsignal-forms__block-alignment-control-grid"}),(0,y.map)(o,(e=>(0,l.createElement)(fo,P({},c,{key:`${i}-${e.value}`,role:"row",className:"crowdsignal-forms__block-alignment-control-row"}),(0,y.map)(r,(t=>{const r=Co(i,e.value,t.value),o=c.currentId===Co(i,e.value,t.value);return(0,l.createElement)(_o,P({},c,{id:r,key:r,isActive:o,row:e,column:t,onSelect:n,tabIndex:o?0:-1}))}))))))},yo=e=>{let{rows:t,columns:r,value:n}=e,o=0,a=0;return(0,l.createElement)("div",{className:"crowdsignal-forms__block-alignment-control-icon"},(0,y.map)(t,(e=>(0,l.createElement)("div",{key:a++,className:"crowdsignal-forms__block-alignment-control-icon-row"},(0,y.map)(r,(t=>{const r=e.value===n.row&&t.value===n.column,a=U()("crowdsignal-forms__block-alignment-control-icon-dot",{"is-active":r});return(0,l.createElement)("span",{key:o++,className:a})}))))))};const ko={"2x2":{rows:[{label:(0,a.__)("Top","crowdsignal-forms"),value:"top"},{label:(0,a.__)("Bottom","crowdsignal-forms"),value:"bottom"}],columns:[{label:(0,a.__)("Left","crowdsignal-forms"),value:"left"},{label:(0,a.__)("Right","crowdsignal-forms"),value:"right"}]},"2x3":{rows:[{label:(0,a.__)("Top","crowdsignal-forms"),value:"top"},{label:(0,a.__)("Center","crowdsignal-forms"),value:"center"},{label:(0,a.__)("Bottom","crowdsignal-forms"),value:"bottom"}],columns:[{label:(0,a.__)("Left","crowdsignal-forms"),value:"left"},{label:(0,a.__)("Right","crowdsignal-forms"),value:"right"}]}},So=e=>{let{closeOnSelectionChanged:t,disabled:r,label:n,onChange:o,rows:a,columns:s,value:i}=e;const c=(0,l.createElement)(yo,{rows:a,columns:s,value:i});return(0,l.createElement)(M.Dropdown,{className:"crowdsignal-forms__block-alignment-control",popoverProps:{className:"crowdsignal-forms__block-alignment-control-popover"},renderToggle:e=>{let{onToggle:t,isOpen:o}=e;return(0,l.createElement)(M.Tooltip,{text:n},(0,l.createElement)(M.ToolbarButton,{showTooltip:!0,"aria-haspopup":"true","aria-expanded":o,disabled:r,icon:c,onClick:t,onKeyDown:e=>{o||e.keyCode!==Nr.DOWN||(e.preventDefault(),e.stopPropagation(),t())}}))},renderContent:e=>{let{onClose:r}=e;return(0,l.createElement)(Eo,{onChange:(e,n)=>{o(e,n),!t||i.row===e&&i.column===n||r()},rows:a,columns:s,value:i})}})};So.defaultProps={closeOnSelectionChanged:!1,label:(0,a.__)("Change block position","crowdsignal-forms"),onChange:y.noop};var Lo=So,xo=e=>{let{attributes:t,currentView:r,onViewChange:n,setAttributes:o}=e;const s=e=>()=>n(e);return(0,l.createElement)(F.BlockControls,null,(0,l.createElement)(M.ToolbarGroup,{label:(0,a.__)("Current view","crowdsignal-forms")},(0,l.createElement)(M.ToolbarButton,{className:"crowdsignal-forms-feedback__toolbar-toggle",isActive:r===Er,label:(0,a.__)("Question","crowdsignal-forms"),onClick:s(Er)},(0,a.__)("Question","crowdsignal-forms")),(0,l.createElement)(M.ToolbarButton,{className:"crowdsignal-forms-feedback__toolbar-toggle",isActive:r===yr,label:(0,a.__)("Submit","crowdsignal-forms"),onClick:s(yr)},(0,a.__)("Submit","crowdsignal-forms"))),(0,l.createElement)(M.ToolbarGroup,null,(0,l.createElement)(Lo,P({closeOnSelectionChanged:!0,onChange:(e,t)=>o({x:t,y:e}),label:(0,a.__)("Change button position","crowdsignal-forms"),value:{row:t.y,column:t.x}},ko["2x3"]))))};const To=(e,t)=>(0,y.mapKeys)({backgroundColor:e.backgroundColor||"#ffffff",buttonColor:e.buttonColor||t.accentColor,buttonTextColor:e.buttonTextColor||t.textColorInverted,textColor:e.textColor||t.textColor,textSize:t.textSize,triggerBackgroundColor:e.triggerBackgroundColor||t.accentColor,triggerTextColor:e.triggerTextColor||t.textColorInverted},((e,t)=>`--crowdsignal-forms-${(0,y.kebabCase)(t)}`)),Io=()=>!!window.wp.customizeWidgets;var Oo=(0,H.compose)([(0,i.withSelect)((e=>{let t=e("core/editor").getPermalink();t||(t=e("core").getSite()&&e("core").getSite().url);const r=e("core/edit-post");return{isFullscreen:"isFeatureActive"in r?r.isFeatureActive("fullscreenMode"):r.getPreference("fullscreenMode"),isInserterActive:r.isInserterOpened(),isListViewActive:r.isListViewOpened(),isSidebarActive:r.isEditorSidebarOpened(),sourceLink:t}})),we])((e=>{const[t,r]=(0,D.useState)(Er),[n,o]=(0,D.useState)(null),[s,c]=(0,D.useState)({}),{attributes:u,isFullscreen:d,isInserterActive:m,isListViewActive:f,isSidebarActive:p,fallbackStyles:g,isSelected:w,setAttributes:b,clientId:v,sourceLink:h,setPosition:_}=e,{isExample:C,feedbackPlaceholder:E,emailPlaceholder:k,surveyId:S,title:L,header:x,emailResponses:I,triggerLabel:O}=u,[A,R]=(0,D.useState)({}),[B,H]=(0,D.useState)(!1),V=(0,D.useMemo)(Io,[]),j=(0,D.useRef)(null),W=(0,D.useRef)(null),z=(0,D.useRef)(null),{error:q,save:$}=mr((async e=>{(0,i.dispatch)("core/editor").lockPostSaving(v);try{const t=await(e=>fr(T()({path:(0,y.trimEnd)(`/crowdsignal-forms/v1/feedback/${e.surveyId||""}`,"/"),method:"POST",data:e})))({feedbackPlaceholder:e.feedbackPlaceholder,emailPlaceholder:e.emailPlaceholder,sourceLink:e.sourceLink,surveyId:e.surveyId,title:e.title||e.header,emailResponses:e.emailResponses});e.surveyId||b({surveyId:t.surveyId})}finally{(0,i.dispatch)("core/editor").unlockPostSaving(v)}}),{feedbackPlaceholder:E,emailPlaceholder:k,sourceLink:h,surveyId:S,title:L,header:x,emailResponses:I});(0,D.useEffect)((()=>{C||u.surveyId||($(),b({isWidget:V}))}),[]),(0,D.useEffect)((()=>{w||r(Er)}),[w]),(0,D.useEffect)((()=>{window.requestAnimationFrame((()=>H(!B)))}),[m,f,p]),(0,D.useLayoutEffect)((()=>{if(C||!W.current||V)return;_(function(e,t,r,n,o){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a={left:(0,y.isObject)(o)?o.left:o,right:(0,y.isObject)(o)?o.right:o,top:(0,y.isObject)(o)?o.top:o,bottom:(0,y.isObject)(o)?o.bottom:o};return l&&(a=((e,t)=>({left:e.left+t.x+window.scrollX,right:e.right+(window.innerWidth>t.left+t.width?window.innerWidth-t.left-t.width:0),top:e.top+t.y+window.scrollY,bottom:e.bottom+(window.innerHeight>t.top+t.height?window.innerHeight-t.top-t.height:0)}))(a,l.getBoundingClientRect())),{...xr(e,0,a),...Tr(t,n,a)}}(u.x,u.y,j.current.offsetWidth,j.current.offsetHeight,{left:"center"===u.y?10:20,right:"center"===u.y?10:20,top:w?80:20,bottom:20},document.getElementsByClassName("interface-interface-skeleton__content")[0]),W.current.offsetWidth,W.current.offsetHeight);const e=((0,y.max)([W.current.offsetWidth,j.current.offsetHeight])-W.current.offsetWidth)/2;R({"--crowdsignal-forms-feedback__toggle-padding":`${e}px`,minHeight:"center"===u.y?W.current.offsetWidth:0,marginLeft:"center"===u.y&&"left"===u.x?W.current.offsetHeight-W.current.offsetWidth-10:0,marginRight:"center"===u.y&&"right"===u.x?W.current.offsetHeight-W.current.offsetWidth-10:0})}),[B,d,w,_,u.x,u.y,W.current,j.current,O,V]),(0,D.useLayoutEffect)((()=>{z.current&&o(z.current.offsetHeight)}),[u.header,z.current,w]),(0,D.useLayoutEffect)((()=>{if(Io)return;if(W.current&&W.current.ownerDocument!==document)return void c({bottom:0,left:0,right:0,top:0});const e=document.getElementsByClassName("interface-interface-skeleton__content")[0].getBoundingClientRect();c({bottom:window.innerHeight-(e.top+e.height),left:e.left,right:window.innerWidth-(e.left+e.width),top:e.top})}),[B,d,w,W.current]);const K=e=>t=>b({[e]:t}),Z=(0,i.useSelect)((e=>e(N).getAccountInfo())),G=(0,y.get)(Z,["signalCount","shouldDisplay"]),Q=G&&(0,y.get)(Z,["signalCount","count"])>=(0,y.get)(Z,["signalCount","userLimit"]),X=(0,y.get)(Z,["account","email"]),J=U()("crowdsignal-forms-feedback",`align-${u.x}`,`vertical-align-${u.y}`,{"no-shadow":u.hideTriggerShadow,"is-active":w,"is-vertical":"center"===u.y,"is-widget":V}),ee=V&&W.current&&W.current.offsetHeight?`${W.current&&W.current.offsetHeight}px`:null,te={...To(u,g),...A,"--crowdsignal-forms-trigger-height":ee},re={height:n},ne=kr.CLOSED===u.status||kr.CLOSED_AFTER===u.status&&null!==u.closedAfterDateTime&&(new Date).toISOString()>u.closedAfterDateTime,oe=(0,y.get)(Z,"capabilities",[]).includes("hide-branding");return(0,l.createElement)(Ue,{blockName:(0,a.__)("Feedback Button","crowdsignal-forms"),blockIcon:(0,l.createElement)(Cr,null)},(0,l.createElement)(xo,P({currentView:t,onViewChange:r},e)),(0,l.createElement)(Or,P({shouldPromote:G,signalWarning:Q,email:X},e)),V&&(0,l.createElement)(l.Fragment,null,!C&&!V&&Q&&(0,l.createElement)(Ze,null),!C&&!V&&q&&(0,l.createElement)(br,{retryHandler:$}),(0,l.createElement)(Ke,{icon:"warning",status:"warn",isDismissible:!1},(0,a.__)("This widget will appear in a fixed position as selected, in a corner or at an edge.","crowdsignal-forms"))),(0,l.createElement)("div",{ref:j,className:J,style:te},(0,l.createElement)("div",{className:"crowdsignal-forms-feedback__trigger-preview"},(0,l.createElement)("div",{className:"wp-block-button crowdsignal-forms-feedback__trigger-wrapper"},(0,l.createElement)(F.RichText,{ref:W,className:"wp-block-button__link crowdsignal-forms-feedback__trigger",onChange:K("triggerLabel"),value:O,allowedFormats:[],multiline:!1,disableLineBreaks:!0}))),(0,l.createElement)("div",{className:"crowdsignal-forms-feedback__popover-preview"},(C||w||V)&&(0,l.createElement)(l.Fragment,null,!V&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{"aria-modal":"true",role:"dialog",className:"crowdsignal-forms-feedback__popover-overlay",onClick:()=>{(0,i.dispatch)("core/block-editor").clearSelectedBlock(),W.current.parentElement.parentElement.parentElement.blur()},style:s})),!C&&!V&&Q&&(0,l.createElement)(Ze,null),!C&&!V&&q&&(0,l.createElement)(br,{retryHandler:$}),t===Er&&(0,l.createElement)("div",{ref:z,className:"crowdsignal-forms-feedback__popover"},(0,l.createElement)(F.RichText,{tagName:"h3",className:"crowdsignal-forms-feedback__header",onChange:K("header"),value:u.header,allowedFormats:[]}),(0,l.createElement)(M.TextareaControl,{className:"crowdsignal-forms-feedback__input",rows:6,onChange:K("feedbackPlaceholder"),value:u.feedbackPlaceholder}),(0,l.createElement)(M.TextControl,{className:"crowdsignal-forms-feedback__input",onChange:K("emailPlaceholder"),value:u.emailPlaceholder}),(0,l.createElement)("div",{className:"wp-block-button crowdsignal-forms-feedback__button-wrapper"},(0,l.createElement)(F.RichText,{className:"wp-block-button__link crowdsignal-forms-feedback__feedback-button",onChange:K("submitButtonLabel"),value:u.submitButtonLabel,allowedFormats:[],multiline:!1,disableLineBreaks:!0})),!oe&&(0,l.createElement)(Y,{trackRef:"cs-forms-feedback",message:(0,a.__)("Collect your own feedback with Crowdsignal","crowdsignal-forms")},(0,l.createElement)(vr,null))),t===yr&&(0,l.createElement)("div",{className:"crowdsignal-forms-feedback__popover",style:re},(0,l.createElement)(F.RichText,{tagName:"h3",className:"crowdsignal-forms-feedback__header",onChange:K("submitText"),value:u.submitText,allowedFormats:[]}),!oe&&(0,l.createElement)(Y,{trackRef:"cs-forms-feedback",message:(0,a.__)("Collect your own feedback with Crowdsignal","crowdsignal-forms")},(0,l.createElement)(vr,null))),ne&&(0,l.createElement)("div",{className:"crowdsignal-forms-feedback__closed-notice"},(0,a.__)("This Feedback Form is Closed","crowdsignal-forms"))))),e.renderStyleProbe())})),No={title:(0,a.__)("Feedback Button","crowdsignal-forms"),description:(0,a.__)("Add an always visible button that allows your audience to share feedback anytime.","crowdsignal-forms"),category:"crowdsignal-forms",keywords:["crowdsignal",(0,a.__)("feedback","crowdsignal-forms"),(0,a.__)("floating","crowdsignal-forms"),(0,a.__)("contact","crowdsignal-forms"),(0,a.__)("call to action","crowdsignal-forms"),(0,a.__)("cta","crowdsignal-forms"),(0,a.__)("button","crowdsignal-forms"),(0,a.__)("subscribe","crowdsignal-forms"),(0,a.__)("form","crowdsignal-forms"),(0,a.__)("email","crowdsignal-forms"),(0,a.__)("message","crowdsignal-forms")],icon:(0,l.createElement)(Cr,null),edit:Oo,supports:{multiple:!1,html:!1,reusable:!1},attributes:Lr,example:{attributes:{isExample:!0}}},Ao=window.wp.coreData,Ro=window.wp.primitives,Po=e=>{let{size:t=48}=e;return(0,l.createElement)("svg",{className:"crowdsignal-logo",width:`${t}px`,height:`${t}px`,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("circle",{fill:"#fff",cx:"24",cy:"24",r:"24"}),(0,l.createElement)("path",{fill:"transparent",stroke:"#001d2d",strokeDasharray:"0,2.89",strokeLinecap:"round",d:"M24.1678322,45.3146853 C35.8469167,45.3146853 45.3146853,35.8469167 45.3146853,24.1678322 C45.3146853,12.4887477 35.8469167,3.02097902 24.1678322,3.02097902 C12.4887477,3.02097902 3.02097902,12.4887477 3.02097902,24.1678322 C3.02097902,35.8469167 12.4887477,45.3146853 24.1678322,45.3146853 Z"}),(0,l.createElement)("g",{fill:"#4bcee4",transform:"translate(11.076923, 14.769231)"},(0,l.createElement)("path",{d:"M0,10.1915057 L0,2.5910185 C0,1.7186909 0.0257916907,1.17459587 0.077375072,0.941403593 C0.129018997,0.708211319 0.23218576,0.483653545 0.49016321,0.302268264 C0.791187356,0.0777104891 1.18672049,0 2.18430191,0 C3.02707265,0 3.48284694,0.120882983 3.7150327,0.32817176 C3.95581569,0.544095036 4.09343192,0.95867259 4.09343192,1.55463543 L4.09343192,3.16107784 L3.47424971,3.41153911 L3.47424971,1.53736643 C3.47424971,1.10551988 3.42266633,0.8895966 3.25925841,0.742749314 C3.10444772,0.595902029 2.82067858,0.552729535 2.15851022,0.552729535 C1.30714226,0.552729535 1.09215096,0.621805525 0.911548579,0.751383813 C0.679362819,0.924134595 0.619182208,1.26094085 0.619182208,1.90871068 L0.619182208,10.761565 C0.619182208,11.4093348 0.679362819,11.7461411 0.911548579,11.9188919 C1.09215096,12.0484702 1.47914741,12.1175461 2.15851022,12.1175461 C2.82067858,12.1175461 3.10444772,12.0743736 3.25925841,11.9275264 C3.42266633,11.7806791 3.47424971,11.5647558 3.47424971,11.1329092 L3.47424971,9.12915827 L4.09343192,8.878697 L4.09343192,11.1156403 C4.09343192,11.7202376 3.95581569,12.1261806 3.7150327,12.3421039 C3.48284694,12.5493927 3.02707265,12.6702757 2.18430191,12.6702757 C1.35872564,12.6702757 0.791187356,12.5925652 0.49016321,12.3766419 C0.23218576,12.1866221 0.129018997,11.9706989 0.077375072,11.7288721 C0.0257916907,11.5129488 0,10.9947573 0,10.1915057"}),(0,l.createElement)("path",{d:"M7.34630646,4.83697296 L5.68545357,4.83697296 L5.68545357,0.554807353 L7.56439528,0.554807353 C7.97541562,0.554807353 8.26059051,0.615469383 8.38643596,0.771518487 C8.49545084,0.910174554 8.57098174,1.17888171 8.57098174,1.59497197 L8.57098174,3.9008004 C8.57098174,4.24750159 8.47029356,4.48154474 8.31934988,4.62026183 C8.15157563,4.76764493 7.81602713,4.83697296 7.34630646,4.83697296 M8.98200208,4.71558788 C9.09101696,4.5509338 9.17493361,4.28216561 9.17493361,3.9094664 L9.17493361,1.4476499 C9.17493361,0.944838571 9.03231664,0.580805366 8.81422783,0.364094233 C8.5793675,0.121324059 8.14318987,0 7.55600952,0 L5.08150169,0 L5.08150169,11.8063932 L5.68545357,11.5550181 L5.68545357,5.39178032 L7.63148135,5.39178032 C8.18511867,5.39178032 8.47029356,5.7124835 8.47029356,6.37128291 L8.47029356,10.4367374 L9.07424544,10.1853622 L9.07424544,6.22389981 C9.07424544,5.53910239 8.78907055,5.17506918 8.21027595,5.13167814 L8.21027595,5.11434613 C8.5793675,5.0536841 8.84777087,4.92363301 8.98200208,4.71558788"}),(0,l.createElement)("path",{d:"M13.3561043,6.80662225 C13.3561043,7.38028547 13.3046173,7.70560441 13.0986088,7.8854129 C12.9097627,8.04810251 12.5921386,8.0908997 12.0685665,8.0908997 C11.544934,8.0908997 11.2273703,8.04810251 11.0385242,7.8854129 C10.8325158,7.70560441 10.7810288,7.38028547 10.7810288,6.80662225 L10.7810288,1.83220207 C10.7810288,1.25859913 10.8325158,0.933219913 11.0385242,0.753411425 C11.2273703,0.590721815 11.544934,0.547924622 12.0685665,0.547924622 C12.5921386,0.547924622 12.9097627,0.590721815 13.0986088,0.753411425 C13.3046173,0.933219913 13.3561043,1.25859913 13.3561043,1.83220207 L13.3561043,6.80662225 Z M13.5792751,0.350997258 C13.2617114,0.0684755084 12.7380789,0 12.0685665,0 C11.3990541,0 10.8754216,0.0684755084 10.557858,0.350997258 C10.2832002,0.582162377 10.1630034,0.967457667 10.1630034,1.60103695 L10.1630034,7.03778737 C10.1630034,7.67136666 10.2832002,8.05666195 10.557858,8.28782707 C10.8754216,8.57034882 11.3990541,8.63882433 12.0685665,8.63882433 C12.7380789,8.63882433 13.2617114,8.57034882 13.5792751,8.28782707 C13.8539329,8.05666195 13.9741297,7.67136666 13.9741297,7.03778737 L13.9741297,1.60103695 C13.9741297,0.967457667 13.8539329,0.582162377 13.5792751,0.350997258 Z"}),(0,l.createElement)("polygon",{points:"16.3341896 7.34300068 14.538741 0 15.1824002 0 16.7322506 6.43818001 18.2567005 0 19.2136928 0 20.6534742 5.00260718 21.9577264 0 22.584452 0 21.1446706 5.4115283 20.2215457 5.7769602 18.7478969 0.574180131 17.2065133 6.98626662"}),(0,l.createElement)("path",{d:"M24.4293299,3.34422295 L23.6405745,3.34422295 L23.6405745,0.543247996 L24.4293299,0.543247996 C25.1487046,0.543247996 25.3740545,0.840298462 25.3740545,1.94370559 C25.3740545,3.03862728 25.1487046,3.34422295 24.4293299,3.34422295 M24.2906295,0 L23.0079104,0 L23.0079104,3.88747095 L24.2906295,3.88747095 C25.6861151,3.88747095 25.9721198,3.34422295 25.9721198,1.94370559 C25.9721198,0.534762547 25.6861151,0 24.2906295,0"})),(0,l.createElement)("g",{fill:"#384869",transform:"translate(11.076923, 14.769231)"},(0,l.createElement)("path",{d:"M3.30420202,16.4838878 L3.30420202,16.4837035 C3.14742898,16.483642 2.9908337,16.483642 2.83429766,16.483642 L2.83429766,16.4835806 C2.08858889,16.4835806 2.06151207,16.4835806 2.03461299,16.4835806 C1.7892626,16.4835806 1.56654535,16.4834577 1.32812711,16.4834577 C0.766268195,16.4821062 0.555400762,16.444201 0.555400762,15.820393 C0.555400762,15.3262123 0.719579929,15.2342446 1.32812711,15.2276711 C1.58923775,15.2275482 1.85046689,15.2273639 2.77439685,15.2273025 C2.94894461,15.2271796 3.12503284,15.2271796 3.30420202,15.2271182 C3.91049773,15.2288383 4.06892974,15.3953264 4.06892974,15.8727354 L4.06892974,15.9425867 L4.57385029,15.7331558 C4.52419957,14.9958165 4.27073206,14.6969367 3.30420202,14.6866157 L3.30420202,14.6863085 C3.12598082,14.6862471 2.9526773,14.6860628 2.77439685,14.6860014 C2.08852964,14.6860014 2.06186756,14.6860014 2.03461299,14.6860014 C1.79299529,14.6860014 1.55872448,14.6861857 1.31977299,14.6863085 L1.31977299,14.68637 C0.464216447,14.6937421 0,14.921972 0,15.9687578 C0,17.0148064 0.655472438,17.0247589 1.31977299,17.024636 L2.74447607,17.024636 L2.83429766,17.024636 C2.98953022,17.024636 3.13172798,17.0248203 3.28417583,17.0248817 C3.85622558,17.0277692 4.10258321,17.1382287 4.10258321,17.7837231 C4.10258321,18.3062252 3.97490147,18.4538528 3.28417583,18.4634366 C3.10222194,18.4635595 2.923823,18.4637438 2.74447607,18.4638667 C1.8462602,18.4641124 1.59054123,18.4642967 1.31977299,18.4643581 L1.31977299,18.4644196 C0.706604383,18.464051 0.504920556,18.2544972 0.504920556,17.6877621 L0.504920556,17.6179723 L0,17.8274032 C0.049769217,18.6527784 0.345244319,18.9949696 1.31977299,19.0048606 L1.31977299,19.0050449 C1.55937622,19.0051678 1.79104007,19.0054135 2.03461299,19.0054135 C2.06180831,19.0054135 2.08852964,19.0054135 2.80437688,19.0054135 L2.80437688,19.0053521 C2.97181475,19.0052906 3.13664565,19.0051678 3.30420202,19.0051063 L3.30420202,19.0047377 C4.23553812,18.9936795 4.65804322,18.6806697 4.65804322,17.6354198 C4.65804322,16.5891254 3.97028004,16.4882496 3.30420202,16.4838878"}),(0,l.createElement)("polygon",{points:"5.64611299 12.9122823 6.21072429 12.6702757 6.21072429 18.8614331 5.64611299 18.8614331"}),(0,l.createElement)("path",{d:"M11.1510732,13.1081108 L11.1510732,12.839366 C11.1510732,12.0331315 10.711638,11.8063932 9.74988839,11.8063932 C9.71534028,11.8063932 9.68145424,11.806759 9.64786914,11.8072468 C9.50726915,11.8074907 9.36877576,11.8079784 9.23088426,11.8084661 L9.23088426,11.8085271 C8.68515649,11.8085271 8.67035016,11.8085881 8.65608552,11.808649 C7.8425196,11.8302315 7.33994689,12.0331315 7.33994689,13.0325111 L7.33994689,13.6912652 L7.33994689,15.8450649 L7.33994689,17.1760469 L7.33994689,17.2427454 L7.33994689,17.727681 C7.33994689,18.4396598 7.64100901,18.8314981 8.65608552,18.8593602 C8.67041035,18.8593602 8.6850963,18.8594212 9.23088426,18.8594821 C9.36847482,18.8600309 9.50588482,18.8606405 9.64786914,18.8608844 C9.66526357,18.8610673 9.68235706,18.8614331 9.70017281,18.8614331 C10.6453706,18.8614331 11.1510732,18.6599354 11.1510732,17.6857354 L11.1510732,16.7094624 L11.1510732,16.642764 L11.1510732,15.8450649 L11.1510732,15.8151908 L11.1510732,14.9866422 L9.66700903,14.9866422 L9.66700903,15.5241318 L10.5541251,15.5241318 L10.5541251,15.8151908 L10.5541251,15.8450649 L10.5541251,16.263485 L10.5541251,16.642764 L10.5541251,16.7094624 L10.5541251,17.6269017 C10.5541251,18.2315776 10.3800604,18.3240044 9.71672461,18.3240044 C9.69282984,18.3240044 9.67062033,18.3235167 9.64786914,18.3232118 C9.51388987,18.322907 9.38731377,18.3222973 9.26037655,18.3216267 L9.26037655,18.3215047 C8.68521668,18.3214438 8.67071129,18.3213828 8.65608552,18.3213218 C8.13659988,18.3041899 7.93689494,18.1682324 7.93689494,17.5093563 L7.93689494,17.2427454 L7.93689494,17.1760469 L7.93689494,16.263485 L7.93689494,15.8450649 L7.93689494,13.6912652 L7.93689494,13.1668835 C7.93689494,12.5029472 8.05173431,12.3647948 8.65608552,12.3467484 C8.67077148,12.3466874 8.68521668,12.3466265 9.26037655,12.3465655 L9.26037655,12.3464436 C9.38713321,12.3458339 9.5122046,12.3452242 9.64786914,12.3449194 C9.68097273,12.3443707 9.71407632,12.3438829 9.74988839,12.3438829 C10.3136727,12.3438829 10.6039009,12.377476 10.6039009,12.856193 L10.6039009,13.318022 L11.1510732,13.1081108 Z"}),(0,l.createElement)("polygon",{id:"Fill-18",fill:"#384869",points:"16.4778247 8.69919562 16.5224146 14.606966 16.5446502 18.0439659 15.2978527 15.0956699 13.3478748 9.99624285 12.4214486 10.3738282 12.4214486 15.0956699 12.4214486 15.1261836 12.4214486 18.8614331 13.0278593 18.8614331 13.0278593 15.1261836 13.0278593 15.0956699 13.0278593 10.8201754 14.6235491 15.0956699 16.2104039 18.8614331 17.0794918 18.8614331 17.0794918 14.606966 17.0794918 8.49484392"}),(0,l.createElement)("path",{d:"M19.5573998,13.7726612 L20.4566278,8.39789802 L21.347454,13.7726612 L19.5573998,13.7726612 Z M20.8022844,6.91105946 L20.1351706,7.18543106 L18.0675616,18.8604597 L18.7237294,18.8614331 L19.4649801,14.3257238 L21.4399328,14.3257238 L22.2091698,18.8614331 L22.8667576,18.8614331 L20.8022844,6.91105946 Z"}),(0,l.createElement)("polygon",{points:"24.4839578 18.3103496 24.4839578 7.53021014 24.4839578 7.39356083 24.4839578 5.47125541 23.8548274 5.72097081 23.8548274 7.39356083 23.8548274 7.53021014 23.8548274 18.8614331 25.9721198 18.8614331 25.9721198 18.3103496"})))},Do=e=>{let{attributes:t,shouldPromote:r,signalWarning:n}=e;const{editText:o,createText:s,dashboardLink:i}=t;return(0,l.createElement)(F.InspectorControls,null,(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Crowdsignal Settings","crowdsignal-forms"),initialOpen:!0},(0,l.createElement)("div",null,o),(0,l.createElement)(M.PanelRow,null,(0,l.createElement)(M.Button,{variant:"secondary",href:i,target:"_blank",text:s}))),(0,l.createElement)(M.PanelBody,{title:(0,a.__)("Results","crowdsignal-forms"),initialOpen:!0},(0,l.createElement)("div",null,(0,l.createInterpolateElement)((0,a.__)("View results on <a>crowdsignal.com</a>","crowdsignal-forms"),{a:(0,l.createElement)("a",{href:i,target:"_blank",rel:"external noreferrer noopener"})})),(0,l.createElement)(M.PanelRow,null,(0,l.createElement)("div",null,(0,l.createElement)(M.Button,{variant:"secondary",href:i,target:"_blank",text:(0,a.__)("View Results","crowdsignal-forms")})))),r&&(0,l.createElement)(M.PanelBody,{title:"",initialOpen:!0},(0,l.createElement)(M.PanelRow,null,(0,l.createElement)(Te,{signalWarning:n}))))};function Bo(e){let{html:t}=e;return(0,l.createElement)("div",(0,F.useBlockProps)(),(0,l.createElement)(M.SandBox,{html:t}))}var Fo=()=>(0,l.createElement)("div",{className:"wp-block-embed is-loading"},(0,l.createElement)(M.Spinner,null)),Mo=["crowdsignal.com","survey.fm","crowdsignal.net"],Ho=(0,l.createElement)(Ro.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(Ro.Path,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"})),Vo=e=>{let{setIsEditingURL:t}=e;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(F.BlockControls,null,(0,l.createElement)(M.ToolbarGroup,null,(0,l.createElement)(M.ToolbarButton,{className:"components-toolbar__control",label:(0,a.__)("Edit URL","crowdsignal-forms"),icon:Ho,onClick:()=>{t(!0)}}))))},Uo=r(482),jo=r.n(Uo),Wo={url:{type:"string"},caption:{type:"string",source:"html",selector:"figcaption"},type:{type:"string",default:"html"},providerNameSlug:{type:"string",default:"crowdsignal"},allowResponsive:{type:"boolean",default:!0},responsive:{type:"boolean",default:!1},previewable:{type:"boolean",default:!0},createLink:{type:"string",default:"https://crowdsignal.com/support/add-a-multipage-survey-to-any-wordpress-page-or-post/?ref=surveyembedblock"},createText:{type:"string",default:(0,a.__)("Create a new Survey","crowdsignal-forms")},typeText:{type:"string",default:(0,a.__)("survey","crowdsignal-forms")},editText:{type:"string",default:(0,l.createInterpolateElement)((0,a.__)("Edit your surveys on <a>crowdsignal.com</a>","crowdsignal-forms"),{a:(0,l.createElement)("a",{href:"https://app.crowdsignal.com?ref=surveymbedblock",target:"_blank",rel:"external noreferrer noopener"})})},dashboardLink:{type:"string",default:"https://app.crowdsignal.com/?ref=surveyembedblock"},embedMessage:{type:"string",default:(0,a.__)("Paste a link to the survey you want to display on your site","crowdsignal-forms")},placeholderTitle:{type:"string",default:(0,a.__)("Survey Embed","crowdsignal-forms")}},zo=[{name:"crowdsignal-forms/quiz",isDefault:!1,title:(0,a.__)("Quiz","crowdsignal-forms"),description:(0,a.__)("Create a multipage quiz on crowdsignal.com and embed it.","crowdsignal-forms"),icon:(0,l.createElement)((function(){return(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"19",fill:"none",viewBox:"0 0 16 19"},(0,l.createElement)("path",{fill:"#1E1E1E",d:"M7.167 15h1.5v-1.5h-1.5V15zM7.917 6C6.305 6 5 7.326 5 8.963h1.458c0-.815.657-1.482 1.459-1.482s1.458.667 1.458 1.482c0 1.481-2.188 1.296-2.188 3.704h1.459c0-1.667 2.187-1.852 2.187-3.704C10.833 7.326 9.528 6 7.917 6z"}),(0,l.createElement)("path",{fill:"#1E1E1E",fillRule:"evenodd",d:"M4.444 3.325h9.778c.246 0 .445.213.445.475v13.3c0 .262-.2.475-.445.475H1.778c-.246 0-.445-.213-.445-.475V3.8c0-.262.2-.475.445-.475h2.666zM8 0C6.839 0 5.851.793 5.485 1.9H1.778C.796 1.9 0 2.75 0 3.8v13.3C0 18.15.796 19 1.778 19h12.444c.982 0 1.778-.85 1.778-1.9V3.8c0-1.05-.796-1.9-1.778-1.9h-3.707C10.149.793 9.16 0 8 0z",clipRule:"evenodd"}),(0,l.createElement)("path",{fill:"#F3F4F5",d:"M8.75 1.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}))}),null),attributes:{createLink:"https://crowdsignal.com/support/create-a-quiz/?ref=quizembedblock",createText:(0,a.__)("Create a new Quiz","crowdsignal-forms"),placeholderTitle:(0,a.__)("Quiz Embed","crowdsignal-forms"),typeText:(0,a.__)("quiz","crowdsignal-forms"),editText:(0,l.createInterpolateElement)((0,a.__)("Edit your quizzes on <a>crowdsignal.com</a>","crowdsignal-forms"),{a:(0,l.createElement)("a",{href:"https://app.crowdsignal.com/?ref=quizmbedblock",target:"_blank",rel:"external noreferrer noopener"})}),dashboardLink:"https://app.crowdsignal.com/?ref=quizmbedblock",embedMessage:(0,a.__)("Paste a link to the quiz you want to display on your site","crowdsignal-forms")},keywords:[(0,a.__)("quiz","crowdsignal-forms"),(0,a.__)("quizzes","crowdsignal-forms")],isActive:(e,t)=>e.typeText===t.typeText}],qo={title:(0,a.__)("Survey","crowdsignal-forms"),description:(0,a.__)("Create a multipage survey on crowdsignal.com and embed it.","crowdsignal-forms"),category:"crowdsignal-forms",keywords:[(0,a.__)("survey","crowdsignal-forms")],icon:(0,l.createElement)((function(){return(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"19",fill:"none",viewBox:"0 0 16 19"},(0,l.createElement)("path",{fill:"#1E1E1E",fillRule:"evenodd",d:"M4.444 3.325h9.778c.246 0 .445.213.445.475v13.3c0 .262-.2.475-.445.475H1.778c-.246 0-.445-.213-.445-.475V3.8c0-.262.2-.475.445-.475h2.666zM8 0C6.839 0 5.851.793 5.485 1.9H1.778C.796 1.9 0 2.75 0 3.8v13.3C0 18.15.796 19 1.778 19h12.444c.982 0 1.778-.85 1.778-1.9V3.8c0-1.05-.796-1.9-1.778-1.9h-3.707C10.149.793 9.16 0 8 0z",clipRule:"evenodd"}),(0,l.createElement)("path",{fill:"#1E1E1E",fillRule:"evenodd",d:"M13 7.5H3V6h10v1.5zM13 11.5H3V10h10v1.5zM10 15.5H3V14h7v1.5z",clipRule:"evenodd"}),(0,l.createElement)("path",{fill:"#F3F4F5",d:"M8.75 1.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}))}),null),edit:e=>{let{attributes:t,setAttributes:r}=e;const[n,o]=(0,l.useState)(!0),{createText:s,createLink:c,embedMessage:u,placeholderTitle:d}=t,[m,f]=(0,l.useState)(t.url),p=(0,i.useSelect)((e=>e(N).getAccountInfo())),g=(0,y.get)(p,["signalCount","shouldDisplay"]),w=g&&(0,y.get)(p,["signalCount","count"])>=(0,y.get)(p,["signalCount","userLimit"]),{preview:b,fetching:v,cannotEmbed:h}=(0,i.useSelect)((e=>{const{getEmbedPreview:t,isPreviewEmbedFallback:r,isRequestingEmbedPreview:n}=e(Ao.store);if(!m)return{fetching:!1,cannotEmbed:!1};const o=t(m),l=r(m),a=Mo.some((e=>m.includes(e))),s=!!o&&!(!1===o?.html&&void 0===o?.type)&&a;return{preview:s?o:void 0,fetching:n(m),cannotEmbed:!s||l}}),[t.url]);return v?(0,l.createElement)(Ro.View,null,(0,l.createElement)(Do,{attributes:t,shouldPromote:g,signalWarning:w}),(0,l.createElement)(Vo,{setIsEditingURL:o}),(0,l.createElement)(M.Placeholder,null,(0,l.createElement)(Fo,null))):(0,l.createElement)(Ro.View,null,(0,l.createElement)(Do,{attributes:t,shouldPromote:g,signalWarning:w}),(0,l.createElement)(Vo,{setIsEditingURL:o}),v||!b||n?(0,l.createElement)(M.Placeholder,{icon:Po,label:d},(0,l.createElement)("form",{onSubmit:e=>{e.preventDefault(),o(!1),r({url:m})}},(0,l.createElement)("div",{className:"cs-embed__instructions"},u),h&&(0,l.createElement)("span",{className:"cs-embed__error"},(0,a.__)("Unable to embed, please check the URL and try again.","crowdsignal-forms")),(0,l.createElement)("input",{className:"cs-embed__field",label:u,value:m,onChange:e=>f(e.target.value)}),(0,l.createElement)(M.Button,{className:"cs-embed__button",variant:"primary",type:"submit",label:(0,a.__)("Embed","crowdsignal-forms"),text:(0,a.__)("Embed","crowdsignal-forms")})),(0,l.createElement)(M.ExternalLink,{href:c,className:"cs-embed__create-link"},s)):(0,l.createElement)(Bo,{html:b.html}))},save:function(e){let{attributes:t}=e;const{url:r,type:n,providerNameSlug:o}=t;if(!r)return null;const a=jo()("wp-block-embed",{[`is-type-${n}`]:n,[`is-provider-${o}`]:o,[`wp-block-embed-${o}`]:o});return(0,l.createElement)("figure",F.useBlockProps.save({className:a}),(0,l.createElement)("div",{className:"wp-block-embed__wrapper"},`\n${r}\n`))},variations:zo,attributes:Wo,supports:{align:["center","wide","full"]},getEditWrapperProps:e=>{let{align:t}=e;return{"data-align":t}}};const $o={},Ko=["crowdsignal-forms/feedback"];(0,n.registerBlockType)("crowdsignal-forms/poll",Ye),(0,n.registerBlockType)("crowdsignal-forms/vote",dt),(0,n.registerBlockType)("crowdsignal-forms/vote-item",Kt),(0,n.registerBlockType)("crowdsignal-forms/applause",ar),(0,n.registerBlockType)("crowdsignal-forms/nps",_r),(0,n.registerBlockType)("crowdsignal-forms/feedback",No),(0,n.registerBlockType)("crowdsignal-forms/cs-embed",qo),(0,o.addFilter)("editor.BlockListBlock","crowdsignal-forms/with-fixed-position",(e=>t=>{if(!(0,y.includes)(Ko,t.name))return(0,l.createElement)(e,t);const[r,n]=(0,D.useState)({});$o[t.clientId]=n,(0,D.useEffect)((()=>()=>{$o[t.clientId]=null}),[$o,t.clientId]);const o={...(0,y.get)(t,["wrapperProps","style"],{}),...r,position:(0,y.isEmpty)(r)?null:"fixed",margin:0},a={...t.wrapperProps,style:o};return(0,l.createElement)(e,P({},t,{wrapperProps:a}))}),1),(0,o.addFilter)("editor.BlockEdit","crowdsignal-forms/with-fixed-position-control",(e=>t=>{if(!(0,y.includes)(Ko,t.name))return(0,l.createElement)(e,t);const r=(0,D.useCallback)((e=>{$o[t.clientId]((0,y.pick)(e,["top","left","right","bottom"]))}),[t.clientId]);return(0,l.createElement)(e,P({},t,{setPosition:r}))}))}()}();