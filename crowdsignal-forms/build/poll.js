!function(){var e={875:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&e.push(a)}}else if("object"===s){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var i in r)n.call(r,i)&&r[i]&&e.push(i)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},202:function(e){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(o of t.entries())if(!r.has(o[0]))return!1;for(o of t.entries())if(!e(o[1],r.get(o[0])))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(o of t.entries())if(!r.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(t[o]!==r[o])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,s[o]))return!1;for(o=n;0!=o--;){var a=s[o];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r}},49:function(e,t,r){"use strict";var n=r(257);function o(){}function s(){}s.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,s,a){if(a!==n){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:o};return r.PropTypes=r,r}},507:function(e,t,r){e.exports=r(49)()},257:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},116:function(e,t,r){var n=r(82),o=r(557),s=r(262),a=r(95),i=r(431),l=r(131),c=r(701);c.alea=n,c.xor128=o,c.xorwow=s,c.xorshift7=a,c.xor4096=i,c.tychei=l,e.exports=c},82:function(e,t,r){var n;!function(e,o,s){function a(e){var t,r=this,n=(t=4022871197,function(e){e=String(e);for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)});r.next=function(){var e=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=e-(r.c=0|e)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(e),r.s0<0&&(r.s0+=1),r.s1-=n(e),r.s1<0&&(r.s1+=1),r.s2-=n(e),r.s2<0&&(r.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var r=new a(e),n=t&&t.state,o=r.next;return o.int32=function(){return 4294967296*r.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,n&&("object"==typeof n&&i(n,r),o.state=function(){return i(r,{})}),o}o&&o.exports?o.exports=l:r.amdD&&r.amdO?void 0===(n=function(){return l}.call(t,r,t,o))||(o.exports=n):this.alea=l}(0,e=r.nmd(e),r.amdD)},131:function(e,t,r){var n;!function(e,o,s){function a(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,n=t.d,o=t.a;return e=e<<25^e>>>7^r,r=r-n|0,n=n<<24^n>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-n|0,t.d=n<<16^r>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var n=0;n<r.length+20;n++)t.b^=0|r.charCodeAt(n),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var r=new a(e),n=t&&t.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=r.next,o.quick=o,n&&("object"==typeof n&&i(n,r),o.state=function(){return i(r,{})}),o}o&&o.exports?o.exports=l:r.amdD&&r.amdO?void 0===(n=function(){return l}.call(t,r,t,o))||(o.exports=n):this.tychei=l}(0,e=r.nmd(e),r.amdD)},557:function(e,t,r){var n;!function(e,o,s){function a(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var r=new a(e),n=t&&t.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=r.next,o.quick=o,n&&("object"==typeof n&&i(n,r),o.state=function(){return i(r,{})}),o}o&&o.exports?o.exports=l:r.amdD&&r.amdO?void 0===(n=function(){return l}.call(t,r,t,o))||(o.exports=n):this.xor128=l}(0,e=r.nmd(e),r.amdD)},431:function(e,t,r){var n;!function(e,o,s){function a(e){var t=this;t.next=function(){var e,r,n=t.w,o=t.X,s=t.i;return t.w=n=n+1640531527|0,r=o[s+34&127],e=o[s=s+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=o[s]=r^e,t.i=s,r+(n^n>>>16)|0},function(e,t){var r,n,o,s,a,i=[],l=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,l=Math.max(l,t.length)),o=0,s=-32;s<l;++s)t&&(n^=t.charCodeAt((s+32)%t.length)),0===s&&(a=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,s>=0&&(a=a+1640531527|0,o=0==(r=i[127&s]^=n+a)?o+1:0);for(o>=128&&(i[127&(t&&t.length||0)]=-1),o=127,s=512;s>0;--s)n=i[o+34&127],r=i[o=o+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,i[o]=n^r;e.w=a,e.X=i,e.i=o}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var r=new a(e),n=t&&t.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=r.next,o.quick=o,n&&(n.X&&i(n,r),o.state=function(){return i(r,{})}),o}o&&o.exports?o.exports=l:r.amdD&&r.amdO?void 0===(n=function(){return l}.call(t,r,t,o))||(o.exports=n):this.xor4096=l}(0,e=r.nmd(e),r.amdD)},95:function(e,t,r){var n;!function(e,o,s){function a(e){var t=this;t.next=function(){var e,r,n=t.x,o=t.i;return e=n[o],r=(e^=e>>>7)^e<<24,r^=(e=n[o+1&7])^e>>>10,r^=(e=n[o+3&7])^e>>>3,r^=(e=n[o+4&7])^e<<7,e=n[o+7&7],r^=(e^=e<<13)^e<<9,n[o]=r,t.i=o+1&7,r},function(e,t){var r,n=[];if(t===(0|t))n[0]=t;else for(t=""+t,r=0;r<t.length;++r)n[7&r]=n[7&r]<<15^t.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],e.x=n,e.i=0,r=256;r>0;--r)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var r=new a(e),n=t&&t.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=r.next,o.quick=o,n&&(n.x&&i(n,r),o.state=function(){return i(r,{})}),o}o&&o.exports?o.exports=l:r.amdD&&r.amdO?void 0===(n=function(){return l}.call(t,r,t,o))||(o.exports=n):this.xorshift7=l}(0,e=r.nmd(e),r.amdD)},262:function(e,t,r){var n;!function(e,o,s){function a(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),n==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var r=new a(e),n=t&&t.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=r.next,o.quick=o,n&&("object"==typeof n&&i(n,r),o.state=function(){return i(r,{})}),o}o&&o.exports?o.exports=l:r.amdD&&r.amdO?void 0===(n=function(){return l}.call(t,r,t,o))||(o.exports=n):this.xorwow=l}(0,e=r.nmd(e),r.amdD)},701:function(e,t,r){var n;!function(o,s,a){var i,l=256,c=a.pow(l,6),u=a.pow(2,52),d=2*u,f=l-1;function m(e,t,r){var n=[],f=g(h((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(s)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(l):(e=new Uint8Array(l),(o.crypto||o.msCrypto).getRandomValues(e)),b(e)}catch(e){var t=o.navigator,r=t&&t.plugins;return[+new Date,o,r,o.screen,b(s)]}}():e,3),n),m=new p(n),v=function(){for(var e=m.g(6),t=c,r=0;e<u;)e=(e+r)*l,t*=l,r=m.g(1);for(;e>=d;)e/=2,t/=2,r>>>=1;return(e+r)/t};return v.int32=function(){return 0|m.g(4)},v.quick=function(){return m.g(4)/4294967296},v.double=v,g(b(m.S),s),(t.pass||r||function(e,t,r,n){return n&&(n.S&&w(n,m),e.state=function(){return w(m,{})}),r?(a.random=e,t):e})(v,f,"global"in t?t.global:this==a,t.state)}function p(e){var t,r=e.length,n=this,o=0,s=n.i=n.j=0,a=n.S=[];for(r||(e=[r++]);o<l;)a[o]=o++;for(o=0;o<l;o++)a[o]=a[s=f&s+e[o%r]+(t=a[o])],a[s]=t;(n.g=function(e){for(var t,r=0,o=n.i,s=n.j,a=n.S;e--;)t=a[o=f&o+1],r=r*l+a[f&(a[o]=a[s=f&s+t])+(a[s]=t)];return n.i=o,n.j=s,r})(l)}function w(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function h(e,t){var r,n=[],o=typeof e;if(t&&"object"==o)for(r in e)try{n.push(h(e[r],t-1))}catch(e){}return n.length?n:"string"==o?e:e+"\0"}function g(e,t){for(var r,n=e+"",o=0;o<n.length;)t[f&o]=f&(r^=19*t[f&o])+n.charCodeAt(o++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(g(a.random(),s),e.exports){e.exports=m;try{i=r(440)}catch(e){}}else void 0===(n=function(){return m}.call(t,r,t,e))||(e.exports=n)}("undefined"!=typeof self?self:this,[],Math)},440:function(){}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e=window.wp.element,t=window.React;function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}var o=r(116),s=r.n(o),a=window.lodash,i=r(875),l=r.n(i),c=window.wp.htmlEntities,u=window.wp.i18n;window.wp.blocks;const d=Object.freeze({THANK_YOU:"thank-you",CUSTOM_TEXT:"custom-text",REDIRECT:"redirect",RESULTS:"results"}),f=Object.freeze({THEME_DEFAULT:"theme-default",GEORGIA:"georgia",PALATINO:"palatino",TIMES_NEW_ROMAN:"times-new-roman",ARIAL:"arial",IMPACT:"impact",LUCIDA:"lucida",TAHOMA:"tahoma",TREBUCHET:"trebuchet",VERDANA:"verdana",COURIER:"courier",CABIN:"Cabin",CHIVO:"Chivo",OPEN_SANS:"Open+Sans",FIRA_SANS:"Fira+Sans",ROBOTO:"Roboto",NUNITO:"Nunito",OVERPASS:"Overpass",LATO:"Lato",LIBRE_FRANKLIN:"Libre+Franklin",MONTSERRAT:"Montserrat",POPPINS:"Poppins",RUBIK:"Rubik",RALEWAY:"Raleway",JOSEFIN_SANS:"Josefin+Sans",ALEGREYA_SANS:"Alegreya+Sans",OSWALD:"Oswald"}),m=Object.freeze([f.CABIN,f.CHIVO,f.OPEN_SANS,f.FIRA_SANS,f.ROBOTO,f.NUNITO,f.OVERPASS,f.LATO,f.LIBRE_FRANKLIN,f.MONTSERRAT,f.POPPINS,f.RUBIK,f.RALEWAY,f.JOSEFIN_SANS,f.ALEGREYA_SANS,f.OSWALD]),p=Object.freeze({[f.THEME_DEFAULT]:null,[f.GEORGIA]:"Georgia, serif",[f.PALATINO]:'"Palatino Linotype", "Book Antiqua", Palatino, serif',[f.TIMES_NEW_ROMAN]:'"Times New Roman", Times, serif',[f.ARIAL]:"Arial, Helvetica, sans-serif",[f.IMPACT]:"Impact, Charcoal, sans-serif",[f.LUCIDA]:'"Lucida Sans Unicode", "Lucida Grande", sans-serif',[f.TAHOMA]:"Tahoma, Geneva, sans-serif",[f.TREBUCHET]:'"Trebuchet MS", Helvetica, sans-serif',[f.VERDANA]:"Verdana, Geneva, sans-serif",[f.COURIER]:'"Courier New", Courier, monospace',[f.CABIN]:'"Cabin", sans-serif',[f.CHIVO]:'"Chivo", sans-serif',[f.OPEN_SANS]:'"Open Sans", sans-serif',[f.FIRA_SANS]:'"Fira Sans", sans-serif',[f.ROBOTO]:'"Roboto", sans-serif',[f.NUNITO]:'"Nunito", sans-serif',[f.OVERPASS]:'"Overpass", sans-serif',[f.LATO]:'"Lato", sans-serif',[f.LIBRE_FRANKLIN]:'"Libre Franklin", sans-serif',[f.MONTSERRAT]:'"Montserrat", sans-serif',[f.POPPINS]:'"Poppins", sans-serif',[f.RUBIK]:'"Rubik", sans-serif',[f.RALEWAY]:'"Raleway", sans-serif',[f.JOSEFIN_SANS]:'"Josefin Sans", sans-serif',[f.ALEGREYA_SANS]:'"Alegreya Sans", sans-serif',[f.OSWALD]:'"Oswald", sans-serif'}),w=Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"}),h=Object.freeze({SHOW_RESULTS:"show-results",SHOW_CLOSED_BANNER:"show-closed-banner",HIDDEN:"hidden"}),g=Object.freeze({RADIO:"radio",BUTTON:"button"}),b=Object.freeze({LIST:"list",INLINE:"inline"}),v=e=>(0,a.includes)(f,e)?p[e]:null,L=(e,t)=>{var r,n,o,s;const i=(0,a.isEmpty)(e.textColor)?t.textColor:e.textColor;return(0,a.mapKeys)({borderColor:null!==(r=e.borderColor)&&void 0!==r?r:t.accentColor,borderRadius:`${e.borderRadius}px`,borderWidth:`${e.borderWidth}px`,bgColor:e.backgroundColor,bodyFontFamily:null!==(n=v(e.fontFamily))&&void 0!==n?n:t.textFont,questionFontFamily:null!==(o=v(e.fontFamily))&&void 0!==o?o:t.headingFont,submitButtonBgColor:e.submitButtonBackgroundColor||t.accentColor,submitButtonTextColor:e.submitButtonTextColor||t.textColorInverted,textColor:i,textColorProperties:null!==(s=C(i))&&void 0!==s?s:"0, 0, 0",contentWideWidth:t.contentWideWidth},((e,t)=>`--crowdsignal-forms-${(0,a.kebabCase)(t)}`))},C=e=>!e||"string"!=typeof e||-1===e.indexOf("rgb")&&0!==e.indexOf("#")||-1<e.indexOf("rgba")?null:(0===e.indexOf("#")&&(e=E(e)),e.match(/\((.*?)\)/)[1]),E=e=>{let t=0,r=0,n=0;const o=4===e.length?`#${e[1]+e[1]+e[2]+e[2]+e[3]+e[3]}`:e;return 7===o.length&&(t=parseInt(o.substr(1,2),16)||0,r=parseInt(o.substr(3,2),16)||0,n=parseInt(o.substr(5,2),16)||0),`rgb(${t}, ${r}, ${n})`};var y=r(202),S=r.n(y),x=window.wp.compose;const _=e=>{let t=window.getComputedStyle(e).backgroundColor;for(;"rgba(0, 0, 0, 0)"===t&&e.parentNode&&e.parentNode.nodeType===window.Node.ELEMENT_NODE;)e=e.parentNode,t=window.getComputedStyle(e).backgroundColor;return t},O=()=>(0,e.createElement)("div",{className:"crowdsignal-forms__style-probe"},(0,e.createElement)("p",null),(0,e.createElement)("h3",null,"Text"),(0,e.createElement)("div",{className:"wp-block-button"},(0,e.createElement)("div",{className:"wp-block-button__link"})),(0,e.createElement)("div",{className:"entry-content"},(0,e.createElement)("div",{className:"alignwide"}))),N=e=>{if(null===e)return{};const t=e.querySelector(".wp-block-button__link"),r=e.querySelector("p"),n=e.querySelector("h3"),o=e.querySelector(".alignwide");let s=_(t);const a=_(r),i=window.getComputedStyle(r).color;if(s===a){s=(l=t,"0px"!==window.getComputedStyle(l).borderBlockStartWidth?window.getComputedStyle(l).borderBlockStartColor:null)||i}var l;return{accentColor:s,backgroundColor:a,textColor:i,textColorInverted:window.getComputedStyle(t).color,textFont:window.getComputedStyle(r).fontFamily,textSize:window.getComputedStyle(r).fontSize,headingFont:window.getComputedStyle(n).fontFamily,contentWideWidth:window.getComputedStyle(o).maxWidth}};var A=t=>{let{hasVoted:r,isPollClosed:n,isPollHidden:o,showSubmitMessage:s}=t;const a=l()({"is-transparent":s},"crowdsignal-forms-poll__closed-banner");return(0,e.createElement)("div",{className:a},o&&(0,u.__)("This Poll is Hidden","crowdsignal-forms"),n&&!o&&(0,u.__)("This Poll is Closed","crowdsignal-forms"),r&&(0,u.__)("Thanks For Voting!","crowdsignal-forms"))},R=r(507),k=r.n(R);function T(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var I=function e(t,r){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=T({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in o)o[a]&&(s+="; "+a,!0!==o[a]&&(s+="="+o[a].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+s}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var s=r[o].split("="),a=s.slice(1).join("=");try{var i=decodeURIComponent(s[0]);if(n[i]=t.read(a,i),e===i)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",T({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,T({},this.attributes,t))},withConverter:function(t){return e(T({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});window.wp.apiFetch;class M extends Error{}class F extends M{constructor(){super((0,u.__)("Server error. Please try again.","crowdsignal-forms"))}}const B=function(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{data:n,error:o,loading:s}=((n,o)=>{const[s,a]=(0,t.useState)(null),[i,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{u(!0),l(null),a(null),async function(e){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?null:window.fetch(`https://api.crowdsignal.com/v3/polls/${e}/results`,{method:"GET",headers:{"content-type":"application/json"}}).then((e=>{if(e.status>=200&&e.status<300)return e.json();throw e})).then((e=>{if(404===e.status)return{};if(e.error)throw new Error(e.message);return e.results.votes_by_answer}))}(e,r).then(a).catch(l).finally((()=>u(!1)))}),o),{data:s,error:i,loading:c}})(0,[e]);return{error:o,loading:s,results:n}},D=t=>{let{error:r,loading:n,text:o,totalVotes:s,votes:a}=t;const i=l()("crowdsignal-forms-poll__answer-results",{"is-error":r,"is-loading":n}),d=!n&&!r,f=0===s?0:100*a/s,m={width:`${parseInt(f,10)}%`};return(0,e.createElement)("div",{className:i},(0,e.createElement)("div",{className:"crowdsignal-forms-poll__answer-results-labels"},(0,e.createElement)("span",{className:"crowdsignal-forms-poll__answer-results-answer"},(0,c.decodeEntities)(o)),(0,e.createElement)("span",{className:"crowdsignal-forms-poll__answer-results-votes"},d&&(0,u.sprintf)(/* translators: %s: Number of votes. */
(0,u._n)("%s vote","%s votes",a,"crowdsignal-forms"),a.toLocaleString())),(0,e.createElement)("span",{className:"crowdsignal-forms-poll__answer-results-percent"},d&&`${f.toFixed(2)}%`)),(0,e.createElement)("div",{className:"crowdsignal-forms-poll__answer-results-progress-track"},(0,e.createElement)("div",{className:"crowdsignal-forms-poll__answer-results-progress-bar",style:m})))};D.propTypes={loading:k().bool,text:k().string.isRequired,totalVotes:k().number,votes:k().number};var j=D,U=t=>{let{showLogo:r,children:n,message:o,trackRef:s="cs-forms-poll"}=t;return(0,e.createElement)("div",{className:"crowdsignal-forms__footer-branding"},(0,e.createElement)("a",{className:"crowdsignal-forms__footer-cs-link",href:"https://crowdsignal.com?ref="+s,target:"_blank",rel:"noopener noreferrer"},o||(0,u.__)("Create your own poll with Crowdsignal","crowdsignal-forms")),n,r&&(0,e.createElement)("a",{href:"https://crowdsignal.com?ref="+s,target:"_blank",rel:"noopener noreferrer"},(0,e.createElement)("img",{className:"crowdsignal-forms__footer-branding-logo",src:"https://app.crowdsignal.com/images/svg/cs-logo-dots.svg",alt:"Crowdsignal sticker"})))};const P=r=>{let{answers:n,pollIdFromApi:o,setErrorMessage:s,hideBranding:i}=r;const{error:c,loading:d,results:f}=B(o);(0,t.useEffect)((()=>{s(c?(0,u.__)("Unfortunately, we're having some trouble retrieving the results for this poll at this time.","crowdsignal-forms"):"")}),[c]);const m=l()("crowdsignal-forms-poll__results",{"is-error":!!c,"is-loading":d}),p=(0,a.sum)((0,a.values)(f));return(0,e.createElement)("div",{className:m},(0,e.createElement)("div",{className:"crowdsignal-forms-poll__results-list"},(0,a.map)(n,(t=>{var r;return!(e=>(0,a.isEmpty)(e)||void 0===e.text||null===e.text||""===e.text)(t)&&(0,e.createElement)(j,{key:t.answerId,error:!!c,loading:d,text:t.text,totalVotes:p,votes:f&&null!==(r=f[t.answerIdFromApi])&&void 0!==r?r:0})}))),(0,e.createElement)("div",{className:"crowdsignal-forms-poll__results-footer"},(0,e.createElement)("span",{className:"crowdsignal-forms-poll__results-total"},(0,u.sprintf)(/* translators: %s: Number of votes */
(0,u._n)("%s total vote","%s total votes",p,"crowdsignal-forms"),p?p.toLocaleString():0)),!i&&(0,e.createElement)(U,null)))};P.propTypes={pollIdFromApi:k().number,answers:k().arrayOf(k().shape({answerId:k().string.isRequired,answerIdFromApi:k().number,text:k().string})).isRequired,setErrorMessage:k().func.isRequired,hideBranding:k().bool};var V=P;const Z=t=>{let{answerIdFromApi:r,answerStyle:n,hasVoted:o,isMultipleChoice:s,isSelected:a,isVoting:i,isFocused:u,onSelect:d,onFocus:f,text:m}=t;const p=e=>d(parseInt(e.target.attributes.answerid.value,10)),w=l()("crowdsignal-forms-poll__answer",{"is-multiple-choice":s,"is-selected":a,"is-focused":u,"is-button":g.BUTTON===n}),h=`poll-answer-${r}`;return(0,e.createElement)("div",{className:w},g.RADIO===n&&(0,e.createElement)("label",{className:w,htmlFor:h,tabIndex:"-1"},(0,e.createElement)("input",{className:"crowdsignal-forms-poll__input",id:h,name:"answer",onChange:p,selected:a,type:s?"checkbox":"radio",answerid:r,disabled:o||i,tabIndex:"0","aria-label":m,onFocus:e=>f(parseInt(e.target.attributes.answerid.value,10))}),(0,e.createElement)("div",{className:"crowdsignal-forms-poll__check"}),(0,e.createElement)("div",{className:"crowdsignal-forms-poll__answer-label-wrapper"},(0,e.createElement)("div",{className:"crowdsignal-forms-poll__answer-label"},(0,c.decodeEntities)(m)))),g.BUTTON===n&&(0,e.createElement)("div",{className:"wp-block-button crowdsignal-forms-poll__block-button"},(0,e.createElement)("input",{type:"submit",className:"wp-block-button__link crowdsignal-forms-poll__submit-button",value:(0,c.decodeEntities)(m),answerid:r,onClick:e=>{e.preventDefault(),p(e)}})))};Z.propTypes={answerIdFromApi:k().number.isRequired,hasVoted:k().bool,isMultipleChoice:k().bool,isSelected:k().bool,isVoting:k().bool,onSelect:k().func.isRequired,text:k().string.isRequired};var q=Z;const z=r=>{let{answers:o,answerStyle:s,buttonAlignment:i,hasVoted:c,isMultipleChoice:u,isVoting:d,onSubmit:f,submitButtonLabel:m,hideBranding:p}=r;const[w,h]=(0,t.useState)([]),v=e=>g.BUTTON===s?(h([e]),f([e])):u?(0,a.includes)(w,e)?h((0,a.without)(w,e)):void h([...w,e]):h([e]),[L,C]=(0,t.useState)([]),E=e=>C([e]),y=l()({"is-button":g.BUTTON===s,"is-inline-button-alignment":b.INLINE===i},"crowdsignal-forms-poll__options");return(0,e.createElement)("form",{className:"crowdsignal-forms-poll__form",onSubmit:e=>{e.preventDefault(),f(w)}},(0,e.createElement)("div",{className:y},(0,a.map)(o,((t,r)=>(0,e.createElement)(q,n({key:`poll-answer-${r}`,answerStyle:s,isMultipleChoice:u,isSelected:(0,a.includes)(w,t.answerIdFromApi),isFocused:(0,a.includes)(L,t.answerIdFromApi),onSelect:v,onFocus:E,hasVoted:c,isVoting:d},t))))),!c&&g.RADIO===s&&(0,e.createElement)("div",{className:"crowdsignal-forms-poll__actions"},(0,e.createElement)("div",{className:"wp-block-button crowdsignal-forms-poll__block-button"},(0,e.createElement)("input",{type:"submit",className:"wp-block-button__link crowdsignal-forms-poll__submit-button",disabled:d||!w.length,value:m}))),!p&&(0,e.createElement)("div",{className:"wp_block-crowdsignal-forms-poll__vote-branding"},(0,e.createElement)(U,{showLogo:!1})))};z.propTypes={answers:k().array.isRequired,isMultipleChoice:k().bool,onSubmit:k().func.isRequired,submitButtonLabel:k().string.isRequired};var H=z,W=t=>{let{children:r}=t;return(0,e.createElement)("div",{className:"crowdsignal-forms-poll__error-banner"},r)},$=()=>(0,e.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M0 12C0 5.37258 5.37258 0 12 0C18.6274 0 24 5.37258 24 12C24 18.6274 18.6274 24 12 24C5.37258 24 0 18.6274 0 12Z",fill:"white"}),(0,e.createElement)("mask",{id:"maskClose","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"5",y:"5",width:"14",height:"14"},(0,e.createElement)("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"white"})),(0,e.createElement)("g",{mask:"url(#maskClose)"},(0,e.createElement)("rect",{width:"24",height:"24",fill:"black"}))),G=()=>(0,e.createElement)("svg",{width:"34",height:"34",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.6667 0C7.46667 0 0 7.46667 0 16.6667C0 25.8667 7.46667 33.3333 16.6667 33.3333C25.8667 33.3333 33.3333 25.8667 33.3333 16.6667C33.3333 7.46667 25.8667 0 16.6667 0ZM16.6667 30C9.31667 30 3.33333 24.0167 3.33333 16.6667C3.33333 9.31667 9.31667 3.33333 16.6667 3.33333C24.0167 3.33333 30 9.31667 30 16.6667C30 24.0167 24.0167 30 16.6667 30ZM13.3333 20.2833L24.3167 9.3L26.6667 11.6667L13.3333 25L6.66667 18.3333L9.01667 15.9833L13.3333 20.2833Z",fill:"var(--crowdsignal-forms-submit-button-bg-color)"}),(0,e.createElement)("mask",{id:"maskCheck","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"34",height:"34"},(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.6667 0C7.46667 0 0 7.46667 0 16.6667C0 25.8667 7.46667 33.3333 16.6667 33.3333C25.8667 33.3333 33.3333 25.8667 33.3333 16.6667C33.3333 7.46667 25.8667 0 16.6667 0ZM16.6667 30C9.31667 30 3.33333 24.0167 3.33333 16.6667C3.33333 9.31667 9.31667 3.33333 16.6667 3.33333C24.0167 3.33333 30 9.31667 30 16.6667C30 24.0167 24.0167 30 16.6667 30ZM13.3333 20.2833L24.3167 9.3L26.6667 11.6667L13.3333 25L6.66667 18.3333L9.01667 15.9833L13.3333 20.2833Z"})),(0,e.createElement)("g",{mask:"url(#maskCheck)"})),Y=t=>{let{className:r}=t;return(0,e.createElement)("svg",{width:"88",height:"88",viewBox:"0 0 88 88",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r},(0,e.createElement)("g",{filter:"url(#filterThankYou)"},(0,e.createElement)("path",{d:"M44 80C66.0914 80 84 62.0914 84 40C84 17.9086 66.0914 0 44 0C21.9086 0 4 17.9086 4 40C4 62.0914 21.9086 80 44 80Z",fill:"#384869"}),(0,e.createElement)("path",{d:"M26.0226 27.1047L27.2135 22.9517L28.6403 23.3609L29.0032 22.0954L24.5573 20.8206L24.1945 22.086L25.6214 22.4952L24.4305 26.6481L26.0226 27.1047ZM33.0856 29.1299L34.6393 23.7116L33.0472 23.2551L32.4572 25.3128L30.5497 24.7658L31.1397 22.7081L29.5476 22.2516L27.9939 27.6699L29.586 28.1265L30.1868 26.0312L32.0943 26.5782L31.4935 28.6734L33.0856 29.1299ZM37.4113 30.3703L39.1085 30.857L38.8937 24.9315L36.896 24.3587L33.5738 29.2699L35.1959 29.7351L35.7865 28.7381L37.4387 29.2119L37.4113 30.3703ZM37.4837 25.8804L37.5138 25.889L37.4715 28.0063L36.3976 27.6983L37.4837 25.8804ZM41.0986 31.4276L41.9169 28.5739L41.947 28.5825L43.2352 32.0403L44.4556 32.3902L46.0092 26.9719L44.5073 26.5412L43.7019 29.3499L43.6719 29.3412L42.3857 25.9328L41.1504 25.5786L39.5967 30.997L41.0986 31.4276ZM46.7986 33.0621L47.2056 31.6427L47.7936 31.1936L48.4057 33.5229L50.2569 34.0537L49.2542 30.5072L51.728 28.6117L50.0571 28.1325L47.7234 29.9504L47.6934 29.9417L48.3523 27.6437L46.7602 27.1872L45.2065 32.6056L46.7986 33.0621ZM55.281 35.4944L55.7731 33.7784L58.6859 30.6068L57.0225 30.1298L55.4426 32.0541L55.4125 32.0455L55.0924 29.5764L53.3914 29.0887L54.181 33.3218L53.6889 35.0378L55.281 35.4944ZM61.4239 31.2903C59.7492 30.8101 58.3861 31.5815 57.8897 33.3125C57.3934 35.0435 58.1379 36.4152 59.8163 36.8964C61.491 37.3767 62.853 36.6091 63.3494 34.878C63.8458 33.147 63.0986 31.7705 61.4239 31.2903ZM61.0599 32.5595C61.7246 32.7501 61.9964 33.4742 61.7273 34.4129C61.4592 35.3479 60.8486 35.8189 60.1803 35.6273C59.5119 35.4356 59.2438 34.7126 59.5119 33.7776C59.781 32.8389 60.3953 32.3689 61.0599 32.5595ZM66.3384 32.8012L64.7463 32.3446L63.7461 35.833C63.3918 37.0683 64.1232 38.1314 65.5539 38.5417C66.9845 38.9519 68.1681 38.4379 68.5223 37.2025L69.5226 33.7142L67.9305 33.2577L66.9809 36.5695C66.8172 37.1403 66.4462 37.3712 65.9318 37.2237C65.4174 37.0762 65.2251 36.6838 65.3888 36.113L66.3384 32.8012ZM36.4693 42.5838L37.0195 40.665L39.0246 41.24L39.367 40.0459L37.3619 39.4709L37.6601 38.4308L39.8755 39.0661L40.2384 37.8007L36.4309 36.7089L34.8772 42.1273L36.4693 42.5838ZM43.4269 38.6134C41.7522 38.1332 40.3892 38.9045 39.8928 40.6356C39.3964 42.3666 40.141 43.7382 41.8194 44.2195C43.4941 44.6997 44.8561 43.9321 45.3525 42.2011C45.8488 40.4701 45.1016 39.0936 43.4269 38.6134ZM43.063 39.8826C43.7276 40.0731 43.9995 40.7972 43.7303 41.7359C43.4622 42.6709 42.8517 43.142 42.1833 42.9503C41.515 42.7587 41.2468 42.0357 41.5149 41.1007C41.7841 40.162 42.3984 39.692 43.063 39.8826ZM48.0045 41.2995L48.6654 41.489C49.0934 41.6117 49.2996 41.9838 49.1844 42.3856C49.0671 42.7948 48.7144 42.9904 48.2675 42.8622L47.6104 42.6738L48.0045 41.2995ZM47.3089 43.7252L47.8309 43.8748L48.1659 45.9377L49.9457 46.4481L49.5058 44.0991C50.1503 43.9913 50.6348 43.4638 50.8179 42.8255C51.1506 41.6652 50.602 40.7724 49.1563 40.3579L46.7494 39.6677L45.1957 45.086L46.7878 45.5426L47.3089 43.7252ZM26.5905 52.2347L29.7888 47.2879L28.0315 46.784L26.0433 50.4442L26.0133 50.4356L26.2667 46.278L24.4343 45.7525L24.5253 51.6425L26.5905 52.2347ZM32.7521 48.036C31.0774 47.5558 29.7143 48.3272 29.218 50.0582C28.7216 51.7892 29.4661 53.1608 31.1446 53.6421C32.8193 54.1223 34.1813 53.3547 34.6776 51.6237C35.174 49.8927 34.4268 48.5162 32.7521 48.036ZM32.3882 49.3052C33.0528 49.4958 33.3247 50.2199 33.0555 51.1586C32.7874 52.0936 32.1769 52.5646 31.5085 52.373C30.8401 52.1813 30.572 51.4583 30.8401 50.5233C31.1093 49.5846 31.7236 49.1146 32.3882 49.3052ZM37.0705 55.2398L38.2613 51.0868L39.6882 51.496L40.0511 50.2306L35.6052 48.9557L35.2424 50.2211L36.6692 50.6303L35.4784 54.7832L37.0705 55.2398ZM40.6339 56.2616L42.1876 50.8432L40.5955 50.3867L39.0418 55.805L40.6339 56.2616ZM42.8869 56.9076L43.7052 54.0538L43.7352 54.0625L45.0234 57.5202L46.2438 57.8702L47.7975 52.4518L46.2955 52.0211L45.4901 54.8298L45.4601 54.8212L44.174 51.4128L42.9386 51.0585L41.3849 56.4769L42.8869 56.9076ZM52.7701 57.2465L52.9747 56.533L50.6166 55.8569L50.3129 56.9157L51.139 57.1526L51.11 57.2256C50.94 57.6482 50.4891 57.8318 49.9709 57.6832C49.2725 57.483 48.9872 56.7632 49.2704 55.7756C49.5471 54.8106 50.1045 54.369 50.7804 54.5628C51.2385 54.6942 51.5209 55.0556 51.5119 55.4837L53.0777 55.9327C53.2763 54.7868 52.4918 53.6963 51.1325 53.3065C49.4615 52.8274 48.1511 53.5569 47.6418 55.333C47.1261 57.1316 47.854 58.4335 49.5738 58.9266C51.1471 59.3778 52.3448 58.7297 52.7701 57.2465ZM54.5376 54.3845L53.6262 58.0731L54.9329 58.4477L56.1146 54.8367L54.5376 54.3845ZM53.7294 60.1792C54.1649 60.3041 54.6201 60.077 54.7407 59.6564C54.8603 59.2396 54.5945 58.8058 54.159 58.681C53.7159 58.5539 53.2644 58.782 53.1449 59.1988C53.0243 59.6194 53.2863 60.0521 53.7294 60.1792Z",fill:"white"}),(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M44 75.2C63.4405 75.2 79.2 59.4404 79.2 40C79.2 20.5596 63.4405 4.80002 44 4.80002C24.5596 4.80002 8.80005 20.5596 8.80005 40C8.80005 59.4404 24.5596 75.2 44 75.2Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"0.1 4"})),(0,e.createElement)("defs",null,(0,e.createElement)("filter",{id:"filterThankYou",x:"0",y:"0",width:"88",height:"88",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},(0,e.createElement)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,e.createElement)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,e.createElement)("feOffset",{dy:"4"}),(0,e.createElement)("feGaussianBlur",{stdDeviation:"2"}),(0,e.createElement)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,e.createElement)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),(0,e.createElement)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))};const K=e=>{const t=e.target;t&&(t.paused?t.play():t.pause())};var X,J,Q=t=>{let{confirmMessageType:r,customConfirmMessage:n,setDismissSubmitMessage:o,hideBranding:s}=t;return(0,e.createElement)("div",{className:"crowdsignal-forms-poll__submit-message-container"},(0,e.createElement)("div",{className:"crowdsignal-forms-poll__submit-message"},d.THANK_YOU===r&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("video",{muted:!0,autoPlay:!0,loop:!0,playsInline:!0,poster:"https://crowdsignal.files.wordpress.com/2020/02/thumbs-up-video-placeholder.jpg",width:"100%",onClick:K},(0,e.createElement)("source",{src:"https://crowdsignal.files.wordpress.com/2019/08/thumbs-up-cs.mp4",type:"video/mp4"})),(0,e.createElement)(Y,{className:"crowdsignal-forms-poll__thank-you-sticker"}),!s&&(0,e.createElement)("img",{className:"crowdsignal-forms-poll__thank-you-cs-sticker",src:"https://app.crowdsignal.com/images/svg/cs-logo-dots.svg",alt:"Crowdsignal sticker"})),d.CUSTOM_TEXT===r&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"crowdsignal-forms-poll__custom-message-check"},(0,e.createElement)(G,null)),(0,e.createElement)("div",{className:"crowdsignal-forms-poll__custom-message"},(0,a.isEmpty)(n)?(0,u.__)("Thanks for voting!","crowdsignal-forms"):n)),(0,e.createElement)("button",{className:"crowdsignal-forms-poll__dismiss-submit-message",onClick:()=>o(!0)},(0,e.createElement)($,null))),(0,e.createElement)("div",{className:"crowdsignal-forms-poll__submit-message-footer"},!s&&(0,e.createElement)(U,{showLogo:d.THANK_YOU!==r})))},ee=(X=r=>{let{attributes:o,fallbackStyles:i,renderStyleProbe:p}=r;const[b]=(0,t.useState)(Math.random()),[v,C]=(0,t.useState)(""),[E,y]=(0,t.useState)(!1),{apiPollData:S}=o,x=S.id,{hasVoted:_,isVoting:O,vote:N}=function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=`cs-poll-${e}`,[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)("");return(0,t.useEffect)((()=>{r&&void 0!==I.get(o)&&(l(!0),u(I.get(o)))}),[]),{hasVoted:i,isVoting:s,vote:async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{a(!0);const i=await(async e=>{const t=(new Date).getTime(),r=await window.fetch(`https://poll.fm/n/5430eeac3911395001d731d9702fc38b/${e}?${t}&format=json`);if(!r.ok)throw new F;const n=await r.json();if(!n.nonce)throw new F;return n.nonce})(e);if(await(async(e,t,r,n)=>{const o=r.join(","),s=await window.fetch(`https://polls.polldaddy.com/vote-js.php?format=json&p=${t}&b=1&a=${o}&o=&va=16&cookie=0&n=${e}&url=${encodeURIComponent(window.location)}&vi=${n}`);if(!s.ok)throw new F;const a=await s.json();if("error"===a.status)throw new M(a.error)})(i,e,t,s),l(!0),r){const e=n?t.join(","):(new Date).getTime();I.set(o,e,{sameSite:"Strict",expires:365}),u(e)}}finally{a(!1)}},storedCookieValue:c}}(x,o.hasOneResponsePerComputer);d.REDIRECT===o.confirmMessageType&&(o.confirmMessageType=d.THANK_YOU);const R=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;return w.CLOSED===e||w.CLOSED_AFTER===e&&new Date(t)<r}(o.pollStatus,o.closedAfterDateTime);if(R&&h.HIDDEN===o.closedPollState)return null;const k=R&&h.SHOW_RESULTS===o.closedPollState||_&&d.RESULTS===o.confirmMessageType,T=_&&!k&&!E,B=d.THANK_YOU===o.confirmMessageType,D=function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return l()({"has-bg-color":e.backgroundColor,"has-text-color":e.textColor,"has-submit-button-bg-color":e.submitButtonBackgroundColor,"has-submit-button-text-color":e.submitButtonTextColor,"has-border-radius":null!==(t=e.borderRadius)&&void 0!==t&&t,"has-box-shadow":e.hasBoxShadow},n)}(o,o.className,"crowdsignal-forms-poll",{"has-voted":_,"is-closed":R,"is-voting":O,"has-default-thankyou":B}),j={width:"full"!==o.align?`${o.width}%`:"auto",...L(o,i)},U=(0,a.reduce)(S.answers,((e,t)=>(e[t.client_id]=t.id,e)),{}),P=(0,a.map)(o.answers,(e=>{const t=U[e.answerId];return{...e,answerIdFromApi:t}})),Z=((e,t)=>{const r=e.slice();for(let e=r.length-1;e>0;e--){const n=Math.floor(t()*e),o=r[e];r[e]=r[n],r[n]=o}return r})((0,a.filter)(P,(e=>!!e.text)),o.randomizeAnswers?new(s())(b):()=>1),q=l()({"is-transparent":T},"crowdsignal-forms-poll__content"),z=((e,t)=>e.isMultipleChoice?g.RADIO:!(0,a.isEmpty)(t)&&t.indexOf("is-style-buttons")>-1?g.BUTTON:g.RADIO)(o,o.className);return o.fontFamily&&(e=>{if((0,a.isEmpty)(e)||f.THEME_DEFAULT===e||-1===m.indexOf(e))return;const t=`https://fonts.googleapis.com/css2?family=${e}:wght@400;600;700&display=swap`;0===(0,a.filter)(Array.from(document.head.childNodes),(e=>"link"===e.nodeName.toLowerCase()&&e.href===t)).length&&document.head.appendChild((0,a.tap)(document.createElement("link"),(e=>{e.type="text/css",e.rel="stylesheet",e.href=t})))})(o.fontFamily),(0,e.createElement)("div",{className:D,style:j},v&&(0,e.createElement)(W,null,v),(0,e.createElement)("div",{className:q},(0,e.createElement)("h3",{className:"crowdsignal-forms-poll__question",style:{whiteSpace:"pre-wrap"}},(0,c.decodeEntities)(o.question).split("<br>").join("\n")),o.note&&(0,e.createElement)("div",{className:"crowdsignal-forms-poll__note",style:{whiteSpace:"pre-wrap"}},(0,c.decodeEntities)(o.note).split("<br>").join("\n")),!k&&(0,e.createElement)(H,{answers:Z,answerStyle:z,buttonAlignment:o.buttonAlignment,isMultipleChoice:o.isMultipleChoice,onSubmit:async e=>{try{C(""),y(!1),await N(e)}catch(e){C(e instanceof M?e.message:(0,u.__)("Server error. Please try again.","crowdsignal-forms"))}},submitButtonLabel:o.submitButtonLabel,hasVoted:_,isVoting:O,hideBranding:o.hideBranding}),k&&(0,e.createElement)(V,{pollIdFromApi:x,answers:Z,setErrorMessage:C,hideBranding:o.hideBranding})),T&&(0,e.createElement)(Q,n({},o,{setDismissSubmitMessage:y})),(R||_)&&(0,e.createElement)(A,{showSubmitMessage:T,isPollClosed:R,hasVoted:_}),p())},(J=e=>({fallbackStyles:N(e.querySelector(".crowdsignal-forms__style-probe"))}),(0,x.createHigherOrderComponent)((t=>class extends e.Component{constructor(e){super(e),this.nodeRef=this.props.node,this.state={fallbackStyles:void 0,grabStylesCompleted:!1},this.bindRef=this.bindRef.bind(this)}bindRef(e){e&&(this.nodeRef=e)}componentDidMount(){this.grabFallbackStyles()}componentDidUpdate(){this.grabFallbackStyles()}grabFallbackStyles(){const{grabStylesCompleted:e,fallbackStyles:t}=this.state;if(this.nodeRef&&!e){const e=J(this.nodeRef,this.props);S()(e,t)||this.setState({fallbackStyles:e,grabStylesCompleted:Object.values(e).every(Boolean)})}}render(){const r=(0,e.createElement)(t,n({},this.props,this.state.fallbackStyles));return this.props.node?r:(0,e.createElement)("div",{ref:this.bindRef}," ",r," ")}}),"withFallbackStyles"))((t=>{let{fallbackStyles:r,...o}=t;return(0,e.createElement)(X,n({fallbackStyles:r||{},renderStyleProbe:()=>r?null:(0,e.createElement)(O,null)},o))}))),te=window.ReactDOM;const re=(e,t)=>(0,a.forEach)(document.querySelectorAll(`div[${e}]`),(r=>{try{const n=JSON.parse(r.dataset[(0,a.camelCase)(e.substr(5))]),o=t(n,r);r.removeAttribute(e),(0,te.render)(o,r)}catch(t){console.error("Crowdsignal Forms: Failed to parse block data for: %s",e)}})),ne=(e,t)=>{((0,a.isEmpty)(window.CrowdsignalMutationObservers)||!0!==window.CrowdsignalMutationObservers[e])&&(new window.MutationObserver((()=>re(e,t))).observe(document.body,{attributes:!0,attributeFilter:[e],childList:!0,subtree:!0}),(0,a.isEmpty)(window.CrowdsignalMutationObservers)&&(window.CrowdsignalMutationObservers=[]),window.CrowdsignalMutationObservers[e]=!0,re(e,t))};((e,t)=>{if("complete"===document.readyState)return ne(e,t);window.addEventListener("load",(()=>ne(e,t)))})("data-crowdsignal-poll",(t=>(0,e.createElement)(ee,{attributes:t})))}()}();