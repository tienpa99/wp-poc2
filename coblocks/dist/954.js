(self.webpackChunkcoblocks=self.webpackChunkcoblocks||[]).push([[954],{4896:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n(8824).Z},8824:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(9307),s=n(444);const r=(0,o.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(s.Path,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"}))},7954:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>V});var o=n(7462),s=n(9307),r=n(4184),l=n.n(r),a=n(4721),c=n.n(a),i=n(2819),m=n(7635),u=n(6989),d=n.n(u),p=n(5736),h=n(4333),g=n(6483),v=n(9771),f=n(9818),b=n(2175),_=n(5609),y=n(8423),k=n.n(y);const E=e=>{let{children:t,gutter:n,gutterCustom:o,className:r,condition:a=!0}=e;if(!(0,s.isValidElement)(t))return t;if(void 0!==t.props.blockProps){const e={blockProps:{...t.props.blockProps,className:l()(t.props.blockProps.className,{[`has-${n}-gutter`]:n&&!!a})}};return"custom"===n&&void 0!==o&&(e.blockProps.style={"--coblocks-custom-gutter":`${o}em`}),(0,s.cloneElement)(t,e)}const c={className:l()(r,t.props.className,{[`has-${n}-gutter`]:n&&!!a})};return t.props.style&&(c.style={...t.props.style}),"custom"===n&&void 0!==o&&(c.style={...c.style,"--coblocks-custom-gutter":`${o}em`}),(0,s.cloneElement)(t,c)};var w=n(4896),S=n(444);const x=(0,s.createElement)(S.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(S.Path,{d:"M4 18h6V6H4v12zm9-9.5V10h7V8.5h-7zm0 7h7V14h-7v1.5z"})),z=(0,s.createElement)(S.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(S.Path,{d:"M14 6v12h6V6h-6zM4 10h7V8.5H4V10zm0 5.5h7V14H4v1.5z"})),P={};P.styleHorizontalImageRight=(0,s.createElement)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 26",height:"26",width:"56"},(0,s.createElement)(_.Path,{d:"m48 11.0910645v-10.00000005h-10v10.00000005zm-40-6.00000005h24v-2h-24zm0 4v-2h18v2zm40 16.00000005h-10v-10h10zm-40-6v-2h24v2zm0 4v-2h18v2z"})),P.styleHorizontalImageLeft=(0,s.createElement)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 26",height:"26",width:"56"},(0,s.createElement)(_.Path,{d:"m18 11.0910645v-10.00000005h-10v10.00000005zm6-6.00000005h24v-2h-24zm0 4v-2h18v2zm-6 16.00000005h-10v-10h10zm6-6v-2h24v2zm0 4v-2h18v2z"})),P.styleStacked=(0,s.createElement)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 26",height:"26",width:"56"},(0,s.createElement)(_.Path,{d:"m26 17v-16h-16v16zm-16 4h10v-2h-10zm0 4v-2h10v2zm36-8h-16v-16h16zm-16 4v-2h10v2zm0 4v-2h10v2z"}));const C=P;function N(){return(0,s.createElement)(_.PanelBody,{initialOpen:!1,title:(0,s.createElement)("span",{className:"coblocks-ellipsis-loading"},(0,p.__)("Loading Inspector","coblocks"))},(0,s.createElement)(_.Spinner,null))}function L(e){let{children:t}=e;return(0,s.createElement)(b.InspectorControls,null,(0,s.createElement)(s.Suspense,{fallback:(0,s.createElement)(N,null)},t))}const I=(0,s.lazy)((()=>n.e(758).then(n.bind(n,8758)))),R={per_page:-1},T=wp.tokenList,A=[{name:"stacked",
/* translators: block style */
label:(0,p.__)("Stacked","coblocks"),icon:C.styleStacked,isDefault:!0},{name:"horizontal",
/* translators: block style */
label:(0,p.__)("Horizontal","coblocks"),icon:C.styleHorizontalImageRight,iconAlt:C.styleHorizontalImageLeft}];function U(e,t){for(const n of new T(t).values()){if(-1===n.indexOf("is-style-"))continue;const t=n.substring(9),o=(0,i.find)(e,{name:t});if(o)return o}return(0,i.find)(e,"isDefault")}const V=(0,h.compose)([(0,f.withSelect)(((e,t)=>{const{postsToShow:n,order:o,orderBy:s,categories:r,categoryRelation:l}=t.attributes,{getEntityRecords:a,getMedia:c}=e("core"),{getCurrentPost:m}=e("core/editor"),u=_.QueryControls.toString().includes("selectedCategories"),d=m();return{latestPosts:u?(()=>{const t=r&&r.length>0?r.map((e=>null==e?void 0:e.id)):[],m=(0,i.pickBy)({categories:t,order:o,orderby:s,per_page:"and"===l?"-1":n,exclude:d.id},(e=>!(0,i.isUndefined)(e)));let u=a("postType","post",m);return"and"===l&&u&&(u=u.filter((e=>(0,i.isEqual)(e.categories.concat().sort(),t.concat().sort()))).slice(0,n)),Array.isArray(u)?u.map((t=>{if(t.featured_media){const n=c(t.featured_media);let o=(0,i.get)(n,["media_details","sizes","source_url"],null);return o||(o=(0,i.get)(n,"source_url",null)),{...t,featured_media_object:t.featured_media&&e("core").getMedia(t.featured_media)}}return t})):u})():(()=>{const t=(0,i.pickBy)({categories:r,order:o,orderby:s,per_page:n,exclude:d.id},(e=>!(0,i.isUndefined)(e)));let l=a("postType","post",t);return l&&(l=l.map((t=>({...t,featured_media_object:t.featured_media&&e("core").getMedia(t.featured_media)})))),l})(),useUpdatedQueryControls:u}}))])((e=>{const{attributes:t,setAttributes:n,className:r,latestPosts:a}=e,{displayPostContent:u,displayPostDate:f,displayPostLink:y,postLink:S,postFeedType:P,externalRssUrl:C,columns:N,postsToShow:V,excerptLength:B,listPosition:M,imageSize:j,imageStyle:F}=t,[H,O]=(0,s.useState)([]),[Z,G]=(0,s.useState)(C),[$]=(0,s.useState)(2),[D]=(0,s.useState)(1),[Q,q]=(0,s.useState)(!!(r.includes("is-style-stacked")&&N!==$||r.includes("is-style-horizontal")&&N!==D)),J=(0,h.usePrevious)(r);let K=(0,s.useRef)(!0);const W=U(A,r);(0,s.useEffect)((()=>(se(W),d()({path:(0,g.addQueryArgs)("/wp/v2/categories",R)}).then((e=>{K&&O(e)})).catch((()=>{K&&O([])})),()=>{K=!1})),[]),(0,s.useEffect)((()=>{y&&!u&&n({displayPostLink:!1}),r!==J&&(r.includes("is-style-stacked")&&n({columns:Q?N:$}),r.includes("is-style-horizontal")&&n({columns:Q?N:D}))}),[J,r,Q,N,$,D]);const X=[{icon:w.Z,title:(0,p.__)("Edit RSS URL","coblocks"),onClick:()=>G(!0)}],Y=Array.isArray(a)&&a.length,ee=Array.isArray(a)&&a.length>V?a.slice(0,V):a,te=(0,i.some)(ee,"featured_media_object"),ne=[{icon:(0,s.createElement)(_.Icon,{icon:x}),title:(0,p.__)("Image on left","coblocks"),isActive:"left"===M,onClick:()=>n({listPosition:"left"})},{icon:(0,s.createElement)(_.Icon,{icon:z}),title:(0,p.__)("Image on right","coblocks"),isActive:"right"===M,onClick:()=>n({listPosition:"right"})}],oe=(0,v.__experimentalGetSettings)().formats.date,se=e=>{const o=U(A,r),s=function(e,t,n){const o=new T(e);return t&&o.remove("is-style-"+t.name),o.add("is-style-"+n.name),o.value}(t.className,o,e);n({className:s})},re=()=>{q(!0)};if(!Y&&"internal"===P)return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(L,null,(0,s.createElement)(I,(0,o.Z)({},e,{attributes:t,hasPosts:Y,hasFeaturedImage:te,editing:Z,activeStyle:W,styleOptions:A,onUpdateStyle:se,categoriesList:H,postCount:a&&a.length}))),(0,s.createElement)(_.Placeholder,{icon:(0,s.createElement)(_.Icon,{icon:m.Qgu}),label:(0,p.__)("Blog Posts","coblocks")},Array.isArray(a)?(0,s.createElement)(s.Fragment,null,(0,p.__)("No posts found. Start publishing or add posts from an RSS feed.","coblocks"),(0,s.createElement)(_.Button,{className:"components-placeholder__cancel-button",title:(0,p.__)("Retrieve an External Feed","coblocks"),isSecondary:!0,onClick:()=>{n({postFeedType:"external"})}},(0,p.__)("Use External Feed","coblocks"))):(0,s.createElement)(_.Spinner,null)));if(Z&&"external"===P)return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(L,null,(0,s.createElement)(I,(0,o.Z)({},e,{onUserModifiedColumn:re,attributes:t,hasPosts:Y,hasFeaturedImage:!1,editing:Z,activeStyle:W,styleOptions:A,onUpdateStyle:se,categoriesList:H,postCount:a&&a.length}))),(0,s.createElement)(_.Placeholder,{icon:(0,s.createElement)(_.Icon,{icon:m.Qgu}),label:(0,p.__)("RSS Feed","coblocks"),instructions:(0,p.__)("RSS URLs are generally located at the /feed/ directory of a site.","coblocks")},(0,s.createElement)("form",{onSubmit:e=>{e.preventDefault(),C&&G(!1)}},(0,s.createElement)(_.TextControl,{placeholder:(0,p.__)("https://example.com/feedâ€¦","coblocks"),value:C,onChange:e=>n({externalRssUrl:e}),className:"components-placeholder__input"}),(0,s.createElement)(_.Button,{type:"submit",disabled:!C},(0,p.__)("Use URL","coblocks")))));const le=c()(r,"is-style-horizontal"),ae=c()(r,"is-style-stacked");return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(L,null,(0,s.createElement)(I,(0,o.Z)({},e,{onUserModifiedColumn:re,attributes:t,hasPosts:Y,hasFeaturedImage:te,editing:Z,activeStyle:W,styleOptions:A,onUpdateStyle:se,categoriesList:H,postCount:a&&a.length}))),(0,s.createElement)(b.BlockControls,null,le&&(0,s.createElement)(_.Toolbar,{controls:ne}),"external"===P&&(0,s.createElement)(_.Toolbar,{controls:X})),"external"===P&&(0,s.createElement)(_.Disabled,null,(0,s.createElement)(k(),{block:"coblocks/posts",attributes:t})),"internal"===P&&(0,s.createElement)("div",{className:r},(0,s.createElement)(E,(0,o.Z)({},t,{condition:t.columns>=2}),(0,s.createElement)("div",{className:l()("wp-block-coblocks-posts__inner",{"has-columns":N,[`has-${N}-columns`]:N,"has-responsive-columns":N,"has-image-right":le&&"right"===M,[`has-${j}-image`]:le,[`has-${F}-image`]:F})},ee.map(((e,t)=>{const o=e.featured_media_object?e.featured_media_object.source_url:null,r="url("+o+")",a=l()("wp-block-coblocks-posts__content",{"self-center":le&&!u&&N<=2}),c=e.title.rendered.trim();let i=e.excerpt.rendered;""===e.excerpt.raw&&(i=e.content.raw);const m=document.createElement("div");return m.innerHTML=i,i=m.textContent||m.innerText||"",(0,s.createElement)("div",{key:t,className:"wp-block-coblocks-posts__item"},o&&(0,s.createElement)("div",{className:"wp-block-coblocks-posts__image"},(0,s.createElement)("div",{className:"bg-cover bg-center-center",style:{backgroundImage:r}})),(0,s.createElement)("div",{className:a},ae&&f&&e.date_gmt&&(0,s.createElement)("time",{dateTime:(0,v.format)("c",e.date_gmt),className:"wp-block-coblocks-posts__date"},(0,v.dateI18n)(oe,e.date_gmt)),(0,s.createElement)(_.Disabled,null,(0,s.createElement)("a",{href:e.link,target:"_blank",rel:"noreferrer noopener",alt:c},c?(0,s.createElement)(s.RawHTML,null,c)
/* translators: placeholder when a post has no title */:(0,p.__)("(no title)","coblocks"))),le&&f&&e.date_gmt&&(0,s.createElement)("time",{dateTime:(0,v.format)("c",e.date_gmt),className:"wp-block-coblocks-posts__date"},(0,v.dateI18n)(oe,e.date_gmt)),u&&(0,s.createElement)("div",{className:"wp-block-coblocks-posts__excerpt"},(0,s.createElement)(s.RawHTML,{key:"html"},B<i.trim().split(" ").length?i.trim().split(" ",B).join(" ")+"â€¦":i.trim().split(" ",B).join(" "))),y&&(0,s.createElement)(b.RichText,{tagName:"a",className:"wp-block-coblocks-posts__more-link",onChange:e=>n({postLink:e}),value:S,placeholder:(0,p.__)("Read more","coblocks"),multiline:!1,withoutInteractiveFormatting:!1,isSelected:!1})))}))))))}))},4184:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var l=s.apply(null,n);l&&e.push(l)}}else if("object"===r)if(n.toString===Object.prototype.toString)for(var a in n)o.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},2118:(e,t,n)=>{var o=n(1848),s=n(2722),r=n(2351);e.exports=function(e,t,n){return t==t?r(e,t,n):o(e,s,n)}},2722:e=>{e.exports=function(e){return e!=e}},7415:(e,t,n)=>{var o=n(9932);e.exports=function(e,t){return o(t,(function(t){return e[t]}))}},2351:e=>{e.exports=function(e,t,n){for(var o=n-1,s=e.length;++o<s;)if(e[o]===t)return o;return-1}},4721:(e,t,n)=>{var o=n(2118),s=n(8612),r=n(7037),l=n(554),a=n(2628),c=Math.max;e.exports=function(e,t,n,i){e=s(e)?e:a(e),n=n&&!i?l(n):0;var m=e.length;return n<0&&(n=c(m+n,0)),r(e)?n<=m&&e.indexOf(t,n)>-1:!!m&&o(e,t,n)>-1}},7037:(e,t,n)=>{var o=n(4239),s=n(1469),r=n(7005);e.exports=function(e){return"string"==typeof e||!s(e)&&r(e)&&"[object String]"==o(e)}},2628:(e,t,n)=>{var o=n(7415),s=n(3674);e.exports=function(e){return null==e?[]:o(e,s(e))}},7462:(e,t,n)=>{"use strict";function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o.apply(this,arguments)}n.d(t,{Z:()=>o})}}]);