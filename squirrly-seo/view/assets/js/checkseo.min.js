(function($){"use strict";$.fn.sq_CheckSEO=function(){var $this=this;$this.listencheckSeo=function(){$(".sq_seocheck_submit").off("click").on("click",function(){var $button=$(this);$("a[name='tasks']").remove();$("#sq_loading_modal").modal("show");$button.addClass("sq_minloading");var $progress=0;$(".progress .progress-bar").css("width",function(){return $progress+"%"});var $progressInterval=setInterval(function(){$progress+=5;$(".progress .progress-bar").css("width",function(){return $progress+"%"});if($progress>=100){clearInterval($progressInterval)}},1e3);$.post(sqQuery.ajaxurl,{action:"sq_ajax_checkseo",sq_nonce:sqQuery.nonce}).done(function(response){clearInterval($progressInterval);$button.removeClass("sq_minloading");$(".progress .progress-bar").css("width",function(){return"100%"});setTimeout(function(){$("#sq_loading_modal").modal("hide");$this.loadGloas();if($("#sq_onboarding_modal").length>0){$("#sq_onboarding_modal").modal("show")}$("html,body").animate({scrollTop:$("#sq_seocheck_tasks").offset().top-50})},1e3)}).error(function(){clearInterval($progressInterval);$button.removeClass("sq_minloading");$(".progress .progress-bar").css("width",function(){return"100%"});$("#sq_loading_modal").modal("hide");location.reload()})});$(".sq_seocheck_submit[data-action=trigger]").trigger("click")};$this.loadGloas=function(){$this.find("#sq_seocheck_content").addClass("sq_minloading");return $.post(sqQuery.ajaxurl,{action:"sq_ajax_getgoals",sq_nonce:sqQuery.nonce}).done(function(response){$this.find("#sq_seocheck_content").removeClass("sq_minloading");if(typeof response.html!=="undefined"){$this.find("#sq_seocheck_content").html(response.html)}$this.find("#sq_seocheck_content").find(".sq_save_ajax").find("button").on("click",function(){var $button=$(this);$button.sq_ajaxCallListen().done(function(){$this.loadGloas()})});$this.find(".sq_task").each(function(){$(this).off("sq_assistant_modal_show").on("sq_assistant_modal_show",function(){$(".sq_save_ajax").find("button").on("click",function(){var $button=$(this);$button.sq_ajaxCallListen().done(function(){$this.loadGloas();$("#sq_assistant_modal").modal("hide")})})})});$this.find("#sq_seocheck_content").sq_Assistant();$this.listencheckSeo();if(typeof wp!=="undefined"){new TypeWriter("#sq_goals_ai",[wp.i18n.__("Ask the AI Consultant to check for Goal progress","squirrly-seo")],{writeDelay:60,holdOnceWritten:1e5,stopAfterOnce:true})}}).error(function(){$this.find("#sq_seocheck_content").removeClass("sq_minloading")})};$this.loadGloas();return $this};$(document).ready(function(){$("#sq_blockseoissues").sq_CheckSEO()})})(jQuery);